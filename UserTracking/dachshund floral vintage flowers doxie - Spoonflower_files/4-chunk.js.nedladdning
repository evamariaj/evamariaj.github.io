(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1189:function(e,t,a){"use strict";a.r(t),a.d(t,"ProductSharedContainer",function(){return C});function de(a,r,n,i,o,c,s,l,u,d){var m=n.includes(Ee.g)?Fe.a:Fe.d,b=g.a.get(m),p=b===n;r(i,o,c,s,l,u,d).then(function(e){var t=i===n;!(e.data.fabric_code===n)||!b||p||t&&e.data.fabric_code!==b?(Object(Ae.b)(m,e.data.fabric_code),a(e.data.fabric_code)):r(b,o,c,s,l,u,d).then(function(e){Object(Ae.b)(m,e.data.fabric_code),a(e.data.fabric_code)})})}var fe=a(0),ge=a.n(fe),r=a(18),he=a.n(r),n=a(1),i=a.n(n),ye=a(26),me=a(5),ve=a(2),o=a(63),Oe=a(38),je=a(106),be=a(64),we=a(89),f=a(266),c=a(268),b=a(859),x=a(258),Se=a(37),Ce=a(8),Ie=a(849),s=a(877),Ee=a(3),r=a(27),pe=a(7),Te=a(261),n=a(14),ke=a.n(n),Re=a(163),Pe=a(105),Ne=a(866),n=a(75),g=a.n(n),Ae=a(165),Fe=a(88),xe=a(259),De=a(20),_e=a(68),qe=a(67),Me=a(894),ze=a(262),Ue=a(907),Ge=a(893);function Le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}n=function(e){function t(e,t,a,r,n,i,o){return Object(Se.s)(le,e,t,a,r,n,i,o)}function a(){if(Object(Ce.i)(re))return he()(re,"".concat(ie,".sku"),qe.d)}var i=e.measurementSystem,r=e.country,n=e.currency,o=e.setSubstrate,c=e.quantity,s=e.addToCartIsFetching,l=e.params,u=e.orderItem,d=e.taxRate,m=e.designName,b=e.designerUserName,p=e.designerId,f=e.userId,g=e.userEmail,h=e.viewport,y=e.setQuantity,v=e.addToCartClick,O=e.addSwatchToCartClick,j=e.designId,w=e.productTypeAbbreviated,S=e.setProductSize,C=e.userIsPrivateBuyer,I=e.reviewSummary,E=e.designFileName,T=e.dispatchChunkSize,k=e.buttonContent,R=e.buttonContentIsAdded,P=e.orderItemIsFetching,N=e.userType,A=e.slideInModal,F=e.openFabricPreferencesModal,x=e.fabricType,D=e.designThumbnailSimple,_=We(Object(fe.useState)(!1),2),q=_[0],M=_[1],z=We(Object(fe.useState)(""),2),U=z[0],G=z[1],L=We(Object(fe.useState)(!1),2),W=L[0],H=L[1],B=Object(ye.e)(function(e){var t=l.pageLang,a=Object(Ce.i)(e.design.tags)?e.design.tags[t]:[],r=e.design.recommended_fabric,n=De.h[e.fabrics.measurement_system];return{locale:t,modalName:e.pageSetup.modal.modalName,displayModal:e.pageSetup.modal.displayModal,isAvailableOnFabric:e.design.for_sale_as_fabric,recommendedFabricCode:r,recommendedFabricWidth:r&&ke.a.translate("fabricMeasurements.".concat(r,".printableWidth.").concat(n)),designImages:e.design.images,tags:(a||[]).filter(function(e){return Object(Ce.i)(e.slug)}).slice(0,xe.l),fabrics:e.fabrics,defaultFabricCode:e.fabrics.default,fabricsFetching:e.fabrics.isFetching,selectedSubstrate:Object(Ie.f)(e,Ee.g),queryOrderItemId:e.routing.locationBeforeTransitions.query.order_item_id,fabricPricing:e.addToCart.pricing,fabricPricePer:e.addToCart.price_per,analytics:e.addToCart.analytics,productSize:e.addToCart.productSize||Object(Ie.j)(e,U),chunkSize:e.addToCart.chunkSize,chunkable:i===De.b?he()(e.addToCart.pricing,"YARD.chunkable",!1):he()(e.addToCart.pricing,"METER.chunkable",!1)}},ye.c),V=B.locale,Q=B.isAvailableOnFabric,$=B.recommendedFabricCode,K=B.recommendedFabricWidth,Y=B.designImages,Z=B.tags,J=B.fabrics,X=B.fabricsFetching,ee=B.selectedSubstrate,te=B.fabricPricing,ae=B.fabricPricePer,re=B.analytics,ne=B.chunkSize,ie=B.productSize,oe=B.displayModal,e=B.modalName,_=B.chunkable,ce=B.defaultFabricCode,se=B.queryOrderItemId,le=Object(ye.d)();if(Object(fe.useEffect)(function(){var e,t,a;le(Object(Oe.e)({pageTitle:Object(ve.c)("fabric.head.title")})),Object(Ce.r)(J.fabrics)&&(e=r,t=i,a=n,Object(Se.t)(le,e,t,a))},[]),Object(fe.useEffect)(function(){Object(Ce.i)(u.chunk_size)&&Object(Ce.k)(ne)&&T(u.chunk_size)},[u]),Object(fe.useEffect)(function(){s||!Object(Ce.i)(ce)||!Object(Ce.i)(ee)||se&&!W||de(G,t,ce,ee,j,c,r,n,i,u.id)},[ee,ce]),Object(fe.useEffect)(function(){var e;s||!Object(Ce.i)(ce)||Object(Ce.g)(u.fabric)||W||(e=u.fabric.code,Object(Ae.b)(Fe.a,u.fabric.code),de(G,t,ce,e,j,c,r,n,i,u.id),H(!0))},[u.fabric,ce]),Object(fe.useEffect)(function(){s||Object(Ce.r)(J.fabrics)||Object(Ce.g)(U)||t(U,j,c,r,n,i,u.id)},[c]),Object(fe.useEffect)(function(){var e;Object(we.c)(dataLayer)&&!Object(Ce.g)(U)&&!Object(Ce.r)(te)&&Object(Ce.i)(ie)&&Object(Ce.i)(te[ie])&&(e=a(),Object(Ce.i)(e)&&dataLayer.push(Object(we.k)(e,he()(te,"".concat(ie,".price"),0),n,c,qe.e)),q||(M(!0),dataLayer.push(Object(we.e)(ke.a.translate("en.fabricShop.".concat(U)),j,he()(te,"".concat(ie,".price")),n,c,b,qe.e,ke.a.translate("en.cart.cart.".concat(ie)),qe.e))))},[ie,te,U]),Object(Ce.r)(J.fabrics)||Object(Ce.r)(te)||Object(Ce.k)(te[ie]))return ge.a.createElement(Te.a,{message:Object(ve.c)("common.loading")});var z={__html:"<ul class='circle-list x-indented'>".concat(Object(ve.c)("fabricShop.".concat(U,".details")),"</ul>")},ue=(Le(L={fabric:U},pe.p,ie),Le(L,"design_id",j),Le(L,"quantity",c),Le(L,"status",_e.a),Le(L,"chunk_size",ne),L),B=Object(ve.c)("fabric.content.addToCartTitle",{product:"".concat(Object(ve.c)("common.fabricSize.".concat(ie),{context:c})," ").concat(Object(ve.c)("fabricShop.".concat(U,".name")))}),L=!!te&&1===Object.keys(te).length;return ge.a.createElement(ge.a.Fragment,null,ge.a.createElement(Re.a,{title:Object(ve.c)("titles.fabricPage.title",{designTitle:Object(Ne.b)(Z,m,V)}),meta:[{name:"description",content:Object(ve.c)("meta.fabricPDP.description",{designTitle:Object(Ne.b)(Z,m,V),designer:b})}]}),ge.a.createElement(Me.a,{productType:x,productTypeAbbreviated:w,selectedSubstrate:Object(Ce.g)(U)?ce:U,taxRate:d,fabricList:Object.keys(J.fabrics),fabricSizeSizingMap:he()(J.fabrics,"".concat(U,".sizing")),productSize:ie,productSku:a(),singleFabricSizeAvailable:L,currency:n,measurementSystem:i,orderItemId:u.id,quantity:c,rawItemPrice:te[ie].price,rawItemPriceUndiscounted:te[ie].price_undiscounted,discountsApplied:te[ie].discounts_applied,designId:j,designName:m,designerUserName:b,designerId:p,designFileName:E,designThumbnail:D,addToCartIsFetching:s,isFetchingFabrics:X,orderItemIsFetching:P,addToCartClick:function(e){v(ue,e)},addSwatchToCartClick:function(e){O(ue,e)},testSwatchPrice:he()(ae,Ee.vc)||he()(ae,Ee.uc),pricePerMeter:he()(ae,De.d),pricePerYard:he()(ae,De.g),setQuantity:y,setProductSize:S,setSubstrate:o,viewport:h,userType:N,userId:f,userEmail:g,buttonContent:k,buttonContentIsAdded:R,userIsDesigner:p===f,openFabricPreferencesModal:F,recommendedFabricCode:$,recommendedFabricWidth:K,reviewSummary:I,locale:V,tags:Z,userIsPrivateBuyer:C,isAvailableOnProduct:Q,designImages:Y,isChunkable:_&&(ie===De.d||ie===De.g),chunkSize:ne,setChunkSize:T,productFormTitle:Object(ve.c)("fabric.headlines.main"),addToCartButtonTitle:B}),ge.a.createElement(Ge.a,{productType:x,locale:V,selectedSubstrate:Object(Ce.g)(U)?ce:U,productSize:ie,orderItemId:u.id,fabricDetailsHtml:z,wallpaperAvailableSubstrateThumbnail:he()(Y.wallpaper,"wallpaper_wall_front.thumbnail",""),showMeasurement:!0,rawItemPrice:te[ie].price,quantity:c}),oe&&"fabric-shop"===e&&ge.a.createElement(ze.a,{slideInModal:A,modalExtraWide:!0,modalWithButton:!0,displayFabricsModal:oe,showFiltersComponent:function(){var e=Le({},pe.n,j),t=Le({},pe.o,Object(Pe.e)(U,7,U.length)),a=Le({},pe.w,u.id);le(Object(Oe.e)({showFilters:!0})),me.d.push(Object(be.d)(ve.a.localePathname("shop.fabric"),Object.assign({},e,t,a)))},contents:ge.a.createElement(Ue.default,{selectedSubstrate:Object(Ce.g)(U)?ce:U,params:l,displayFabricsModal:oe,isStandardFabricModal:!0,routingPath:"fabric.page"})}))};n.propTypes={dispatchChunkSize:i.a.func,orderItemIsFetching:i.a.bool,orderItem:i.a.shape({id:i.a.number,fabric:i.a.object,design:i.a.object,quantity:i.a.object,chunk_size:i.a.number}),params:i.a.object.isRequired,country:i.a.string.isRequired,measurementSystem:i.a.string.isRequired,currency:i.a.string.isRequired,userId:i.a.number,userEmail:i.a.string,userType:i.a.oneOf([r.c,r.a,r.b]),viewport:i.a.string,productTypeAbbreviated:s.a.isRequired,addToCartClick:i.a.func.isRequired,addSwatchToCartClick:i.a.func.isRequired,fabricType:i.a.string,designId:i.a.number,designName:i.a.string.isRequired,designFileName:i.a.string.isRequired,userIsPrivateBuyer:i.a.bool.isRequired,designerUserName:i.a.string.isRequired,designerId:i.a.number.isRequired,designThumbnailSimple:i.a.string,quantity:i.a.number,addToCartIsFetching:i.a.bool.isRequired,taxRate:i.a.number,reviewSummary:i.a.oneOfType([i.a.array,i.a.object]),buttonContent:i.a.oneOfType([i.a.string,i.a.object]).isRequired,buttonContentIsAdded:i.a.bool.isRequired,setProductSize:i.a.func.isRequired,setSubstrate:i.a.func.isRequired,setQuantity:i.a.func.isRequired,openFabricPreferencesModal:i.a.func.isRequired,slideInModal:i.a.bool};var D=n,He=a(60),Be=a(50);function Ve(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function Qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a=function(e){function t(e){de(Object(je.g)(e))}function a(){if(Object(Ce.i)(le))return Object(Ce.i)(ce)&&ce.includes(Ee.eb)?he()(le,"".concat(ne,".additions.").concat(ce,".sku"),qe.d):he()(le,"".concat(ne,".sku"),qe.d)}var r=e.setProductSize,n=e.setSubstrate,l=e.homeGoodType,u=e.queryParams,c=e.quantity,s=e.country,d=e.currency,m=e.params,b=e.measurementSystem,i=e.designName,o=e.designerUserName,p=e.designId,f=e.designerId,g=e.designFileName,h=e.viewport,y=e.userId,v=e.userEmail,O=e.setQuantity,j=e.addToCartIsFetching,w=e.reviewSummary,S=e.userIsPrivateBuyer,C=e.buttonContent,I=e.buttonContentIsAdded,E=e.userType,T=e.slideInModal,k=e.openFabricPreferencesModal,R=e.taxRate,P=e.addToCartClick,N=e.addSwatchToCartClick,A=e.productTypeAbbreviated,F=e.orderItem,x=e.designThumbnailSimple,D=$e(Object(fe.useState)(!1),2),_=D[0],q=D[1],M=$e(Object(fe.useState)(0),2),z=M[0],U=M[1],G=$e(Object(fe.useState)(0),2),L=G[0],W=G[1],H=Object(ye.e)(function(e){var t=m.pageLang,a=Object(Ce.i)(e.design.tags)?e.design.tags[t]:[],r=e.addToCart.pricing,n=!!Object.keys(r||{}).find(function(e){return 0<Object.keys(he()(r,"".concat(e,".home_goods_additions"),{})).length}),i={locale:t,displayModal:e.pageSetup.modal.displayModal,modalName:e.pageSetup.modal.modalName,sizeQueryParam:Object(Ie.e)(u),hasAdditionPossible:n,productPricing:r,analytics:e.addToCart.analytics,productAvailable:e.addToCart.availability,additionPricing:e.addToCart.price_per,swatchPrice:e.addToCart.fabric_swatch_price,tags:Object(Ce.g)(a)?[]:a.filter(function(e){return Object(Ce.i)(e.slug)}).slice(0,xe.l),isAvailableOnHomeGood:e.design.for_sale_as_home_good};if(Object(Ce.r)(e.addToCart.allowed_fabrics)||Object(Ce.r)(e.design.images))return i;var o,c=Object(Ie.a)(l),s=Object(Ie.g)(e,u,l,c),t=he()(e.addToCart,"allowed_fabrics",{}),n=Object(Ce.i)(e.addToCart.pricing[s])&&Object.keys(e.addToCart.pricing[s].home_goods_additions||[]),a=e.addToCart.productSize;return Object(Ce.k)(F.id)&&Object(Ce.k)(a)&&a!==s&&(o=s),Object.assign(i,{homeGoodTypeGeneric:c,fabric:Object(Ie.d)(e),allowedFabrics:t.fabrics,newSelectedProductSize:o,activeProductSize:s,homeGoodImages:e.design.images.home_good,wallpaperAvailableSubstrateThumbnail:e.design.images.wallpaper.wallpaper_wall_front.thumbnail,selectedAddition:e.addToCart.addition,validAdditionParam:n&&n.includes(u.addition)?u.addition:void 0})},ye.c),B=H.locale,V=H.displayModal,Q=H.modalName,$=H.sizeQueryParam,K=H.hasAdditionPossible,Y=H.productPricing,Z=H.additionPricing,J=H.swatchPrice,X=H.tags,ee=H.isAvailableOnHomeGood,te=H.fabric,ae=H.allowedFabrics,re=H.newSelectedProductSize,ne=H.activeProductSize,ie=H.homeGoodImages,oe=H.wallpaperAvailableSubstrateThumbnail,ce=H.selectedAddition,se=H.validAdditionParam,le=H.analytics,ue=H.productAvailable,de=Object(ye.d)();if(Object(fe.useEffect)(function(){de(Object(Oe.e)({pageTitle:Object(ve.c)("homeGood.head.title")}))},[]),Object(fe.useEffect)(function(){Object(Ce.i)(re)&&r(re)},[re]),Object(fe.useEffect)(function(){Object(Ce.i)(se)&&t(se)},[se]),Object(fe.useEffect)(function(){!Object(Ce.g)(ce)&&Object(Ce.i)(Y[ne])&&(U(Y[ne].home_goods_additions[ce].price),W(Y[ne].home_goods_additions[ce].price_undiscounted))},[ce,Y,ne]),Object(fe.useEffect)(function(){Object(Ce.i)(te)&&n(te)},[te]),Object(fe.useEffect)(function(){var e,t,a,r,n,i,o;!j&&Object(Ce.i)(l)&&(e=l,t=b,a=p,r=s,n=d,i=c,o=te,Object(Se.x)(de,e,t,a,r,n,i,o))},[l,c,te]),Object(fe.useEffect)(function(){var e;Object(we.c)(dataLayer)&&!Object(Ce.r)(Y)&&Object(Ce.i)(ne)&&Object(Ce.i)(Y[ne])&&(e=a(),Object(Ce.i)(e)&&dataLayer.push(Object(we.k)(e,he()(Y,"".concat(ne,".price"),0),d,c,Object(we.f)(l))),!_&&(!se||se&&Object(Ce.i)(ce))&&(q(!0),dataLayer.push(Object(we.e)(ke.a.translate("en.homeGood.".concat(l)),p,he()(Y,"".concat(ne,".price")),d,c,o,qe.f,ke.a.translate("en.homeGood.cart.productSize.".concat(ne)),Object(we.f)(l),ce&&ke.a.translate("en.homeGood.".concat(l,".additions.").concat(ce))))))},[Y,ne,ce]),Object(Ce.g)(Y))return ge.a.createElement(Te.a,{message:Object(ve.c)("common.loading")});var me=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(a),!0).forEach(function(e){Qe(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({fabric:te,home_good_code:ne,design_id:p,quantity:c},ce&&{home_good_addition_codes:[ce]}),be={fabric:te,design_id:p},e=function(){var t=[],a=[];return Y&&Object.keys(Y).forEach(function(e){Y[e].size===Ee.Yb||t.includes(Y[e].size)||t.push(Y[e].size),Y[e].style===Ee.pc||a.includes(Y[e].style)||a.push(Y[e].style)}),{sizes:!Object(Ce.g)(t),styles:!Object(Ce.g)(a)}};var pe,D={__html:"<ul class='circle-list x-indented'>".concat(Object(ve.c)("fabricShop.".concat(te,".details")),"</ul>")},M=Object(Ne.b)(X,i,B),G=Object(Ne.c)(Object(Ne.b)(X,i,B,80)),H=He.m.includes(l)?"".concat(Object(Ne.c)(M,40)," ").concat(Object(ve.c)("homeGood.".concat(l,".name"))," | ").concat(Be.b):"".concat(Object(ve.c)("homeGood.head.title")," - ").concat(Object(ve.c)("homeGood.".concat(l,".name"))),G=He.m.includes(l)?Object(ve.c)("meta.homeGoodMaskPDP.description",{descriptionDesignTitle:G,homeGoodType:Object(ve.c)("homeGood.".concat(l,".descriptionName"))}):Object(ve.c)("meta.homeGoodPDP.description",{designTitle:M,homeGoodType:Object(ve.c)("homeGood.".concat(l,".name")),designer:o}),M=Object(ve.c)("fabric.content.addToCartTitle",{product:"".concat(c," ").concat(Object(ve.c)("homeGood.".concat(l,".name")))});return ge.a.createElement(ge.a.Fragment,null,ge.a.createElement(Re.a,{title:H,meta:[{name:"description",content:G}]}),ge.a.createElement(Me.a,{productAvailable:ue,productType:l,homeGoodType:l,hasAdditionPossible:K,taxRate:R,locale:B,currency:d,measurementSystem:b,orderItemId:F.id,selectedSubstrate:te,fabricList:ae,productSize:ne,productSku:a(),productPricingMap:Y,sizeStyleMap:(pe={},Y&&Object.keys(Y).forEach(function(e){pe[e]=Qe({},Y[e].size,Y[e].style)}),pe),sizesAreAvailable:e().sizes,stylesAreAvailable:e().styles,designId:p,designName:i,designerUserName:o,designerId:f,designFileName:g,designThumbnail:x,tags:X,viewport:h,userType:E,productTypeAbbreviated:A,userId:y,userEmail:v,quantity:c,selectedAddition:ce,additionPricing:Z,setQuantity:O,setAddition:function(e){t(e)},rawItemPrice:he()(Y,"".concat(ne,".price"),0),rawItemPriceUndiscounted:he()(Y,"".concat(ne,".price_undiscounted"),0),rawItemPriceAddition:z,rawItemPriceAdditionUndiscounted:L,discountsApplied:he()(Y,"".concat(ne,".discounts_applied")),addToCartIsFetching:j,setProductSize:r,setSubstrate:n,addToCartClick:function(e){P(me,e)},addSwatchToCartClick:function(e){N(be,e)},testSwatchPrice:J,buttonContent:C,buttonContentIsAdded:I,reviewSummary:w,userIsPrivateBuyer:S,isAvailableOnProduct:ee,userIsDesigner:f===y,designImages:ie,productFormTitle:Object(ve.c)("homeGood.".concat(l,".name")),addToCartButtonTitle:M,sizeQueryParam:$,openFabricPreferencesModal:k}),ge.a.createElement(Ge.a,{selectedSubstrate:te,productType:l,locale:B,homeGoodType:l,fabricDetailsHtml:D,showMeasurement:!1,productSize:ne,orderItemId:F.id,wallpaperAvailableSubstrateThumbnail:oe,rawItemPrice:he()(Y,"".concat(ne,".price"),0),quantity:c}),V&&"fabric-shop"===Q&&ge.a.createElement(ze.a,{slideInModal:T,displayFabricsModal:V,modalExtraWide:!0,modalWithButton:!1,contents:ge.a.createElement(Ue.default,{params:m,selectedSubstrate:te,fabricOptionsArray:ae,displayFabricsModal:V,isStandardFabricModal:!1,routingPath:l})}))};a.propTypes={params:i.a.object.isRequired,queryParams:i.a.object,country:i.a.string.isRequired,measurementSystem:i.a.string.isRequired,currency:i.a.string.isRequired,orderItem:i.a.shape({id:i.a.number}),userId:i.a.number,userEmail:i.a.string,userType:i.a.oneOf([r.c,r.a,r.b]),viewport:i.a.string,homeGoodType:i.a.string,designId:i.a.number.isRequired,designName:i.a.string.isRequired,designFileName:i.a.string.isRequired,productTypeAbbreviated:s.a.isRequired,userIsPrivateBuyer:i.a.bool.isRequired,designerUserName:i.a.string.isRequired,designerId:i.a.number.isRequired,designThumbnailSimple:i.a.string.isRequired,quantity:i.a.number.isRequired,addToCartIsFetching:i.a.bool.isRequired,reviewSummary:i.a.oneOfType([i.a.array,i.a.object]),buttonContent:i.a.oneOfType([i.a.string,i.a.object]).isRequired,buttonContentIsAdded:i.a.bool.isRequired,addToCartClick:i.a.func.isRequired,addSwatchToCartClick:i.a.func.isRequired,taxRate:i.a.number,setProductSize:i.a.func,setSubstrate:i.a.func,setQuantity:i.a.func,openFabricPreferencesModal:i.a.func.isRequired,slideInModal:i.a.bool};var _=a;function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a=function(e){function t(e,t,a,r,n,i){return Object(Se.Q)(re,e,t,a,r,n,i)}function a(){if(Object(Ce.i)(ee))return he()(ee,"".concat(X,".sku"),qe.d)}var r=e.currency,o=e.params,n=e.measurementSystem,i=e.designName,c=e.designerUserName,s=e.designerId,l=e.designFileName,u=e.viewport,d=e.userType,m=e.userId,b=e.userEmail,p=e.designId,f=e.setQuantity,g=e.addToCartIsFetching,h=e.quantity,y=e.reviewSummary,v=e.userIsPrivateBuyer,O=e.buttonContent,j=e.buttonContentIsAdded,w=e.setProductSize,S=e.setSubstrate,C=e.addToCartClick,I=e.taxRate,E=e.openFabricPreferencesModal,T=e.wallpaperType,k=e.slideInModal,R=e.designThumbnailSimple,P=e.productTypeAbbreviated,N=e.country,A=e.orderItem,F=oe(Object(fe.useState)(!1),2),x=F[0],D=F[1],_=oe(Object(fe.useState)(""),2),q=_[0],M=_[1],z=oe(Object(fe.useState)(!1),2),U=z[0],G=z[1],L=Object(ye.e)(function(e){var t=o.pageLang,a=Object(Ce.i)(e.design.tags)?e.design.tags[t]:[],r=e.addToCart.productSize&&e.addToCart.pricing&&Object.keys(e.addToCart.pricing).includes(e.addToCart.productSize),n=e.addToCart.pricing,i=!!n&&1===Object.keys(n).length;return{locale:t,sizeQueryParam:e.routing.locationBeforeTransitions.query.size,analytics:e.addToCart.analytics,wallpapers:e.wallpapers,selectedSubstrate:Object(Ie.f)(e,Ee.xc),queryOrderItemId:e.routing.locationBeforeTransitions.query.order_item_id,defaultWallpaperCode:e.wallpapers.default,modalName:e.pageSetup.modal.modalName,displayModal:e.pageSetup.modal.displayModal,wallpaperAvailableSubstrateThumbnail:e.design.images.wallpaper.wallpaper_wall_front.thumbnail,tags:(a||[]).filter(function(e){return Object(Ce.i)(e.slug)}).slice(0,xe.l),isAvailableOnWallpaper:e.design.for_sale_as_wallpaper,productSize:r?e.addToCart.productSize:Object(Ie.j)(e,q,i),wallpaperImages:e.design.images.wallpaper,wallpaperDimensions:e.design.wallpaper_dimensions,productPricing:n,singleFabricSizeAvailable:i}},ye.c),W=L.locale,H=L.sizeQueryParam,B=L.productPricing,V=L.wallpapers,Q=L.selectedSubstrate,$=L.modalName,K=L.displayModal,Y=L.isAvailableOnWallpaper,Z=L.wallpaperAvailableSubstrateThumbnail,J=L.tags,X=L.productSize,ee=L.analytics,e=L.wallpaperImages,F=L.wallpaperDimensions,te=L.defaultWallpaperCode,ae=L.queryOrderItemId,_=L.singleFabricSizeAvailable,z=Object(Ce.g)(q)?te:q,re=Object(ye.d)();if(Object(fe.useEffect)(function(){var e,t,a;re(Object(Oe.e)({pageTitle:Object(ve.c)("wallpaper.head.title")})),Object(Ce.r)(V.wallpapers)&&(e=N,t=n,a=r,Object(Se.R)(re,e,t,a))},[]),Object(fe.useEffect)(function(){g||!Object(Ce.i)(te)||!Object(Ce.i)(Q)||ae&&!U||de(M,t,te,Q,p,h,N,r,n)},[Q,te]),Object(fe.useEffect)(function(){var e;g||!Object(Ce.i)(te)||Object(Ce.g)(A.fabric)||U||(e=A.fabric.code,Object(Ae.b)(Fe.d,A.fabric.code),de(M,t,te,e,p,h,N,r,n),G(!0))},[A.fabric,te]),Object(fe.useEffect)(function(){g||Object(Ce.r)(V.wallpapers)||Object(Ce.g)(q)||t(q,p,h,N,r,n)},[h]),Object(fe.useEffect)(function(){var e;Object(we.c)(dataLayer)&&!Object(Ce.g)(q)&&!Object(Ce.r)(B)&&Object(Ce.i)(X)&&Object(Ce.i)(B[X])&&(e=a(),Object(Ce.i)(e)&&dataLayer.push(Object(we.k)(e,he()(B,"".concat(X,".price"),0),r,h,qe.n)),x||(D(!0),dataLayer.push(Object(we.e)(ke.a.translate("en.fabricShop.".concat(q)),p,he()(B,"".concat(X,".price")),r,h,c,qe.n,ke.a.translate("en.cart.cart.".concat(X)),qe.n))))},[X,B]),Object(Ce.g)(p)||Object(Ce.r)(B)||Object(Ce.k)(B[X]))return ge.a.createElement(Te.a,{message:Object(ve.c)("common.loading")});var ne,ie={fabric:q,fabric_size:X,design_id:p,quantity:h},L=Object(ve.c)("fabric.content.addToCartTitle",{product:Object(ve.c)("fabricShop.".concat(z,".cartName"),{size:h,measurementUnit:1===h?Object(ve.c)("cart.cart.ROLL"):Object(ve.c)("invoice.fabricSize.ROLL")})});return F&&(ne=F&&n===De.b?F.normalizedVerticalRepeatSize:F.normalizedVerticalRepeatSizeCm,ne={__html:"<ul class='circle-list x-indented'>".concat(Object(ve.c)("fabricShop.".concat(q,".details.").concat(n),{repeatSize:ne}),"</ul>")}),ge.a.createElement(ge.a.Fragment,null,ge.a.createElement(Re.a,{title:Object(ve.c)("titles.fabricPage.title",{designTitle:Object(Ne.b)(J,i,W)}),meta:[{name:"description",content:Object(ve.c)("meta.wallpaperPDP.description",{designTitle:Object(Ne.b)(J,i,W),designer:c})}]}),ge.a.createElement(Me.a,{productType:T,wallpaperType:T,taxRate:I,locale:W,currency:r,measurementSystem:n,orderItemId:A.id,selectedSubstrate:z,fabricList:Object.keys(V.wallpapers),productSize:X,productSku:a(),singleFabricSizeAvailable:_,productPricingMap:B,designId:p,designName:i,designerUserName:c,designerId:s,designFileName:l,designThumbnail:R,tags:J,productTypeAbbreviated:P,viewport:u,userType:d,userId:m,userEmail:b,quantity:h,setQuantity:f,rawItemPrice:B[X].price,rawItemPriceUndiscounted:B[X].price_undiscounted,discountsApplied:B[X].discounts_applied,addToCartIsFetching:g,setProductSize:w,setSubstrate:S,addToCartClick:function(e){C(ie,e)},buttonContent:O,buttonContentIsAdded:j,reviewSummary:y,userIsPrivateBuyer:v,isAvailableOnProduct:Y,userIsDesigner:s===m,designImages:e,productFormTitle:Object(ve.c)("designs.productsOverview.wallpaper"),addToCartButtonTitle:L,sizeQueryParam:H,openFabricPreferencesModal:E}),ge.a.createElement(Ge.a,{selectedSubstrate:z,productType:T,wallpaperType:T,locale:W,fabricDetailsHtml:ne,productSize:X,orderItemId:A.id,wallpaperAvailableSubstrateThumbnail:Z,rawItemPrice:B[X].price,quantity:h}),K&&"fabric-shop"===$&&ge.a.createElement(ze.a,{slideInModal:k,displayFabricsModal:K,modalExtraWide:!0,modalWithButton:!1,contents:ge.a.createElement(Ue.default,{params:o,selectedSubstrate:z,fabricOptionsArray:Object.keys(V.wallpapers),isWallpaper:Object(Ce.i)(T),wallpaperDimensions:F,displayFabricsModal:K,isStandardFabricModal:!1,routingPath:"wallpaper.page"})}))};a.propTypes={productTypeAbbreviated:s.a.isRequired,params:i.a.object.isRequired,country:i.a.string.isRequired,measurementSystem:i.a.string.isRequired,currency:i.a.string.isRequired,orderItem:i.a.shape({id:i.a.number,fabric:i.a.object}),userId:i.a.number,userEmail:i.a.string,userType:i.a.oneOf([r.c,r.a,r.b]),viewport:i.a.string,wallpaperType:i.a.string,designId:i.a.number.isRequired,designName:i.a.string.isRequired,designFileName:i.a.string.isRequired,userIsPrivateBuyer:i.a.bool.isRequired,designerUserName:i.a.string.isRequired,designerId:i.a.number.isRequired,designThumbnailSimple:i.a.string.isRequired,quantity:i.a.number.isRequired,addToCartIsFetching:i.a.bool.isRequired,reviewSummary:i.a.oneOfType([i.a.array,i.a.object]),buttonContent:i.a.oneOfType([i.a.string,i.a.object]).isRequired,buttonContentIsAdded:i.a.bool.isRequired,addToCartClick:i.a.func.isRequired,taxRate:i.a.number,setProductSize:i.a.func,setSubstrate:i.a.func,openFabricPreferencesModal:i.a.func.isRequired,setQuantity:i.a.func,slideInModal:i.a.bool};var q=a;function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach(function(e){y(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=S(a);return e=r?(e=S(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==m(e)&&"function"!=typeof e?w(t):e}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(n,fe["Component"]);var e,t,a,r=j(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).componentIsMounted=!1,e.openFabricPreferencesModal=e.openFabricPreferencesModal.bind(w(e)),e.state={buttonContent:"",buttonContentIsAdded:!1,slideInModal:!1,orderItemFromResponse:{}},e}return e=n,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchPageSetup,a=e.dispatchCloseModal,r=e.designIdParams,n=e.dispatchFetchDesign,i=e.dispatchSetDesign,e=e.orderItem;this.componentIsMounted=!0,t(),a(),n(r),i(r),this.setState({buttonContent:Object(b.b)(Ee.b,e.id)})}},{key:"componentWillUnmount",value:function(){this.componentIsMounted=!1,this.props.dispatchProductPageReset()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.designIdParams,r=t.dispatchFetchDesign,n=t.addToCartDesignId,i=t.dispatchSetDesign,o=t.dispatchProductPageReset,c=t.orderItem,s=t.userIsFetching,l=t.userPreferencesOverridden,u=t.dispatchFetchCurrentUser,d=t.country,m=t.currency,t=t.measurementSystem;this.updateStateFromOrderItem(e.orderItem),a!==e.designIdParams&&(o(),r(a)),n!==a&&i(a),c.id!==e.orderItem.id&&Object(Ce.i)(c.id)&&this.componentIsMounted&&this.setState({buttonContent:Object(b.b)(Ee.b,c.id)}),l&&!s&&u(d,m,t)}},{key:"changeAddToCartButtonContent",value:function(){var e=this,t=this.props.orderItem;this.setState({buttonContent:Object(b.b)(Ee.c,t.id),buttonContentIsAdded:!0}),setTimeout(function(){return e.componentIsMounted&&e.setState({buttonContent:Object(b.b)(Ee.b,t.id),buttonContentIsAdded:!1})},4e3)}},{key:"addToCartClick",value:function(e,t,a){var r=this.props.orderItem;return Object(Ce.r)(r)?this.addToCart(e,t,a):this.updateCartItem(a.chunkSize,t)}},{key:"applyRequestOverrides",value:function(e,t,a){switch(t.quantity=a.quantity||t.quantity,e){case Ee.g:case Ee.xc:t.fabric_size=a.productSize||t.fabric_size;break;case Ee.H:t.home_good_code=a.productSize||t.home_good_code}}},{key:"addToCart",value:function(e,t,a){var r=this.props,n=r.userId,i=r.country,o=r.measurementSystem,c=r.currency,s=r.locale,r=r.dispatchClearFlashMessage;return this.applyRequestOverrides(e,t,a),this.componentIsMounted&&this.changeAddToCartButtonContent(),r(),f.a.addToCart(e,t,n,i,o,c,s)}},{key:"updateCartItem",value:function(e,t){var a=this,r=this.props,n=r.dispatchClearFlashMessage,i=r.quantity,o=r.selectedSubstrate,c=r.productTypeAbbreviated,s=r.productSize,l=r.params,u=r.orderItem,d=r.userId,m=r.country,b=r.measurementSystem,p=r.currency,r=r.locale;return n(),f.a.updateCartItem(c,i,o,s,e,l,u,d,m,b,p,r,t).then(function(e){a.handleOrderItemResponse(e),me.d.replace(Object(be.d)(window.location.href,y({},pe.w,e.id)))}).then(me.d.push(ve.a.localePathname("cart")))}},{key:"handleOrderItemResponse",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.setState({orderItemFromResponse:e}),t&&Object(we.c)(dataLayer)&&dataLayer.push(Object(we.b)(e))}},{key:"updateStateFromOrderItem",value:function(e){var t=this.props,a=t.productTypeAbbreviated,r=t.orderItem,n=t.productSize,i=t.selectedSubstrate,o=t.queryParams,c=t.dispatchSetQuantity,s=t.dispatchSetProductSize,l=t.dispatchSetSubstrate;r.isFetching||(Object(Ce.r)(r)||!Object(Ce.r)(e)&&r.quantity.value===e.quantity.value||c(r.quantity.value),Object(Ce.i)(r.fabric)&&(t=r.fabric.size,c=r.fabric.code,a===Ee.H?(a=he()(r,"merchandise.home_good_item.home_good.code"),Object(Ce.i)(a)&&n!==a&&r.id!==e.id&&s(a)):Object(Ce.i)(t)&&n!==t&&r.id!==e.id&&s(t),Object(Ce.i)(c)&&i!==c&&Object(Ce.k)(o.fabric)&&l(c)))}},{key:"openFabricPreferencesModal",value:function(e){e.preventDefault(),this.props.dispatchOpenModal("fabric-shop"),Object(c.a)(this)}},{key:"render",value:function(){var e,a=this,t=this.props,r=t.route,n=t.params,i=t.country,o=t.measurementSystem,c=t.currency,s=t.userPreferencesOverridden,l=t.userId,u=t.userEmail,d=t.userType,m=t.viewport,b=t.designId,p=t.designName,f=t.userIsPrivateBuyer,g=t.designFileName,h=t.designerUserName,y=t.designerId,v=t.quantity,O=t.addToCartIsFetching,j=t.reviewSummary,w=t.dispatchSetProductSize,S=t.dispatchSetSubstrate,C=t.dispatchSetQuantity,I=t.taxRate,E=t.userIsFetching,T=t.queryParams,k=t.userAuthenticated,R=t.dispatchChunkSize,P=t.orderItem,N=t.productTypeAbbreviated,A=t.designThumbnailPartial,t=Object(Ce.r)(P)?this.state.orderItemFromResponse:P,t=!Object(Ce.r)(t)&&!!t.isFetching,F={params:n,country:i,measurementSystem:o,currency:c,userId:l,userEmail:u,userType:d,viewport:m,designId:b,designName:p,designThumbnailSimple:x.e.cipheredDesignThumbnail(b,A,x.b,Ee.g),userIsPrivateBuyer:f,designFileName:g,taxRate:I,designerUserName:h,designerId:y,quantity:v,addToCartIsFetching:O,userPreferencesOverridden:s,reviewSummary:j,buttonContent:this.state.buttonContent,buttonContentIsAdded:this.state.buttonContentIsAdded,userIsFetching:E,slideInModal:this.state.slideInModal,openFabricPreferencesModal:this.openFabricPreferencesModal,userAuthenticated:k,dispatchChunkSize:R,orderItemIsFetching:t,orderItem:P,productTypeAbbreviated:N,queryParams:T,setProductSize:function(e){return w(e)},setSubstrate:function(e){return S(e)},setQuantity:function(e){return C(e)},addToCartClick:function(e,t){return a.addToCartClick(N,e,t)},addSwatchToCartClick:function(e,t){return a.addToCartClick(Ee.g,e,t)}};if(Object(Ce.g)(b)||E)return ge.a.createElement(Te.a,{message:Object(ve.c)("common.loading")});switch(N){case Ee.g:e=D,F.fabricType=N;break;case Ee.xc:e=q,F.wallpaperType=N;break;case Ee.H:e=_,F.homeGoodType=r.productType}return ge.a.createElement("article",{itemScope:!0,itemType:"https://schema.org/Product"},ge.a.createElement(e,F))}}])&&v(e.prototype,t),a&&v(e,a),n}();C.propTypes={dispatchPageSetup:i.a.func.isRequired,dispatchFetchDesign:i.a.func.isRequired,dispatchClearFlashMessage:i.a.func.isRequired,dispatchCartOrders:i.a.func.isRequired,dispatchSetDesign:i.a.func.isRequired,dispatchSetProductSize:i.a.func.isRequired,dispatchSetSubstrate:i.a.func.isRequired,dispatchSetQuantity:i.a.func.isRequired,dispatchProductPageReset:i.a.func.isRequired,dispatchOpenModal:i.a.func.isRequired,dispatchCloseModal:i.a.func.isRequired,dispatchChunkSize:i.a.func.isRequired,dispatchFetchCurrentUser:i.a.func.isRequired,params:i.a.object.isRequired,taxRate:i.a.number,route:i.a.object.isRequired,country:i.a.string.isRequired,measurementSystem:i.a.string.isRequired,userPreferencesOverridden:i.a.bool.isRequired,userIsFetching:i.a.bool.isRequired,locale:i.a.string.isRequired,userId:i.a.number,userEmail:i.a.string,userType:i.a.oneOf([r.c,r.a,r.b]),viewport:i.a.string,currency:i.a.string.isRequired,designId:i.a.number,designIdParams:i.a.number,designName:i.a.string,designThumbnailPartial:i.a.string,selectedSubstrate:i.a.string,productSize:i.a.string,userIsPrivateBuyer:i.a.bool,userAuthenticated:i.a.bool,designFileName:i.a.string,designerUserName:i.a.string,productTypeAbbreviated:s.a.isRequired,designerId:i.a.number,pendingOrderId:i.a.number,savedOrderId:i.a.number,addToCartDesignId:i.a.number,quantity:i.a.number.isRequired,addToCartIsFetching:i.a.bool.isRequired,orderItem:i.a.object.isRequired,queryParams:i.a.shape({fabric:i.a.string,size:i.a.string,addition:i.a.string,currency:i.a.string,country:i.a.string,measurementSystem:i.a.string}),reviewSummary:i.a.oneOfType([i.a.array,i.a.object])};t.default=Object(ye.b)(function(e,t){var a=t.route.productType,r="";return[Ee.g,Ee.xc].includes(a)?r=a:a.startsWith(Ee.H)&&(r=Ee.H),h(h({},Object(Ie.i)(e)),{},{userAuthenticated:!!e.user.id,userIsFetching:e.user.isFetching,locale:t.params.pageLang,userId:e.user.id,userEmail:e.user.email,userType:e.user.userType,viewport:e.pageSetup.viewport,productTypeAbbreviated:r,taxRate:e.addToCart.tax_rate,queryParams:e.routing.locationBeforeTransitions.query,designId:e.design.id,designIdParams:parseInt(t.params.designId,10),designName:e.design.name,designThumbnailPartial:e.design.design_thumbnail,productSize:e.addToCart.productSize,selectedSubstrate:e.addToCart.selectedSubstrate,designFileName:e.design.filename,userIsPrivateBuyer:e.design.user_is_private_buyer,designerUserName:e.design.designer.screen_name,designerId:e.design.designer.id,addToCartDesignId:e.addToCart.designId,quantity:e.addToCart.quantity||Object(Ie.h)(e)||1,addToCartIsFetching:e.addToCart.isFetching,reviewSummary:e.reviews.summary,orderItem:Object(Ie.c)(e)})},function(r){return{dispatch:r,dispatchPageSetup:function(){r(Object(Oe.d)({contentInnerExtensions:"x-1294"}))},dispatchFetchDesign:function(e){return Object(Se.r)(r,e)},dispatchClearFlashMessage:function(){r(Object(o.a)())},dispatchCartOrders:function(e){return Object(Se.k)(r,e)},dispatchSetDesign:function(e){r(Object(je.i)(e))},dispatchSetProductSize:function(e){r(Object(je.j)(e))},dispatchSetSubstrate:function(e){r(Object(je.l)(e))},dispatchSetQuantity:function(e){r(Object(je.k)(e))},dispatchProductPageReset:function(){r(Object(Oe.f)())},dispatchOpenModal:function(e){r(Object(Oe.c)({modal:{displayModal:!0,modalName:e}}))},dispatchCloseModal:function(){r(Object(Oe.b)({modal:{displayModal:!1,modalName:""}}))},dispatchChunkSize:function(e){r(Object(je.h)(e))},dispatchFetchCurrentUser:function(e,t,a){e={preferences:{currency:t,measurement_system:a,country:e}};return Object(Se.p)(r,e)}}})(C)},853:function(e,t,a){"use strict";var r=a(0),F=a.n(r),n=a(1),r=a.n(n),n=a(9),x=a.n(n),D=a(2),n=a(850),_=a(39),q=a(8),M=a(258),z=a(60),U=a(44),G=a(20),L=a(50),W=a(15),H=a(260),B=a(852);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}a=function(e){function r(e){for(var t=e.target.parentNode;t&&t.firstChild!==t.lastChild;)t.removeChild(t.lastChild)}var t=e.fabricCode,a=e.name,n=e.pricePerUnit,i=e.description,o=e.details,c=e.collapsibleText,s=e.setSubstrateClick,l=e.buttonText,u=e.selectButtonText,d=e.isSelected,m=e.collapsibleOpen,b=e.displayFabricsModal,p=e.altTextFabricName,f=e.showPrice,g=e.hideSwiper,h=e.imageSource,y=e.imageWidth,v=e.imageHeight,O=e.buttonClass,j=e.descriptionLink,w=e.descriptionLinkTitle,S=e.descriptionLinkTwo,C=e.descriptionLinkTwoTitle,I=e.wrappedLinkText,E=e.viewport,T=e.measurementSystem,k=e.locale,R=e.hideButton,P=h||"".concat(U.d,"/").concat(t,".jpg"),N=["".concat(U.b,"/").concat(t,"_2.jpg"),"".concat(U.b,"/").concat(t,"_3.jpg"),"".concat(U.b,"/").concat(t,"_4.jpg")],A={__html:"<ul class='circle-list'>".concat(o,"</ul>")},e=x()("b-substrate-item","substrate-image-wrapper",{"x-selected":d,"x-fabrics-modal":b}),h=x()("btn",O),O=G.h[T],T=Object(q.i)(k)?{width:Object(_.d)(t,O,"printableWidth",k),weight:Object(_.d)(t,O,"weight",k)}:void 0,k=Object(q.i)(T)?Object(D.c)("fabricShop.SIZE.".concat(O),{width:T.width,weight:T.weight}):"",O=Object(q.i)(T)&&!Object(_.b)(T.width)&&!Object(_.b)(T.weight),T=function(e){return e=e,Object(M.g)(e),void r(e)};return F.a.createElement("li",V({"aria-label":"".concat(l," - ").concat(p),title:"".concat(l," - ").concat(p),className:e,itemScope:!0,itemType:"http://schema.org/Product"},Object(q.i)(s)?{onClick:function(){return s(t)},onKeyUp:function(e){e.key!==L.a&&"Space"!==e.key||s(t)},tabIndex:0,role:"button"}:{}),b||g?F.a.createElement("div",{className:"substrate-image-wrapper"},F.a.createElement("img",{className:"substrate-image",height:v||z.f,width:y||z.g,src:P,alt:p,onError:T,itemProp:"image"})):F.a.createElement(B.a,{viewport:E,parentComponent:"substrateItem",swiperParams:{lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},thumbs:{},pagination:{}}},F.a.createElement("img",{className:"substrate-image",height:v||z.f,width:y||z.g,src:P,alt:p,onError:T,itemProp:"image"}),N.map(function(e,t){var a=0!==t;return F.a.createElement("img",V({key:t,className:x()("substrate-image",{"swiper-lazy":a}),height:v||z.f,width:y||z.g},a?{"data-src":e}:{src:e,onError:r},{alt:p,itemProp:"image"}))})),F.a.createElement("div",{className:"substrate-description"},F.a.createElement("h3",{className:"h3 item-name",itemProp:"name"},a),!Object(q.g)(k)&&O&&F.a.createElement("p",{className:"fabric-size",itemProp:"width weight"},k),i&&F.a.createElement("p",{className:"description",itemProp:"description"},i),j&&F.a.createElement(W.a,{className:"description-link",hrefValue:j,title:w,contents:w}),I&&F.a.createElement("div",{className:"description-link"},I),S&&F.a.createElement(W.a,{className:"description-link",hrefValue:S,title:C,contents:C}),o&&F.a.createElement(H.a,{title:c,sizeClass:"x-trigger-small",collapsibleOpen:m,classname:"more-details",triggerType:"plus",content:F.a.createElement("div",{dangerouslySetInnerHTML:A}),isFabricInfo:!0}),F.a.createElement("div",{className:"price-select-wrapper"},f&&F.a.createElement("h3",{className:"h4 price-per-unit"},n),!R&&F.a.createElement("button",{type:"submit",className:h,onClick:function(){return s(t)},"aria-label":u,disabled:d},u))))};a.propTypes={fabricCode:r.a.string,viewport:n.a,name:r.a.oneOfType([r.a.string,r.a.array]).isRequired,altTextFabricName:r.a.string,isSelected:r.a.bool,pricePerUnit:r.a.string.isRequired,description:r.a.oneOfType([r.a.string.isRequired,r.a.object.isRequired]),details:r.a.string,setSubstrateClick:r.a.func,buttonText:r.a.string.isRequired,selectButtonText:r.a.string.isRequired,collapsibleText:r.a.string,collapsibleOpen:r.a.bool,displayFabricsModal:r.a.bool,showPrice:r.a.bool,hideSwiper:r.a.bool,imageSource:r.a.string,imageHeight:r.a.string,imageWidth:r.a.string,buttonClass:r.a.string,descriptionLink:r.a.string,descriptionLinkTitle:r.a.string,descriptionLinkTwo:r.a.string,descriptionLinkTwoTitle:r.a.string,isStandardFabricModal:r.a.bool,measurementSystem:r.a.string,locale:r.a.string,hideButton:r.a.bool,wrappedLinkText:r.a.string},t.a=a},855:function(e,t,a){"use strict";var r=a(0),i=a.n(r),r=a(1),a=a.n(r),r=function(e){var t=e.addToCartButtonClasses,a=e.addToCartButtonTitle,r=e.buttonContent,n=e.buttonIsDisabled,e=e.onClickFunction;return i.a.createElement("button",{type:"button",className:t,title:a,"aria-label":a,onClick:e,disabled:n},r)};r.propTypes={addToCartButtonClasses:a.a.string.isRequired,addToCartButtonTitle:a.a.string.isRequired,buttonContent:a.a.oneOfType([a.a.string,a.a.object]).isRequired,buttonIsDisabled:a.a.bool.isRequired,onClickFunction:a.a.func.isRequired},t.a=r},857:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var i=a(0),l=a.n(i),r=a(1),t=a.n(r),r=a(9),u=a.n(r),d=a(861),m=a(858);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=b(a);return e=r?(e=b(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==n(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,i["Component"]);var e,t,a,r=s(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.heading,a=e.imageUrl,r=e.imageAlt,n=e.infoText,i=e.moreInfo,o=e.imageClass,c=e.boxClass,s=e.isDesktop,e=e.hasNoRadius,c=u()("b-info-box",c),e=u()("info-avatar-wrapper",{"x-no-radius":e});return l.a.createElement(d.a,{heading:t,isDesktop:s},l.a.createElement("article",{className:c},s&&l.a.createElement("h3",{className:"h3"},t),a&&l.a.createElement(m.a,{altText:r,imgSrc:a,wrapperExtensionClass:e,imageExtensionClass:o}),(n||i)&&l.a.createElement("div",{className:"info-text-wrapper"},n,i)))}}])&&o(e.prototype,t),a&&o(e,a),n}();p.propTypes={heading:t.a.string,imageUrl:t.a.string,imageAlt:t.a.string,infoText:t.a.oneOfType([t.a.object,t.a.bool,t.a.string]),moreInfo:t.a.oneOfType([t.a.object,t.a.bool]),imageClass:t.a.string,boxClass:t.a.string,isDesktop:t.a.bool.isRequired,hasNoRadius:t.a.bool}},858:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(1),r=a.n(i),i=a(9),o=a.n(i),c=a(259),a=function(e){var t=e.altText,a=e.imgSrc,r=e.wrapperExtensionClass,e=e.imageExtensionClass,r=o()("b-avatar-image",r),e=o()("avatar-image",e);return n.a.createElement("div",{className:r},n.a.createElement("img",{height:c.a,width:c.a,alt:t,className:e,src:a}))};a.propTypes={altText:r.a.string,imgSrc:r.a.string.isRequired,wrapperExtensionClass:r.a.string,imageExtensionClass:r.a.string},t.a=a},859:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return l});var t=a(0),r=a.n(t),n=a(2),i=a(8),o=a(3),c=a(16);function s(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{iconName:"checkmark"}),e)}function l(e,t){var a=Object(n.c)("fabric.content.updated"),r=Object(n.c)("fabric.content.added");return e!==o.c?Object(i.i)(t)?Object(n.c)("fabric.content.updateCart"):Object(n.c)("fabric.content.addToCart"):Object(i.i)(t)?s(a):s(r)}},861:function(e,t,a){"use strict";var r=a(0),n=a.n(r),r=a(1),r=a.n(r),i=a(260),a=function(e){var t=e.children,a=e.heading,e=e.isDesktop;return e?t:n.a.createElement(i.a,{title:a,classname:"x-bottom-border",sizeClass:"x-trigger-large",subtitleTextClass:"h3 x-flush-left",collapsibleOpen:!1,triggerType:e?"plus":"chevron",content:t})};a.propTypes={children:r.a.object.isRequired,heading:r.a.string.isRequired,isDesktop:r.a.bool.isRequired},t.a=a},866:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return u});var r=a(105),n=a(2),i=a(8),o=a(259),c=a(30),s=function(e){var t=Object(r.a)(e);return{capitalizedTag:t,documentTitle:Object(n.c)("tags.head.title",{tag:t}),metaDescription:Object(n.c)("tags.head.meta.description",{tag:e}),metaKeywords:Object(n.c)("tags.head.meta.keywords",{tag:e}),ogTitle:Object(n.c)("tags.head.meta.og.title",{tag:e}),ogDescription:Object(n.c)("tags.head.meta.og.description",{tag:e})}},l=function(e,t,a){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:o.m,e=e&&e.map(function(e){return"".concat(e.name)}),e=Object(i.i)(e)?e.toString().replace(/,/g,", "):"",r=Object(i.i)(t)?u(t,r):e;return a===c.b?r:e},u=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.j,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:" ";return e.length<=t?e:e.substr(0,e.lastIndexOf(a,t))}},867:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"c",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"b",function(){return u});var r=a(60),n=a(3),i=a(69),o=function(e,t,a){return 0<e.filter(function(e){return t[e]!==a[e]}).length},c=function(e){return e&&r.G.includes(e)},s=function(e){return e===r.r[n.g]},l=function(e){return e===r.r[n.xc]},u=function(e){return e===i.a}},868:function(e,t,a){"use strict";var r=a(0),l=a.n(r),n=a(1),r=a.n(n),n=a(9),u=a.n(n),d=a(2),m=a(66),b=a(64),p=a(7),f=a(15);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a=function(e){function r(e){return c?e:e.slug}var t=e.tagNames,a=e.tags,n=e.orderItemId,i=e.isBlocked,o=e.simpleTags,c=void 0!==o&&o,e=e.classicTags,s=void 0===e||e,i=u()("b-tags-list",{"x-blocked":i});return l.a.createElement("div",{className:i,"aria-label":t,title:t},a.map(function(e,t){return l.a.createElement("h2",{key:t,className:"description",itemProp:"category"},l.a.createElement(f.a,{className:"tag-link",hrefValue:s?(a=e,Object(b.d)(Object(d.c)("tags.main.tagSlug",{tagSlug:r(a)}),g({},p.w,n))):(t=e,Object(b.d)(d.a.localePathname("shop.collections"),Object.assign({},(g(a={},p.H,r(t)),g(a,p.f,m.d),g(a,p.J,p.mb),g(a,p.w,n),a)))),contents:(e=e,c?e:e.name),target:"_self"}));var a}))};a.propTypes={tagNames:r.a.array.isRequired,tags:r.a.array.isRequired,orderItemId:r.a.number,isBlocked:r.a.bool,simpleTags:r.a.bool,classicTags:r.a.bool},t.a=a},870:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return n});var r=function t(a){return function(e){0<a&&(e(),t(a-1)(e))}};function n(e,a){return e.reduce(function(e,t){return e+(t===a)},0)}},871:function(e,t,a){"use strict";a.d(t,"f",function(){return r}),a.d(t,"j",function(){return n}),a.d(t,"g",function(){return i}),a.d(t,"k",function(){return o}),a.d(t,"l",function(){return c}),a.d(t,"q",function(){return s}),a.d(t,"p",function(){return l}),a.d(t,"c",function(){return u}),a.d(t,"m",function(){return d}),a.d(t,"o",function(){return m}),a.d(t,"d",function(){return b}),a.d(t,"b",function(){return p}),a.d(t,"n",function(){return f}),a.d(t,"e",function(){return g}),a.d(t,"i",function(){return h}),a.d(t,"a",function(){return y}),a.d(t,"h",function(){return v});var r="How would you rate the material?",n="How would you rate the print?",i="What material did you receive?",o="What did you make?",c="Would you recommend this item to others?",s="voteup",l="votedown",u=0,d=1,m=2,b=3,p=4,f="stars",g="material",h="print",y="140",v=5},872:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"g",function(){return u}),a.d(t,"h",function(){return d}),a.d(t,"k",function(){return m}),a.d(t,"j",function(){return b}),a.d(t,"f",function(){return p}),a.d(t,"i",function(){return f});var t=a(14),r=a.n(t),t=a(2),n=a(30),i="RANGE",o="ARRIVAL_DATE",c="SHIP_DATE",s="GUARANTEE",l="RUSH",u={STANDARD:"Standard",GUARANTEE:"Guaranteed",RUSH:"Rush"},d={STANDARD:Object(t.c)("checkout.delivery.deliveryStandard"),GUARANTEE:Object(t.c)("checkout.delivery.deliveryGuaranteed"),RUSH:Object(t.c)("checkout.delivery.deliveryRush")},m=function(e){return e===n.a?"https://support.spoonflower.com/hc/de/articles/204444710":"https://support.spoonflower.com/hc/en-us/articles/204444710-What-are-your-shipping-options"},b=function(e){return r.a.translate("xurls.about.".concat(e===n.a?"returnsAndExchangesDe":"returnsAndExchanges"))},p=["homeTextilesDeliveryInfo","homeTextilesArrivalTimeInfo","homeTextilesSplittingInfo"],f=["GUARANTEE","RUSH"]},873:function(e,t,a){"use strict";var r=a(0),b=a.n(r),n=a(1),r=a.n(n),n=a(9),p=a.n(n),f=a(258),a=function(e){function t(e,t,a){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return b.a.createElement("img",{height:n,width:n,alt:t,className:"thumbnail-image",src:r?a:f.e.designImageUrl(e,a).thumbnail})}var n=e.size,a=e.firstDesignId,r=e.secondDesignId,i=e.firstDesignName,o=e.secondDesignName,c=e.firstDesignFileName,s=e.secondDesignFileName,l=e.thumbnailExtensionClass,u=e.stackedImagesExtensionClass,d=e.firstDesignEnciphered,m=e.secondDesignEnciphered,e=p()("b-stacked-images",u),u=p()("design-thumbnail",l,{"x-shadow":r}),l=p()("stacked-thumbnail",l);return b.a.createElement("section",{className:e},b.a.createElement("figure",{className:u},t(a,i,c,d)),s&&b.a.createElement("figure",{className:l},t(r,o,s,m)))};a.propTypes={size:r.a.string,firstDesignId:r.a.number,secondDesignId:r.a.number,firstDesignName:r.a.string,secondDesignName:r.a.string,firstDesignFileName:r.a.string,secondDesignFileName:r.a.string,firstDesignEnciphered:r.a.bool,secondDesignEnciphered:r.a.bool,thumbnailExtensionClass:r.a.string,stackedImagesExtensionClass:r.a.string},t.a=a},875:function(e,t,a){"use strict";var r=a(0),u=a.n(r),n=a(1),r=a.n(n),i=a(26),o=a(37),c=a(8),s=a(849),l=a(259),d=a(2),n=a(9),m=a.n(n),b=a(16),a=function(e){function t(){return u.a.createElement("span",{className:"favorite-amount"},r)}var a=e.isFavorite,r=e.favoriteCount,n=e.favoriteDesign,i=e.parentName,o="shop"===i,c="productForm"===i,s=m()("b-favorite-design",{"x-fabric-page-favorite-design":c,"x-shop-page-favorite-design":o}),l=m()("btn","favorite-btn",{favorited:a,unfavorited:!a}),e=a?Object(d.c)("designs.favoriteDesignButton.deleting"):Object(d.c)("designs.favoriteDesignButton.adding"),i=0<r;return u.a.createElement("div",{className:s},i&&c&&t(),u.a.createElement("button",{type:"button",className:l,"aria-pressed":a,onClick:n},u.a.createElement(b.a,{iconName:"heart",iconTitle:e})),i&&o&&t())};a.propTypes={isFavorite:r.a.bool,favoriteCount:r.a.number,favoriteDesign:r.a.func,parentName:r.a.string};var p=a,a=function(e){var t=e.parentName,a=e.designId,e=Object(i.e)(function(e){var t=Object(c.i)(e.user.favorites)?e.user.favorites:{};return{isFavorite:(Object(c.i)(t.design_ids)?t.design_ids:[]).includes(a),favoriteCount:Object(s.b)(e,a)}},i.c),r=e.isFavorite,e=e.favoriteCount,n=Object(i.d)();return u.a.createElement(p,{isFavorite:r,favoriteCount:e,favoriteDesign:function(){var e,t=!1===r?l.o:l.n;e=a,t=t,Object(o.u)(n,e,t)},parentName:t})};a.propTypes={designId:r.a.number.isRequired,parentName:r.a.string};t.a=a},876:function(e,t,a){"use strict";var r=a(0),z=a.n(r),n=a(1),r=a.n(n),n=a(14),U=a.n(n),n=a(9),G=a.n(n),L=a(2),W=a(64),H=a(258),B=a(8),V=a(30),Q=a(60),$=a(69),K=a(3),Y=a(27),Z=a(43),J=a(7),X=a(875),ee=a(880),te=a(868),ae=a(15),re=a(16);function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a=function(e){function l(e){return Object(W.d)("".concat(L.a.localePathname("shop.search"),"?").concat(e,"&availability=ForSale&sort=bestSelling"))}function t(e){var t=Object(L.c)("tags.main.chooseDesign"),a=ne({},J.w,v),r=ne({},J.I,h),n=ne({},J.o,k),i="";switch(C){case K.xc:i="wallpaper.page";break;case K.g:i="fabric.page";break;case K.H:i=S;break;default:i=""}var o,c,s=Object(B.g)(i)?void 0:Object(W.d)("".concat(L.a.localePathname(i),"/").concat(y||p),Object.assign({},n,a,r));switch(g){case J.ub:o=s;break;case J.tb:case J.sb:o="";break;default:o=s}return!Object(B.g)(o)&&(!f||f&&g)?c=z.a.createElement(ae.a,{hrefValue:o,contents:e,title:t,className:"design-link"}):Object(B.i)(s)&&(!Q.a||Object(B.i)(O)&&(!f||f&&g)||R)?c=z.a.createElement(ae.a,{hrefValue:s,contents:e,title:t,className:"design-link"}):(!f||f&&g)&&!R?c=z.a.createElement("button",{type:"button",onClick:function(){return j(p,d,u,y,w)}},e):f&&T&&N?c=z.a.createElement(ae.a,{hrefValue:l(T),contents:e,title:b,className:"design-link"}):f&&Object(B.i)(m)&&N&&(t=b||Object(L.c)("collections.links.designAlsoIn"),c=z.a.createElement(ae.a,{hrefValue:Object($.d)(m),contents:e,title:t,className:"design-link"})),c}var u=e.tags,a=e.userName,r=e.imageUrl,d=e.designTitle,m=e.collectionSlug,b=e.collectionName,n=e.isCondensed,p=e.designId,i=e.userId,o=e.userType,f=e.isCrossSell,c=e.locale,g=e.substrateQuery,h=e.sizeQuery,y=e.slug,v=e.orderItemId,O=e.fabricCookieCode,j=e.openModal,w=e.favoriteCount,S=e.productType,C=e.productTypeAbbreviated,s=e.productName,I=e.pushProductClickToGTM,E=e.index,T=e.searchParams,k=e.fabricQuery,R=e.isCollectionPage,P=e.reloadCollection,N=C===K.i,A=!Object(B.g)(u),F=A?u.map(function(e){return e&&e.toLowerCase()}):[],x=A?u.map(function(e){return e&&{name:e.charAt(0).toUpperCase()+e.slice(1),slug:e.replace(Z.i,"").replace(Z.h,"-").toLowerCase()}}):[],D=F.toString(),_=c===V.b,q=G()("b-design-item",{"x-shadowed":!f,"x-condensed":n&&!N,"x-large-cross-sell":N}),M=Object(Y.e)(o),e=f?"isRelatedTo":"itemOffered",c=z.a.createElement("img",{className:"item-pic",src:r,alt:!Object(B.g)(F)&&F||d,"aria-label":d,itemProp:"image",onError:H.g,height:"294",width:"294"}),o=Q.M.includes(s);return z.a.createElement("div",{className:q,itemProp:e,itemScope:!0,itemType:"https://schema.org/Product",onClick:I&&function(){return I(p,a,E)}},t(c),z.a.createElement("div",{className:"design-item-text"},s&&z.a.createElement("em",{className:"design-item-product-name",itemProp:"category material"},o?Object(L.c)("navigation.".concat(s,".longText")):Object(L.c)("navigation.".concat(s,".text"))),_&&!n&&t(z.a.createElement("span",{itemProp:"name"},d)),!_&&d&&z.a.createElement("span",{className:"visuallyhidden",itemProp:"name"},d),p&&z.a.createElement("span",{className:"visuallyhidden",itemProp:"productID"},p),!_&&!n&&A&&z.a.createElement(z.a.Fragment,null,z.a.createElement(te.a,{tagNames:F,tags:x}),!Object(B.g)(D)&&z.a.createElement("span",{className:"visuallyhidden",itemProp:"description"},D)),Object(B.k)(m)?z.a.createElement("p",{className:"item-author-wrapper"},Object(L.c)("tags.main.authorBy"),z.a.createElement(ae.a,{className:"item-author",itemProp:"brand",hrefValue:U.a.translate("xurls.userProfile",{userName:a}),title:Object(L.c)("tags.main.authorLinkTitle",{userName:a}),contents:a})):z.a.createElement(ae.a,{className:"item-in-collection-link",hrefValue:T?l(T):Object($.d)(Object($.c)(m),!0),title:b?Object(L.c)("collections.links.collectionTilesTitle",{collectionName:b}):Object(L.c)("collections.userCollections.linkIconTitle"),target:"_blank",contents:z.a.createElement(z.a.Fragment,null,z.a.createElement(re.a,{iconName:"collection-in"}),z.a.createElement("span",null,b||Object(L.c)("collections.links.designAlsoIn")))}),M&&!n&&p&&z.a.createElement("div",{className:"quick-add"},z.a.createElement(X.a,{designId:p}),z.a.createElement(ee.a,{designTitle:d,designerUserName:a,designId:p,imageUrl:r,tags:u,userId:i,reloadCollection:P}))),!n&&(y||p)&&z.a.createElement(ae.a,{className:"all-products-link",hrefValue:"".concat(L.a.localePathname("all_products"),"/").concat(y||p),contents:Object(L.c)("designs.productsOverview.seeAllProducts")}))};a.propTypes={productTypeAbbreviated:r.a.string.isRequired,productType:r.a.string,locale:r.a.string.isRequired,tags:r.a.array,designId:r.a.number,orderItemId:r.a.string,designTitle:r.a.string,slug:r.a.string,userName:r.a.string,imageUrl:r.a.string.isRequired,collectionSlug:r.a.string,collectionName:r.a.string,substrateQuery:r.a.string,sizeQuery:r.a.string,isCondensed:r.a.bool,fabricCookieCode:r.a.string,openModal:r.a.func,userId:r.a.number,userType:r.a.oneOf([Y.c,Y.a,Y.b]),favoriteCount:r.a.number,isCrossSell:r.a.bool,productName:r.a.string,pushProductClickToGTM:r.a.func,index:r.a.number,fabricQuery:r.a.string,searchParams:r.a.string,isCollectionPage:r.a.bool,reloadCollection:r.a.func},t.a=a},878:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var t=a(0),r=a.n(t),n=a(870),i=a(16),o=function(e){var t=[];for(Object(n.b)(e)(function(){t.push(r.a.createElement("li",{key:t.length,className:"star-list-item"},r.a.createElement(i.a,{iconName:"star-full"})))});t.length<5;)t.push(r.a.createElement("li",{key:t.length,className:"star-list-item"},r.a.createElement(i.a,{iconName:"star-empty"})));return t}},879:function(e,t,a){"use strict";var r=a(8),n=a(2),a=Object(r.c)(function(){return{material_received:[function(e){return Object(r.s)(e,Object(n.c)("reviews.reviewsForm.validateMaterial"))}],text:[function(e){return Object(r.s)(e,Object(n.c)("reviews.reviewsForm.validateReviewText"))}]}});t.a=a},880:function(e,t,a){"use strict";var T=a(0),k=a.n(T),R=a(26),r=a(1),n=a.n(r),P=a(8),N=a(264),A=a(37),F=a(30),x=a(27),C=a(2),I=a(866),E=a(21),D=a(69),_=a(61),r=function(e){var t=e.buttonPrimaryText,a=e.buttonPrimaryTitle,r=e.buttonSecondaryText,n=e.buttonSecondaryTitle,i=e.primaryOnClick,e=e.secondaryOnClick;return k.a.createElement("div",{className:"b-modal-button-group"},k.a.createElement("button",{type:"button",className:"btn blue-button big-button","aria-label":a,title:a,onClick:i},t),k.a.createElement("button",{type:"button",className:"btn grey-button big-button","aria-label":n,title:n,onClick:e},r))};r.propTypes={buttonPrimaryTitle:n.a.string,buttonPrimaryText:n.a.string,buttonSecondaryTitle:n.a.string,buttonSecondaryText:n.a.string,primaryOnClick:n.a.func,secondaryOnClick:n.a.func};var w=r,h=a(16),d=a(15);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}r=function(e){var t=e.collectionId,r=e.collectionDesignIds,a=e.collectionTitle,n=e.collectionUrl,i=e.isPublic,o=e.designId,c=e.addOrRemoveDesign,s=m(Object(T.useState)(!1),2),e=s[0],l=s[1];Object(T.useEffect)(function(){l(function(e){if(Object(P.i)(r)){var t,a=function(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=b(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,n=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw n}}}}(r);try{for(a.s();!(t=a.n()).done;)if(t.value===e)return!0}catch(e){a.e(e)}finally{a.f()}}return!1}(o))},[r]);var s=e?"check":"add",u=e,e="add"==s?Object(C.c)("collections.userCollections.addTo"):Object(C.c)("collections.userCollections.removeFrom");return k.a.createElement("li",{key:t,className:"user-collections-list-item"},k.a.createElement("span",{className:"collection-name"},a),!i&&k.a.createElement(h.a,{iconName:"lock",iconTitle:Object(C.c)("collections.userCollections.privateIconTitle")}),k.a.createElement(d.a,{hrefValue:n,className:"link-to-collection",target:"_blank",contents:k.a.createElement(h.a,{iconName:"view-eye",iconTitle:Object(C.c)("collections.userCollections.linkIconTitle")})}),k.a.createElement("button",{type:"button",className:"collections-list-item-button ".concat(s,"-button"),onClick:function(){c(t,o,u)},"aria-label":Object(C.c)("collections.userCollections.titleButton",{yamlCopy:e}),title:Object(C.c)("collections.userCollections.titleButton",{yamlCopy:e})},k.a.createElement(h.a,{iconName:s,iconTitle:Object(C.c)("collections.userCollections.titleIcon",{yamlCopy:e})})))};r.propTypes={collectionId:n.a.number,collectionTitle:n.a.string,collectionUrl:n.a.string,isPublic:n.a.bool,collectionDesignIds:n.a.array,designId:n.a.number,addOrRemoveDesign:n.a.func};var u=r,r=function(e){var t=e.listTitle,a=e.userCollectionsResults,r=e.designId,n=e.addOrRemoveDesign,i=e.closeModal,o=e.buttonTitleCreateNew,c=e.buttonTextCreateNew,s=e.buttonDone,l=e.showCreateCollectionForm,a=e.isAlphaOrder?a.sort(function(e,t){return e.name.localeCompare(t.name)}):a;return k.a.createElement(k.a.Fragment,null,k.a.createElement("section",{className:"b-user-collections-list"},k.a.createElement("h3",{className:"h3"},t),k.a.createElement("ul",{className:"user-collections-list"},a.map(function(e){return k.a.createElement(u,{key:e.id,collectionId:e.id,collectionTitle:e.name,collectionUrl:Object(D.d)(e.slug),isPublic:e.show_collection,collectionDesignIds:e.design_ids,designId:r,addOrRemoveDesign:n})}))),o&&k.a.createElement(w,{buttonPrimaryTitle:o,buttonPrimaryText:c,buttonSecondaryTitle:s,buttonSecondaryText:s,primaryOnClick:l,secondaryOnClick:i}))};r.propTypes={listTitle:n.a.string.isRequired,userCollectionsResults:n.a.array.isRequired,designId:n.a.number.isRequired,addOrRemoveDesign:n.a.func.isRequired,closeModal:n.a.func,buttonTitleCreateNew:n.a.string,buttonTextCreateNew:n.a.string,buttonDone:n.a.string,showCreateCollectionForm:n.a.func,isAlphaOrder:n.a.bool};var q=r;function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}r=function(e){var t=e.isSearching,a=e.userIsSearching,r=e.designId,n=e.addOrRemoveDesign,i=e.closeModal,o=e.buttonTitleCreateNew,c=e.buttonTextCreateNew,s=e.buttonDone,l=e.showCreateCollectionForm,u=e.userCollectionsResults,d=Object(T.useRef)(""),m=y(Object(T.useState)(""),2),b=m[0],p=m[1],e=y(Object(T.useState)([]),2),m=e[0],f=e[1],g=function(t){var a=[];u.find(function(e){e.name.toLowerCase().includes(t.toLowerCase())&&a.push(e)}),f(a)};return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"b-form x-search-collections-wrapper"},k.a.createElement("input",{id:"x-search-collections-wrapper-input",type:"text",autoComplete:"off",placeholder:Object(C.c)("collections.userCollections.queryPlaceholder"),defaultValue:b,onKeyUp:function(e){e=(e=e).currentTarget.value,a(e),g(e),p(e)},ref:d,className:"text x-search-input"}),k.a.createElement(h.a,{iconName:"search",iconTitle:Object(C.c)("collections.userCollections.searchIconTitle")})),m&&t&&k.a.createElement(q,{listTitle:Object(C.c)("collections.userCollections.listTitleSearchResults"),userCollectionsResults:m,isAlphaOrder:!0,designId:r,addOrRemoveDesign:n,buttonTitleCreateNew:o,buttonTextCreateNew:c,buttonDone:s,showCreateCollectionForm:l,closeModal:i}))};r.propTypes={userCollectionsResults:n.a.array,designId:n.a.number.isRequired,addOrRemoveDesign:n.a.func,userIsSearching:n.a.func,isSearching:n.a.bool,closeModal:n.a.func,buttonTitleCreateNew:n.a.string,buttonTextCreateNew:n.a.string,buttonDone:n.a.string,showCreateCollectionForm:n.a.func.isRequired};var M=r,r=a(9),S=a.n(r);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}r=function(e){var t=e.createCollectionWrapperClass,a=e.inputNamePlaceholder,r=e.inputDescriptionPlaceholder,n=e.nameLabel,i=e.descriptionLabel,o=e.createCollectionClick,c=e.buttonTitleCreate,s=e.buttonTextCreate,l=e.buttonTitleCancel,u=e.buttonTextCancel,d=e.designId,m=e.userId,b=e.checkboxLabelText,p=e.clearSearch,f=e.hideCreateCollectionForm,e=z(Object(T.useState)(""),2),g=e[0],h=e[1],e=z(Object(T.useState)(""),2),y=e[0],v=e[1],e=z(Object(T.useState)("false"),2),O=e[0],j=e[1],t=S()("b-form",t);return k.a.createElement("div",{className:t},k.a.createElement("div",{className:"x-create-collection-text-input-wrapper"},k.a.createElement("label",{htmlFor:"create-collection-name-input",className:"x-create-creation-label"},n),k.a.createElement("input",{id:"create-collection-name-input",type:"text",autoComplete:"off",autoFocus:"autofocus",placeholder:a,onChange:function(e){h(e.target.value)},className:"text x-create-collection-input"})),k.a.createElement("div",{className:"x-create-collection-text-input-wrapper"},k.a.createElement("label",{htmlFor:"create-collection-description-textarea",className:"x-create-creation-label"},i),k.a.createElement("textarea",{id:"create-collection-description-textarea",placeholder:r,onChange:function(e){v(e.target.value)},className:"textarea x-create-collection-textarea"})),k.a.createElement("div",{className:"checkbox x-create-collection-checkbox"},k.a.createElement("input",{name:"show-collection",id:"create-collection-show-collection",type:"checkbox",className:"checkbox",onChange:function(e){j(e.target.checked.toString())}}),k.a.createElement("label",{htmlFor:"create-collection-show-collection",className:"label"},b)),k.a.createElement(w,{buttonPrimaryTitle:c,buttonPrimaryText:s,buttonSecondaryTitle:l,buttonSecondaryText:u,primaryOnClick:function(){o(m,d,g,y,O),p()},secondaryOnClick:f}))};r.propTypes={inputNamePlaceholder:n.a.string.isRequired,inputDescriptionPlaceholder:n.a.string.isRequired,nameLabel:n.a.string.isRequired,descriptionLabel:n.a.string.isRequired,createCollectionWrapperClass:n.a.string.isRequired,createCollectionClick:n.a.func.isRequired,checkboxLabelText:n.a.string.isRequired,buttonTitleCreate:n.a.string.isRequired,buttonTextCreate:n.a.string.isRequired,buttonTitleCancel:n.a.string.isRequired,buttonTextCancel:n.a.string.isRequired,userId:n.a.number.isRequired,designId:n.a.number.isRequired,clearSearch:n.a.func,hideCreateCollectionForm:n.a.func.isRequired};var U=r;function G(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}r=function(e){var t,r,a=e.userId,n=e.designId,i=e.imageUrl,o=e.designTitle,c=e.designerUserName,s=e.locale,l=e.tags,u=e.designInCollectionCount,d=e.createCollectionClick,m=e.recentUserCollectionsResults,b=e.userCollectionsResults,p=e.addOrRemoveDesign,f=e.userIsSearching,g=e.isSearching,h=e.showCreateCollections,y=e.closeModal,v=e.showCreateCollectionForm,O=e.hideCreateCollectionForm,j=e.clearSearch,w=e.viewport,S=e.designsInCollections,l=Object(P.i)(l)?l:[],s=Object(I.b)(l,o,s),w=Object(E.p)(w);return k.a.createElement(_.a,null,k.a.createElement("article",{className:"b-add-to-collections"},k.a.createElement("section",{className:"design-wrapper"},k.a.createElement("figure",{className:"design-figure"},k.a.createElement("img",{className:"design-image",src:i,alt:"".concat(o," ").concat(Object(C.c)("fabric.content.by")," ").concat(c),height:D.g,width:D.g}),!w&&k.a.createElement("figcaption",{className:"design-name"},s)),!w&&0<=u&&k.a.createElement("p",{className:"collection-count"},Object(C.c)("collections.userCollections.countText",{designInCollectionCount:u}))),h&&k.a.createElement("section",{className:"user-collections-wrapper"},k.a.createElement("h3",{className:"h2"},Object(C.c)("collections.userCollections.sectionTitleCreate")),k.a.createElement(U,{createCollectionWrapperClass:"x-create-collection-wrapper",inputNamePlaceholder:Object(C.c)("collections.userCollections.namePlaceholder"),inputDescriptionPlaceholder:Object(C.c)("collections.userCollections.descriptionPlaceholder"),nameLabel:Object(C.c)("collections.userCollections.nameLabel"),descriptionLabel:Object(C.c)("collections.userCollections.descriptionLabel"),createCollectionClick:d,checkboxLabelText:Object(C.c)("collections.userCollections.checkboxLabelText"),buttonTitleCreate:Object(C.c)("collections.userCollections.buttonTitleCreate"),buttonTextCreate:Object(C.c)("collections.userCollections.buttonTextCreate"),buttonTitleCancel:Object(C.c)("common.forms.cancel"),buttonTextCancel:Object(C.c)("common.forms.cancel"),designId:n,userId:a,clearSearch:j,hideCreateCollectionForm:O})),!h&&k.a.createElement("section",{className:"user-collections-wrapper"},k.a.createElement("h3",{className:"h2"},Object(C.c)("collections.userCollections.sectionTitleAdd")),k.a.createElement(M,{userCollectionsResults:b,userIsSearching:f,isSearching:g,designId:n,addOrRemoveDesign:p,closeModal:y,buttonTitleCreateNew:Object(C.c)("collections.userCollections.buttonTitleCreateNew"),buttonTextCreateNew:Object(C.c)("collections.userCollections.buttonTextCreateNew"),buttonDone:Object(C.c)("collections.userCollections.buttonDone"),showCreateCollectionForm:v}),m&&!g&&k.a.createElement(q,{listTitle:Object(C.c)("collections.userCollections.listTitleRecent"),userCollectionsResults:m,isAlphaOrder:!1,designId:n,addOrRemoveDesign:p}),S&&!g&&k.a.createElement(q,{listTitle:Object(C.c)("collections.userCollections.listTitleAlreadyIn"),userCollectionsResults:S,isAlphaOrder:!1,designId:n,addOrRemoveDesign:p}),b&&!g&&k.a.createElement(q,{listTitle:Object(C.c)("collections.userCollections.listTitleAllOthers"),userCollectionsResults:(t=m.concat(S),r=G(b),t.forEach(function(a){r.forEach(function(e,t){a.id===e.id&&r.splice(t,1)})}),r),isAlphaOrder:!0,designId:n,addOrRemoveDesign:p,closeModal:y,buttonTitleCreateNew:Object(C.c)("collections.userCollections.buttonTitleCreateNew"),buttonTextCreateNew:Object(C.c)("collections.userCollections.buttonTextCreateNew"),buttonDone:Object(C.c)("collections.userCollections.buttonDone"),showCreateCollectionForm:v}))))};r.propTypes={userId:n.a.number.isRequired,designId:n.a.number.isRequired,designTitle:n.a.string.isRequired,designerUserName:n.a.string.isRequired,imageUrl:n.a.string,locale:n.a.string.isRequired,tags:n.a.array,designInCollectionCount:n.a.number,recentUserCollectionsResults:n.a.array,userCollectionsResults:n.a.array,designsInCollections:n.a.array,addOrRemoveDesign:n.a.func,userIsSearching:n.a.func,isSearching:n.a.bool,showCreateCollections:n.a.bool.isRequired,createCollectionClick:n.a.func.isRequired,closeModal:n.a.func.isRequired,showCreateCollectionForm:n.a.func.isRequired,hideCreateCollectionForm:n.a.func.isRequired,clearSearch:n.a.func,viewport:n.a.string.isRequired};var L=r,r=function(e){var t=e.designId,a=e.openModal,r=e.clearSearch,e=e.designInCollection,e=S()("btn","collection-btn",{collected:e});return k.a.createElement("button",{type:"button",className:e,"aria-label":Object(C.c)("collections.userCollections.addToButton"),title:Object(C.c)("collections.userCollections.addToButton"),onClick:function(){a(t),r()}},k.a.createElement(h.a,{iconName:"collection-add"}))};r.propTypes={designId:n.a.number.isRequired,openModal:n.a.func,clearSearch:n.a.func,designInCollection:n.a.bool};var W=r,H=a(262);function B(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,n=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw n}}}}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a=function(e){var o=e.designId,t=e.designTitle,a=e.designerUserName,r=e.tags,n=e.imageUrl,i=e.reloadCollection,c=V(Object(T.useState)(!1),2),s=c[0],l=c[1],u=V(Object(T.useState)(!1),2),d=u[0],m=u[1],b=V(Object(T.useState)(!1),2),p=b[0],f=b[1],g=Object(R.e)(function(e){return{userType:e.user.userType,userId:e.user.id,locale:e.user.preferences.locale||F.b,displayModal:e.pageSetup.modal.displayModal,modalName:e.pageSetup.modal.modalName,userCollections:e.userCollections,viewport:e.pageSetup.viewport}},R.c),h=g.userType,y=g.userId,e=g.displayModal,c=g.modalName,v=g.userCollections,u=g.viewport,b=g.locale,O=Object(R.d)(),g=Object(N.a)(O),j=Object(N.b)(O),w=Object(P.f)(v)?v:v.collections||[],S=Object(x.e)(h);Object(T.useEffect)(function(){var e;S&&!v&&(e=y,Object(A.M)(O,e))},[]);function C(){var e=0,t=B(w);try{for(t.s();!(a=t.n()).done;){var a=a.value.design_ids;if(Object(P.i)(a)){var r,n=B(a);try{for(n.s();!(r=n.n()).done;)r.value===o&&e++}catch(e){n.e(e)}finally{n.f()}}}}catch(e){t.e(e)}finally{t.f()}return e}function I(){var e=Object(P.g)(v);f(e)}function E(){m(!1)}return S&&k.a.createElement(k.a.Fragment,null,e&&c==="addToCollections_".concat(o)&&k.a.createElement(H.a,{slideInModal:s,modalWithButton:!0,clearSearch:E,contents:k.a.createElement(L,{closeModal:g,designId:o,designTitle:t,designerUserName:a,imageUrl:n,tags:r,locale:b,recentUserCollectionsResults:w.sort(function(e,t){return t.last_design_added_at-e.last_design_added_at}).slice(0,2).sort(function(e,t){return e.name.localeCompare(t.name)}),designsInCollections:function(){var e=[],t=B(w);try{for(t.s();!(r=t.n()).done;){var a=r.value,r=a.design_ids;if(Object(P.i)(r)){var n,i=B(r);try{for(i.s();!(n=i.n()).done;)n.value===o&&e.push(a)}catch(e){i.e(e)}finally{i.f()}}}}catch(e){t.e(e)}finally{t.f()}return e}(),userCollectionsResults:w,designInCollectionCount:C(),userId:y,addOrRemoveDesign:function(e,t,a){e=e,t=t,a=a,Object(A.a)(O,e,t,a),m(!1),i&&i()},userIsSearching:function(e){m(""!==e)},isSearching:d,showCreateCollections:p,createCollectionClick:function(e,t,a,r,n){e=e,t=t,a=a,r=r,n=n,Object(A.e)(O,e,t,a,r,n),f(!1)},showCreateCollectionForm:function(){f(!0)},hideCreateCollectionForm:function(){f(!1)},clearSearch:E,viewport:u})}),k.a.createElement(W,{designId:o,openModal:function(e){I(),C(),j("addToCollections_".concat(e)),l(!0)},clearSearch:E,designInCollection:function(){var t=B(w);try{for(t.s();!(e=t.n()).done;){var e=e.value.design_ids;if(Object(P.i)(e)){var a,r=B(e);try{for(r.s();!(a=r.n()).done;)if(a.value===o)return!0}catch(e){r.e(e)}finally{r.f()}}}}catch(e){t.e(e)}finally{t.f()}}()}))};a.propTypes={designTitle:n.a.string.isRequired,designerUserName:n.a.string.isRequired,designId:n.a.number.isRequired,imageUrl:n.a.string.isRequired,tags:n.a.array,reloadCollection:n.a.func};t.a=a},887:function(e,t,a){"use strict";var r=a(0),O=a.n(r),n=a(1),r=a.n(n),n=a(9),j=a.n(n),w=a(2),S=a(259),C=a(8),I=a(30),E=a(260),T=a(868),k=a(857),a=function(e){function t(e,t,a,r,n){var i=(l=n===S.i)&&a,o=l&&u,c=!a&&e.length>t,s=e.substring(0,e.lastIndexOf(" ",t)),n=e.substring(e.lastIndexOf(" ",t),e.length),l=e,t="",a=(a=a,r=r,!d&&(a||r)),r=e;return c||o?(l=!Object(C.g)(s)&&O.a.createElement(O.a.Fragment,null,s,a&&O.a.createElement("span",{className:"continuation-indicator"},"…")),t=n):e&&i?(l="",t=r):l=r,{displayDescription:l,hiddenDescription:t}}var a,u=e.shortDescription,r=e.longDescription,n=e.designName,i=e.isDesktop,o=e.locale,d=e.collapsibleOpen,c=e.boxClassExtension,s=e.collapsibleShowTrigger,l=e.designThumbnailURL,m=e.tags,b=e.orderItemId,p=function(e,t){return!!e&&e.length>t},f=function(e,t,a){var r=o===I.b,n=Array.isArray(m)&&0<m.length&&Object(C.i)(m[0].name),i=n?m.map(function(e){return e.name&&e.name.toLowerCase()}):[];return O.a.createElement(O.a.Fragment,null,!a&&n&&!Object(C.g)(m)&&O.a.createElement(T.a,{tagNames:i,tags:m,orderItemId:b,isBlocked:!0}),e&&r&&O.a.createElement("p",{className:"design-info-text"},e),t&&r&&O.a.createElement("p",{className:"design-info-text"},t))},g=o===I.b,h=(a=u)?a.length:0,y=S.k,v=u?S.k-h:S.k,e=p(u,y),h=p(r,v),p=u&&t(u,y,!1,h,S.r).displayDescription,y=u&&t(u,y,!1,h,S.r).hiddenDescription,h=r&&t(r,v,e,!1,S.i).displayDescription,e=r&&t(r,v,e,!1,S.i).hiddenDescription,r=i?f(p,h,!1):f(u,r,!1),f=f(y,e,!0),y=!Object(C.g)(y)&&" "!==y,e=!Object(C.g)(e)&&" "!==e,e=f&&(y||e);return O.a.createElement(k.a,{isDesktop:i,heading:Object(w.c)("designs.designerInfo.designHeading"),imageUrl:l,imageAlt:n,infoText:r,boxClass:j()("b-design-info-box",c),hasNoRadius:!0,moreInfo:i&&e&&g&&O.a.createElement(E.a,{title:Object(w.c)("designs.designerInfo.more"),secondaryTitle:Object(w.c)("designs.designerInfo.less"),sizeClass:"x-trigger-extra-small",collapsibleOpen:d,classname:"more-details",triggerType:"plus",content:f,isDesignerInfo:!0,collapsibleShowTrigger:s})})};a.propTypes={shortDescription:r.a.string,longDescription:r.a.string,collapsibleOpen:r.a.bool,designName:r.a.string,tags:r.a.array,orderItemId:r.a.number,isDesktop:r.a.bool.isRequired,locale:r.a.string.isRequired,boxClassExtension:r.a.string,designThumbnailURL:r.a.string.isRequired,collapsibleShowTrigger:r.a.bool},t.a=a},890:function(e,t,a){"use strict";var r=a(0),s=a.n(r),n=a(1),r=a.n(n),n=a(9),l=a.n(n),a=function(e){function t(e){return r(e.target.value,e.target.id)}var a=e.radios,r=e.handleOnChangeRadio,n=e.name,i=e.inputClassNames,o=e.labelClassNames,c=e.extensionClass,e=e.verticalAlignment,e=l()("radio-group",c,{"x-vertical":e});return s.a.createElement("div",{className:e},a.map(function(e){return s.a.createElement("input",{key:e.id,type:"radio",name:n,id:e.id,onChange:t,className:l()("radio",i),value:e.value,checked:e.isDefaultValue})}),a.map(function(e){return s.a.createElement("label",{key:e.id,htmlFor:e.id,className:l()("label",o),"data-value":e.labelText},e.labelText)}))},n=r.a.shape({id:r.a.string.isRequired,inputLabel:r.a.string.isRequired,labelText:r.a.string,value:r.a.string.isRequired,isDefaultValue:r.a.bool.isRequired,buttonSize:r.a.string});a.propTypes={radios:r.a.arrayOf(n).isRequired,name:r.a.string.isRequired,handleOnChangeRadio:r.a.func.isRequired,inputClassNames:r.a.array,labelClassNames:r.a.array,extensionClass:r.a.string,verticalAlignment:r.a.bool},t.a=a},893:function(e,t,a){"use strict";var ye=a(12),ve=a(0),Oe=a.n(ve),r=a(1),n=a.n(r),je=a(26),we=a(160),Se=a(2),Ce=a(38),Ie=a(258),Ee=a(849),Te=a(8);function ke(e){var t=[],e=e&&e.map(function(e){return t.push(e.deleted),t.every(function(e){return e})});return e&&e.every(function(e){return e})}var i=a(931),j=a(885),w=a(904),S=a(905),C=a(906);function E(e,t){var a;switch(e){case"de":a=w.a;break;case"es":a=S.a;break;case"fr":a=C.a;break;default:a=j.a}return Object(i.a)(t,{locale:a,addSuffix:!0})}var o=a(14),d=a.n(o),k=a(27),Re=a(259),g=a(15);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=b(a);return e=r?(e=b(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==c(e)&&"function"!=typeof e?m(t):e}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,ve["Component"]);var e,t,a,r=u(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).onClickAssignId=e.onClickAssignId.bind(m(e)),e.onClickDeleteComment=e.onClickDeleteComment.bind(m(e)),e}return e=n,(t=[{key:"onClickAssignId",value:function(){var e=this.props;return(0,e.assignId)(e.commentId)}},{key:"onClickDeleteComment",value:function(){var e=this.props;return(0,e.deleteComment)(e.commentId)}},{key:"render",value:function(){var e=this.props,t=e.imageSource,a=e.userName,r=e.deletedComment,n=e.createdAt,i=e.timeElapsedSinceCreation,o=e.userId,c=e.userType,s=e.parentId,l=e.userOwnsComment,u=e.usersComment,e=e.replyIsClosed,c=Object(k.e)(c);return Oe.a.createElement("article",{className:"b-comment"},Oe.a.createElement("img",{className:"user-image",src:t,alt:a,width:Re.t,height:Re.t}),!r&&Oe.a.createElement(g.a,{className:"user-name",hrefValue:d.a.translate("xurls.userProfile",{userName:a}),contents:Object(Se.c)("designs.comments.commentAuthor",{user:a})}),Oe.a.createElement("time",{dateTime:n,className:"time-elapsed",title:n},i),Object(Te.i)(o)&&c&&!s&&Oe.a.createElement("button",{type:"button",className:"reply-btn",onClick:this.onClickAssignId,"aria-expanded":e},Object(Se.c)("designs.comments.reply")),Object(Te.i)(o)&&c&&l&&Oe.a.createElement("button",{className:"delete-btn",onClick:this.onClickDeleteComment},Object(Se.c)("designs.comments.deleteComment")),u&&Oe.a.createElement("p",{className:"user-comment"},u))}}])&&s(e.prototype,t),a&&s(e,a),n}();T.propTypes={imageSource:n.a.string.isRequired,userName:n.a.string.isRequired,deletedComment:n.a.bool.isRequired,createdAt:n.a.object.isRequired,timeElapsedSinceCreation:n.a.string.isRequired,userId:n.a.number,userType:n.a.oneOf([k.c,k.a,k.b]),parentId:n.a.number,commentId:n.a.number.isRequired,userOwnsComment:n.a.bool.isRequired,deleteComment:n.a.func.isRequired,usersComment:n.a.string,assignId:n.a.func,replyIsClosed:n.a.bool};var Pe=a(17);function Ne(e,u,d,m,t){var b=[];function p(e){t(e)}return e.children.map(function(e){var t=e.id,a=e.screen_name,r=e.mugshot,n=e.mugshot.id,i=e.mugshot.filename,o="NO_MUGSHOT"!==r?Ie.e.avatarDesignerImageUrl(n,i):Object(Pe.a)("comment_no_avatar_whiteBG.svg"),c=e.created_at,s=e.user_id,l=e.parent_id,r=e.deleted,n=r?Object(Se.c)("designs.comments.deletedComment"):e.comment,i=E(d,c),e=s===u;Object(Te.i)(n)&&!r&&b.push(Oe.a.createElement("li",{key:t},Oe.a.createElement(T,{imageSource:o,userName:a,deletedComment:r,createdAt:c,timeElapsedSinceCreation:i,usersComment:n,userId:s,userType:m,parentId:l,commentId:t,userOwnsComment:e,deleteComment:p})))}),b.reverse()}var Ae=a(37),Fe=a(867),xe=a(3),De=a(262),p=a(349),f=a(350),r=a(9),te=a.n(r),h=a(104),R=a(16);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=N(a);return e=r?(e=N(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==y(e)&&"function"!=typeof e?P(t):e}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(n,ve["Component"]);var e,t,a,r=I(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).onClickSubmitComment=e.onClickSubmitComment.bind(P(e)),e}return e=n,(t=[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.comments,t=t.reset;a!==e.comments&&t()}},{key:"onClickSubmitComment",value:function(){var e=this.props,t=e.onClickReturn,a=e.commentId,e=e.isReply;return t(e?a:void 0,e)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error,r=e.commentId,n=e.buttonId,i=e.replyIsClosed,o=e.isReply,c=o?Object(Se.c)("designs.comments.addReply"):Object(Se.c)("designs.comments.addComment"),s=o?Object(Se.c)("designs.comments.reply"):Object(Se.c)("designs.comments.addComment"),l=o?Object(Se.c)("designs.comments.submitReply"):Object(Se.c)("designs.comments.submitComment"),u=o?Object(Se.c)("designs.comments.postReply"):Object(Se.c)("designs.comments.postComment"),d=te()("b-form",{"x-reply-form":o,"x-error":a}),e=te()({"comment-fieldset":!o,"reply-fieldset":o}),a=te()({"comment-field":!o,"reply-text-field":o});return(r===n&&!i||!o)&&Oe.a.createElement("form",{className:d,onSubmit:t},Oe.a.createElement("fieldset",{className:e},Oe.a.createElement("legend",{className:"visuallyhidden"},s),Oe.a.createElement("div",{className:"fieldset-wrapper"},o&&Oe.a.createElement(R.a,{iconName:"arrow-return",iconTitle:Object(Se.c)("designs.comments.reply")}),Oe.a.createElement("div",{className:"field-wrapper"},Oe.a.createElement(p.a,{name:"comment",className:a,component:h.g,formPrefix:"comments",placeholder:c,label:s,labelClass:"visuallyhidden"}),Oe.a.createElement("button",{type:"submit",className:"btn blue-button","aria-label":l,title:l,onClick:this.onClickSubmitComment},u)))))}}])&&v(e.prototype,t),a&&v(e,a),n}();o.propTypes={handleSubmit:n.a.func.isRequired,onClickReturn:n.a.func.isRequired,commentId:n.a.number,buttonId:n.a.number,replyIsClosed:n.a.bool,isReply:n.a.bool,comments:n.a.array,reset:n.a.func,error:n.a.bool};var A=Object(f.a)({form:"comments"})(o),F=a(852),x=a(930),D=a(870),_=a(878),q=a(871),M=a(159),ae=a(30),z=a(95);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=H(a);return e=r?(e=H(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==U(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(n,ve["Component"]);var e,t,a,r=W(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.answer,e=e.heading;return Oe.a.createElement("div",{className:"b-summary-answer-list"},Oe.a.createElement("h3",{className:"sub-heading"},e),Oe.a.createElement("ul",{className:"list-of-answers"},t))}}])&&G(e.prototype,t),a&&G(e,a),n}();function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Y(a);return e=r?(e=Y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==V(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}B.propTypes={answer:n.a.array.isRequired,heading:n.a.string.isRequired};var Z=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(n,ve["Component"]);var e,t,a,r=K(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.heading,a=e.contentWidth,e=e.ratingAmount;return Oe.a.createElement("div",{className:"b-rating-bar"},t&&Oe.a.createElement("h3",{className:"sub-heading"},t),Oe.a.createElement("div",{className:"rating-bar"},Oe.a.createElement("span",{className:"rating-bar-content",role:"progressbar","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100",style:{width:"".concat(a,"%")}})),Oe.a.createElement("span",{className:"rating-amount"},e))}}])&&Q(e.prototype,t),a&&Q(e,a),n}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ie(a);return e=r?(e=ie(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==J(e)&&"function"!=typeof e?ne(t):e}}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Z.propTypes={contentWidth:n.a.number.isRequired,ratingAmount:n.a.oneOfType([n.a.string.isRequired,n.a.number.isRequired]),heading:n.a.string};var oe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(n,ve["Component"]);var e,t,a,r=re(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).getPhotos=e.getPhotos.bind(ne(e)),e}return e=n,(t=[{key:"isAnswerAvailable",value:function(e,t){return e.map(function(e){return e.dimensionLabel===t&&e.dimensionLabel}).includes(t)}},{key:"getAnswerLabel",value:function(e,r){return e.map(function(e){var a,t;return Object.values(e).includes(r)&&(a=e.label,t=Array.from(new Set(a)).map(function(e,t){return Oe.a.createElement("li",{key:t,className:"answer-item"},Oe.a.createElement("p",{className:"answer"},Object(Se.c)("reviews.answerTranslations.".concat(e))),D.a&&Oe.a.createElement("span",{className:"answer-item-amount"},"(",Object(D.a)(a,e),")"))})),t})}},{key:"arePhotosAvailable",value:function(e){return 0!==e.media.photo.length}},{key:"getPhotos",value:function(e){var a=this;return e.media.photo.map(function(e,t){return Oe.a.createElement("li",{key:t,className:"individual-review-photos"},Oe.a.createElement("img",{className:"review-photo-thumbnail",src:e.thumbnailUrl,width:"100",height:"100",onClick:function(){return!a.props.isPhotoModal&&a.props.openPhotoModal("review-photos-modal",e)},alt:e.caption}))})}},{key:"getAnswerValue",value:function(e,t){var e=e.dimensions,a=0;return e.map(function(e){Object.values(e).includes(t)&&(a=e.value)}),a}},{key:"render",value:function(){var e=this.props,t=e.reviewTitle,a=e.review,r=e.reviewText,n=e.incrementVotes,i=e.flagAsInappropriate,o=e.locale,c=e.isPhotoModal,s=e.userType,l=e.hasAlreadyVoted,u=a.dimensions,d=a.dateCreated,m=a.purchaseDate,b=a.user.nickName,p=this.getAnswerValue(a,q.f),f=p/q.h*100,g=this.getAnswerValue(a,q.j),h=g/q.h*100,y=0===p,e=0===g,v=ae.b,O=M.e,s=Object(k.e)(s);switch(o){case ae.a:v=w.a,O=M.a;break;case ae.c:v=S.a,O=M.b;break;case ae.d:v=C.a,O=M.c;break;default:v=j.a,O=M.e}o=Object(x.a)(d,O,{locale:v}),d=m&&Object(x.a)(m,O,{locale:v}),m=te()("review-section-right",{"x-error":l});return Oe.a.createElement("li",{className:"b-individual-review-list-item"},Oe.a.createElement("section",{className:"review-section-top"},Oe.a.createElement("ul",{className:"individual-stars"},Object(_.a)(a.rating))),Oe.a.createElement("section",{className:"review-section-left"},this.isAnswerAvailable(u,q.g)&&Oe.a.createElement(B,{heading:Object(Se.c)("reviews.reviews.materialReceivedQuestion"),answer:this.getAnswerLabel(u,q.g,D.a)}),!y&&Oe.a.createElement(Z,{heading:Object(Se.c)("reviews.reviews.materialQuestion"),contentWidth:f,ratingAmount:"".concat(p," / ").concat(q.h)}),!e&&Oe.a.createElement(Z,{heading:Object(Se.c)("reviews.reviews.printQuestion"),contentWidth:h,ratingAmount:"".concat(g," / ").concat(q.h)}),this.isAnswerAvailable(u,q.k)&&Oe.a.createElement(B,{heading:Object(Se.c)("reviews.reviews.projectQuestion"),answer:this.getAnswerLabel(u,q.k,D.a)}),this.isAnswerAvailable(u,q.l)&&Oe.a.createElement(B,{heading:Object(Se.c)("reviews.reviews.recommendationQuestion"),answer:this.getAnswerLabel(u,q.l)})),Oe.a.createElement("section",{className:m},Oe.a.createElement("h3",{className:"sub-heading"},t),Oe.a.createElement("p",{className:"review-text"},r),Oe.a.createElement("time",{dateTime:o.toString(),className:"time-created"},o.toString()),Oe.a.createElement("div",{className:"user-name"},b),d&&Oe.a.createElement("div",{className:"time-purchased"},Object(Se.c)("reviews.reviews.itemPurchased")," ",Oe.a.createElement("time",{dateTime:d},d)),!c&&s&&Oe.a.createElement(Oe.a.Fragment,null,Oe.a.createElement("h3",{className:"sub-heading"},Object(Se.c)("reviews.reviews.reviewHelpfulQuestion")),l&&Oe.a.createElement(z.a,{message:Object(Se.c)("errors.inline.userAlreadyVoted")}),Oe.a.createElement("ul",{className:"list-of-answers"},Oe.a.createElement("li",{className:"evaluate-review-answer"},Oe.a.createElement("button",{type:"button",className:"evaluation-btn",onClick:function(){n(a,q.q)}},Object(Se.c)("reviews.reviews.positiveAnswer")),Oe.a.createElement("span",{className:"amount-of-answers"},"(",a.upVotes,")")),Oe.a.createElement("li",{className:"evaluate-review-answer"},Oe.a.createElement("button",{type:"button",className:"evaluation-btn",onClick:function(){n(a,q.p)}},Object(Se.c)("reviews.reviews.negativeAnswer")),Oe.a.createElement("span",{className:"amount-of-answers"},"(",a.downVotes,")")),Oe.a.createElement("li",{className:"evaluate-review-answer"},Oe.a.createElement("button",{type:"button",className:"evaluation-btn",onClick:function(){i(a)}},Object(Se.c)("reviews.reviews.flagAsInappropriate")))))),this.arePhotosAvailable(a)&&Oe.a.createElement("ul",{className:"review-photos-section"},this.getPhotos(a)))}}])&&X(e.prototype,t),a&&X(e,a),n}();oe.propTypes={review:n.a.object.isRequired,hasAlreadyVoted:n.a.bool.isRequired,reviewTitle:n.a.string,reviewText:n.a.string,openPhotoModal:n.a.func,incrementVotes:n.a.func,flagAsInappropriate:n.a.func,locale:n.a.string.isRequired,isPhotoModal:n.a.bool,userType:n.a.oneOf([k.c,k.a,k.b])};var _e=a(61);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=de(a);return e=r?(e=de(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==ce(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(n,ve["Component"]);var e,t,a,r=ue(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.comments,r=t.updateCommentReplies,n=t.photoDataIndex,t=t.photoDataList;a!==e.comments&&r(t[n].id)}},{key:"createComment",value:function(){var e=this.props,t=e.photoDataIndex,a=e.photoDataList,r=e.locale,n=e.userId,i=e.userType,o=e.deleteComment,e=e.assignId,a=a[t],t=E(r,a.createdAt),r=a.userId===n;return Oe.a.createElement(T,{imageSource:a.imageSource,userName:a.userName,deletedComment:a.deletedComment,createdAt:a.createdAt,timeElapsedSinceCreation:t,usersComment:a.comment,userId:n,userType:i,parentId:a.parentId,commentId:a.id,userOwnsComment:r,deleteComment:o,assignId:e})}},{key:"createReview",value:function(){var e=this.props,t=e.photoDataIndex,a=e.photoDataList,e=e.locale,t=a[t];return Oe.a.createElement(oe,{locale:e,key:t.id,review:t.review,reviewTitle:t.title,reviewText:t.text,isPhotoModal:Object(Te.i)(t.photo)})}},{key:"render",value:function(){var e=this.props,t=e.comments,a=e.buttonId,r=e.replyIsClosed,n=e.onSubmit,i=e.onClickReturn,o=e.photoDataIndex,c=e.getListOfRepliesStatus,s=e.commentReplies,l=e.photoDataList,u=e.handleSwiperSlideChange,d=l[o],m=d.id,b=Object(Te.i)(d.review),e=c(d.commentsReplies),c=b?this.createReview():this.createComment(),o={slidesPerView:"auto",pagination:{},thumbs:{},activeSlideKey:"".concat(o)};return Oe.a.createElement(_e.a,null,Oe.a.createElement("div",{className:"b-user-submitted-photos-modal"},Oe.a.createElement("h3",{className:"h3 photo-modal-heading"},b?Object(Se.c)("fabric.userSubmittedPhotos.reviewPhotoModalHeading"):Object(Se.c)("fabric.userSubmittedPhotos.commentPhotoModalHeading")),Oe.a.createElement(F.a,{mountTimer:!0,viewport:this.props.viewport,swiperParams:o,handleSwiperSlideChange:u,navigationClasses:"x-on-top-of-slides"},l.map(function(e,t){return Oe.a.createElement("div",{key:"".concat(t)},Oe.a.createElement("img",{className:"user-submitted-photo",src:e.photo,alt:e.caption,width:"100",height:"100"}))})),c,Object(Te.i)(d.comment)&&Oe.a.createElement(A,{onSubmit:n,onClickReturn:i,commentId:m,buttonId:a,replyIsClosed:r,isReply:!0,form:"comment-".concat(m,"-replies"),comments:t}),s&&Oe.a.createElement("div",{className:"replies-wrapper"},!e&&Oe.a.createElement(R.a,{className:"list-arrow-return",iconName:"arrow-return",iconTitle:Object(Se.c)("designs.comments.reply")}),!e&&Oe.a.createElement("ul",{className:"replies-list"},s))))}}])&&se(e.prototype,t),a&&se(e,a),n}();qe.propTypes={comments:n.a.array,buttonId:n.a.number,replyIsClosed:n.a.bool,onSubmit:n.a.func,onClickReturn:n.a.func,commentReplies:n.a.oneOfType([n.a.array,n.a.bool]),updateCommentReplies:n.a.func,photoDataIndex:n.a.number,handleSwiperSlideChange:n.a.func,photoDataList:n.a.array,locale:n.a.string,userId:n.a.number,userType:n.a.oneOf([k.c,k.a,k.b]),getListOfRepliesStatus:n.a.func,deleteComment:n.a.func,viewport:n.a.string,assignId:n.a.func};var me=a(21),be=a(7),pe=a(67),fe=a(60),ge=a(89),he=a(105),Me=a(876),ze=a(261),r=function(e){var a=e.orderItemId,r=e.selectedSubstrate,t=e.viewport,n=e.crossSellDesigns,i=e.productType,o=e.getPosition,c=e.productTypeAbbreviated,s=e.locale,l=e.pushProductClickToGTM,u=Object(Te.i)(i)&&i!==xe.g?Object(Se.c)("designs.crossSellHeader.".concat(i)):Object(Se.c)("designs.crossSellHeader.fabric"),d=r&&r.includes(xe.xc)?r.toLowerCase():Object(he.e)(r,7,r.length),e=te()("b-design-cross-sell-list",{"x-no-border":c===xe.i});return Oe.a.createElement("article",{className:e,ref:o&&function(e){return o(e)}},Oe.a.createElement("h3",{className:"h3"},u),0===n.length?Oe.a.createElement(ze.a,{message:Object(Se.c)("common.loading")}):Oe.a.createElement(F.a,{viewport:t,swiperParams:{slidesPerView:"auto",pagination:{},thumbs:{},spaceBetween:0},navigationClasses:"x-on-top-of-slides"},n.map(function(e,t){return Oe.a.createElement("div",{key:t},Oe.a.createElement(Me.a,{locale:s,productTypeAbbreviated:c,designId:e.id,orderItemId:a,tags:e.tags,designTitle:e.name,userName:(e.user||e.designer||{}).screen_name,slug:e.slug,collectionSlug:e.collection_slug,collectionName:e.collection_name,searchParams:e.search_params,imageUrl:i===xe.g?Ie.e.cipheredDesignThumbnail(e.id,e.design_thumbnail):e.thumbnail_url,isCondensed:!0,selectedSubstrate:r,isCrossSell:!0,productType:i,pushProductClickToGTM:l,index:t,fabricQuery:d}))})))};r.propTypes={productTypeAbbreviated:n.a.string.isRequired,locale:n.a.string.isRequired,crossSellDesigns:n.a.array.isRequired,viewport:n.a.string,productType:n.a.string,orderItemId:n.a.string,selectedSubstrate:n.a.string,getPosition:n.a.func,pushProductClickToGTM:n.a.func};var Ue=r;function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ve(a);return e=r?(e=Ve(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ge(e)&&"function"!=typeof e?Be(t):e}}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(n,ve["Component"]);var e,t,a,r=He(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).crossSellPosition=0,e.productImpressionsPushedtoGA=!1,e.productClickPushedtoGA=!1,e.getPosition=e.getPosition.bind(Be(e)),e.pushProductClickToGTM=e.pushProductClickToGTM.bind(Be(e)),e}return e=n,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.windowHeight,a=e.dispatchCrossSellDesigns,r=e.design,e=e.productType;this.crossSellPosition<t&&0!==this.crossSellPosition&&a(r.id,e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.windowPosition,r=t.windowHeight,n=t.dispatchCrossSellDesigns,i=t.design,o=t.crossSellFetchingIsReady,c=t.crossSellIsFetching,t=t.productType,o=Object(Te.i)(o)&&o;e.windowPosition!==a&&r>this.crossSellPosition&&0!==this.crossSellPosition&&0!==a&&!o&&!c&&n(i.id,t)}},{key:"getPosition",value:function(e){this.crossSellPosition=e?e.getBoundingClientRect().top+Re.h:0}},{key:"getCrossSellDesignData",value:function(){var e=this.props,t=e.productSize,a=e.selectedSubstrate,r=e.productTypeAbbreviated,n=e.homeGoodType,i=Object(fe.o)(r),e=Object(fe.n)(r),r=Object(fe.p)(r);return{name:i?d.a.translate("en.homeGood.".concat(n)):d.a.translate("en.fabricShop.".concat(a)),department:i?Object(ge.f)(n):e?pe.e:r?pe.n:void 0,category:i?pe.f:e?pe.e:r?pe.n:void 0,variant:Object(Te.i)(t)&&(i?d.a.translate("en.homeGood.cart.productSize.".concat(t)):e||r?d.a.translate("en.cart.cart.".concat(t)):void 0)}}},{key:"pushProductImpressionsToGTM",value:function(){var a=this,e=this.props,t=e.crossSellDesigns,r=e.rawItemPrice,n=e.currency,i=e.quantity,t=t.map(function(e,t){return{name:a.getCrossSellDesignData().name,id:e.id,price:r,quantity:i,department:a.getCrossSellDesignData().department,brand:e.designer.screen_name,category:a.getCrossSellDesignData().category,variant:a.getCrossSellDesignData().variant,list:pe.b,position:t+1}});Object(ge.c)(dataLayer)&&!this.productImpressionsPushedtoGA&&!Object(Te.r)(t)&&r&&(this.productImpressionsPushedtoGA=!0,dataLayer.push(Object(ge.h)(n,t)))}},{key:"pushProductClickToGTM",value:function(e,t,a){var r=this.props,n=r.rawItemPrice,i=r.currency,o=this.getCrossSellDesignData().name,c=this.getCrossSellDesignData().category,s=this.getCrossSellDesignData().department,r=this.getCrossSellDesignData().variant,a=a+1;Object(ge.c)(dataLayer)&&!this.productClickPushedtoGA&&Object(Te.i)(e)&&n&&(this.productClickPushedtoGA=!0,dataLayer.push(Object(ge.g)(pe.b,o,e,n,i,t,c,s,r,a)))}},{key:"render",value:function(){var e=this.props,t=e.orderItemId,a=e.selectedSubstrate,r=e.viewport,n=e.crossSellDesigns,i=e.productType,o=e.productTypeAbbreviated,c=e.locale,s=e.measurementSystem,e=e.currency;return this.pushProductImpressionsToGTM(e),Oe.a.createElement(Ue,{locale:c,productTypeAbbreviated:o,orderItemId:t,selectedSubstrate:a,viewport:r,crossSellDesigns:n,productType:i,measurementSystem:s,getPosition:this.getPosition,pushProductClickToGTM:this.pushProductClickToGTM})}}])&&Le(e.prototype,t),a&&Le(e,a),n}();o.propTypes={productTypeAbbreviated:n.a.string.isRequired,locale:n.a.string.isRequired,crossSellDesigns:n.a.array,viewport:n.a.string.isRequired,orderItemId:n.a.string,selectedSubstrate:n.a.string,dispatchCrossSellDesigns:n.a.func,windowPosition:n.a.number,windowHeight:n.a.number,design:n.a.object,crossSellIsFetching:n.a.bool,crossSellFetchingIsReady:n.a.bool,productType:n.a.string,measurementSystem:n.a.string,currency:n.a.string,productSize:n.a.string,rawItemPrice:n.a.number,homeGoodType:n.a.string,quantity:n.a.number};var Qe=Object(je.b)(function(e){return{orderItemId:e.routing.locationBeforeTransitions.query[be.w],viewport:e.pageSetup.viewport,windowPosition:e.pageSetup.windowPosition,windowHeight:e.pageSetup.windowHeight,design:e.design,crossSellDesigns:e.crossSell.designs,crossSellIsFetching:e.crossSell.isFetching,crossSellFetchingIsReady:e.crossSell.fetchingIsReady,measurementSystem:e.user.preferences.measurement_system,currency:e.user.preferences.currency}},function(a){return{dispatch:a,dispatchCrossSellDesigns:function(e,t){return Object(Ae.o)(a,e,t)}}})(o),$e=a(268),Ke=a(260),Ye=a(861),Ze=a(264);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=at(a);return e=r?(e=at(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Je(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(n,ve["Component"]);var e,t,a,r=tt(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){return Oe.a.createElement("img",{key:"".concat(this.props.photo.id,"-photo-modal"),height:"100",width:"100",src:this.props.photo.originalUrl,alt:this.props.photo.caption,className:"b-individual-review-photo"})}}])&&Xe(e.prototype,t),a&&Xe(e,a),n}();function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=lt(a);return e=r?(e=lt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==nt(e)&&"function"!=typeof e?st(t):e}}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}rt.propTypes={photo:n.a.object.isRequired};r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(n,ve["Component"]);var e,t,a,r=ct(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).state={photo:{}},e.openPhotoModal=e.openPhotoModal.bind(st(e)),e}return e=n,(t=[{key:"openPhotoModal",value:function(e,t){this.setState({photo:t}),this.props.openModal(e)}},{key:"createIndividualReviews",value:function(e){var i=this,t=this.props,o=t.locale,c=t.incrementVotes,s=t.flagAsInappropriate,l=t.userType,u=t.reviewsVoted;return e.map(function(e){var t=e.id,a=e.title,r=e.text,n=u.includes(e.id);return Oe.a.createElement(oe,{key:t,review:e,hasAlreadyVoted:n,reviewTitle:a,reviewText:r,openPhotoModal:i.openPhotoModal,incrementVotes:c,flagAsInappropriate:s,locale:o,userType:l})})}},{key:"createReviewsToDisplay",value:function(){for(var e=this.props.reviews,t=[],a=[],r=0,n=Object.keys(e.reviews);r<n.length;r++){var i=n[r];(i<5?t:a).push(e.reviews[i])}return{displayReviews:this.createIndividualReviews(t),collapsibleReviews:this.createIndividualReviews(a)}}},{key:"render",value:function(){var e=this.createReviewsToDisplay().displayReviews,t=this.createReviewsToDisplay().collapsibleReviews,a=this.props,r=a.displayModal,n=a.modalName,a=a.closeModal;return Oe.a.createElement(Oe.a.Fragment,null,Oe.a.createElement("ul",{className:"b-individual-reviews"},e),!Object(Te.g)(t)&&Oe.a.createElement(Ke.a,{title:Object(Se.c)("reviews.reviews.moreReviews"),collapsibleOpen:!1,triggerType:"plus",content:Oe.a.createElement("ul",null,t),sizeClass:"x-trigger-large"}),r&&"review-photos-modal"===n&&Oe.a.createElement(De.a,{key:"photo-modal-".concat(this.state.photo.id),closeModal:a,slideInModal:!1,centeredModal:!0,contents:Oe.a.createElement(rt,{key:"individual-review-photo-".concat(this.state.photo.id),photo:this.state.photo})}))}}])&&it(e.prototype,t),a&&it(e,a),n}();r.propTypes={reviews:n.a.object.isRequired,reviewsVoted:n.a.array,locale:n.a.string.isRequired,incrementVotes:n.a.func.isRequired,flagAsInappropriate:n.a.func.isRequired,modalName:n.a.string,openModal:n.a.func,closeModal:n.a.func,displayModal:n.a.bool,userType:n.a.oneOf([k.c,k.a,k.b])};var ut=Object(je.b)(function(e){return{displayModal:e.pageSetup.modal.displayModal,modalName:e.pageSetup.modal.modalName}},function(e){return{dispatch:e,closeModal:Object(Ze.a)(e),openModal:Object(Ze.b)(e)}})(r);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function bt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=gt(a);return e=r?(e=gt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==dt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(n,ve["Component"]);var e,t,a,r=ft(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"getAnswerLabelForSummary",value:function(e){var a=[],r=[],n=[];return e.map(function(e){e.dimensions.map(function(e){var t=e.label;Object.values(e).includes(q.g)?a.push(t):Object.values(e).includes(q.k)?r.push(t):Object.values(e).includes(q.l)&&n.push(t)})}),{materialSummaryList:[].concat.apply([],a),projectSummaryList:[].concat.apply([],r),recommendationSummaryList:[].concat.apply([],n)}}},{key:"getAnswersForSummary",value:function(e){var t=this,a=[],r=0,n=[],i=0,o="",c="",s="",l=this.getAnswerLabelForSummary(e),u=l.materialSummaryList,d=Array.from(new Set(u)),m=l.projectSummaryList,b=Array.from(new Set(m)),p=l.recommendationSummaryList,f=Array.from(new Set(p));return e.map(function(e){a.push(t.getAnswerValue(e,q.f)),r=a.reduce(function(e,t){return e+t})/a.length,n.push(t.getAnswerValue(e,q.j)),i=n.reduce(function(e,t){return e+t})/n.length,o=t.getSummaryListItems(u,d),c=t.getSummaryListItems(m,b),s=t.getSummaryListItems(p,f)}),{materialAnswerAverage:r,printAnswerAverage:i,materialReceivedAnswer:o,projectAnswer:c,recommendationAnswer:s}}},{key:"getSummaryListItems",value:function(a,e){return e.map(function(e,t){return Oe.a.createElement("li",{key:t,className:"answer-item"},Oe.a.createElement("p",{className:"answer"},Object(Se.c)("reviews.answerTranslations.".concat(e))),Oe.a.createElement("span",{className:"answer-item-amount"},"(",Object(D.a)(a,e),")"))})}},{key:"getAnswerValue",value:function(e,t){var e=e.dimensions,a=0;return e.map(function(e){Object.values(e).includes(t)&&(a=e.value)}),a}},{key:"renderStarsList",value:function(n,e){var t=this.props.reviewSummaryData,i=Object(Te.i)(t.ratingBreakdown)&&t.ratingBreakdown;return e&&Object.keys(i).reverse().map(function(e){var t=i[e],a=t/n*100,r=parseInt(e,10);return Oe.a.createElement("li",{key:e,className:"rating-item"},Oe.a.createElement("span",{className:"rating-indicator"},Object(Se.c)("reviews.reviews.starsAmount",{context:r})),Oe.a.createElement(Z,{contentWidth:a,ratingAmount:t}))})}},{key:"getReviewsList",value:function(e,t){var a=this.props.reviews,r=[];if(t)for(var n=0,i=Object.keys(a.reviews);n<i.length;n++){var o=i[n];r.push(a.reviews[o])}return r}},{key:"showReviews",value:function(){var e=this.props,t=e.reviews,a=e.reviewsVoted,r=e.locale,n=e.incrementVotes,i=e.flagAsInappropriate,o=e.evaluateEligibility,c=e.userType,s=e.reviewSummaryData,l=e.reviewSubmitted,u=e.isDesktop,d=Object(Te.i)(s.averageRating)&&!Object(Te.g)(s.averageRating)&&s.averageRating.toFixed(1),m=Object(Te.i)(s.ratings)&&s.ratings,b=0<m,p=this.getReviewsList(m,b),f=this.getAnswersForSummary(p),g=f.materialAnswerAverage/q.h*100,h=f.materialAnswerAverage.toFixed(1),y=f.printAnswerAverage/q.h*100,v=f.printAnswerAverage.toFixed(1),O=f.materialReceivedAnswer,j=f.projectAnswer,w=f.recommendationAnswer,S=Object(Te.g)(j),C=Object(Te.g)(w),I=Object(Te.g)(O),E=0==y,T=0==g,e=this.renderStarsList(m,b),p=Object(k.e)(c),f=te()("btn dark-blue-button new-review-btn",{"x-disabled":l}),l=te()("review-btn",{"x-hidden-link":l}),c=Oe.a.createElement(ut,{reviews:t,reviewsVoted:a,locale:r,incrementVotes:n,flagAsInappropriate:i,getAnswerValue:this.getAnswerValue,getStarListItems:_.a,userType:c});return Oe.a.createElement("article",mt({className:"b-reviews grid x-50",id:"reviews-section"},b&&{itemProp:"aggregateRating",itemScope:!0,itemType:"http://schema.org/AggregateRating"}),u&&Oe.a.createElement("h3",{className:"h3 summary-heading"},Object(Se.c)("reviews.reviews.summaryHeading",{ratingCount:m})),Oe.a.createElement("p",{className:"turnto-reference"},Object(Se.c)("reviews.reviews.turnToReference")),Oe.a.createElement("div",{className:"review-wrapper x-fat-border"},b&&Oe.a.createElement("section",{className:"review-section-top"},Oe.a.createElement("ul",{className:"average-stars"},Object(_.a)(s.averageRating)),Oe.a.createElement("span",{className:"stars-average"},Oe.a.createElement("span",{itemProp:"ratingValue"},d)," / ",q.h.toFixed(1)),Oe.a.createElement("div",{className:"reviews-amount"},Oe.a.createElement("span",{itemProp:"reviewCount"},m)," ",Object(Se.c)("reviews.reviews.reviewsAmount",{context:m}))),b&&Oe.a.createElement("section",{className:"review-section-left"},Oe.a.createElement("ul",{className:"rating-list"},e),!T&&Oe.a.createElement(Z,{heading:Object(Se.c)("reviews.reviews.materialQuestion"),contentWidth:g,ratingAmount:"".concat(h," / ").concat(q.h)}),!E&&Oe.a.createElement(Z,{heading:Object(Se.c)("reviews.reviews.printQuestion"),contentWidth:y,ratingAmount:"".concat(v," / ").concat(q.h)}),p&&Oe.a.createElement("a",{className:f,"aria-label":Object(Se.c)("reviews.reviews.add"),onClick:o},Object(Se.c)("reviews.reviews.add"))),b&&Oe.a.createElement("section",{className:"review-section-right"},!I&&Oe.a.createElement(B,{heading:Object(Se.c)("reviews.reviews.materialReceivedQuestion"),answer:O}),!S&&Oe.a.createElement(B,{heading:Object(Se.c)("reviews.reviews.projectQuestion"),answer:j}),!C&&Oe.a.createElement(B,{heading:Object(Se.c)("reviews.reviews.recommendationQuestion"),answer:w})),!b&&Oe.a.createElement("div",{className:"no-reviews"},Oe.a.createElement("span",{className:"no-reviews-message"},Object(Se.c)("reviews.reviews.noReviewsMessage")),p&&Oe.a.createElement("button",{type:"button",className:l,"aria-label":Object(Se.c)("reviews.reviews.noReviewsAdd"),onClick:o},Object(Se.c)("reviews.reviews.noReviewsAdd")))),b&&(u?Oe.a.createElement(Ke.a,{title:Object(Se.c)("reviews.reviews.readIndividualReviews"),collapsibleOpen:!1,triggerType:"plus",classname:"individual-reviews",sizeClass:"x-trigger-extra-small",content:c}):c))}},{key:"render",value:function(){var e=this.props,t=e.reviewSummaryData,a=e.reviewDataAvailable,r=e.isDesktop,e=this.showReviews(),t=Object(Te.i)(t.ratings)&&t.ratings,t=Object(Se.c)("reviews.reviews.summaryHeading",{ratingCount:t});return a?Oe.a.createElement(Ye.a,{heading:t,isDesktop:r},e):""}}])&&bt(e.prototype,t),a&&bt(e,a),n}();function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=wt(a);return e=r?(e=wt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==yt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ht.propTypes={reviews:n.a.object.isRequired,reviewsVoted:n.a.array,locale:n.a.string.isRequired,incrementVotes:n.a.func.isRequired,flagAsInappropriate:n.a.func.isRequired,evaluateEligibility:n.a.func.isRequired,reviewSummaryData:n.a.object.isRequired,reviewSubmitted:n.a.bool,userType:n.a.oneOf([k.c,k.a,k.b]),reviewDataAvailable:n.a.bool,isDesktop:n.a.bool.isRequired};var St=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(n,ve["Component"]);var e,t,a,r=jt(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.question,a=e.content,r=t===Object(Se.c)("reviews.reviewsForm.projectQuestion"),e=t===Object(Se.c)("reviews.reviewsForm.materialReceivedQuestion"),r=te()("rating-wrapper",{"default-rating-wrapper":!r&&!e,"project-rating-wrapper":r});return Oe.a.createElement("div",{className:"b-review-question"},Oe.a.createElement("h3",{className:"sub-heading"},t),Oe.a.createElement("div",{className:r},a))}}])&&vt(e.prototype,t),a&&vt(e,a),n}();St.propTypes={question:n.a.string.isRequired,content:n.a.oneOfType([n.a.array.isRequired,n.a.object.isRequired])};o=a(879);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Rt(a);return e=r?(e=Rt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ct(e)&&"function"!=typeof e?kt(t):e}}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(n,ve["Component"]);var e,t,a,r=Tt(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).fileSelected=e.fileSelected.bind(kt(e)),e.fileRemoved=e.fileRemoved.bind(kt(e)),e.fileCaptionChanged=e.fileCaptionChanged.bind(kt(e)),e}return e=n,(t=[{key:"fileSelected",value:function(e){e.preventDefault();e=e.target.files[0];this.props.onAddPhoto(e)}},{key:"fileRemoved",value:function(e,t){e.preventDefault(),this.props.onRemovePhoto(t)}},{key:"fileCaptionChanged",value:function(e,t){e.preventDefault();e=e.target.value;this.props.onNewCaption(e,t)}},{key:"renderFileSelectField",value:function(){var e=this.props,t=e.formPrefix,e=e.numPhotos;return Oe.a.createElement("div",{key:"".concat(t,"-fileInputDiv-").concat(e),className:"file-upload-wrapper"},Oe.a.createElement(p.a,{id:"photo-upload",label:Object(Se.c)("reviews.reviewsForm.choose_photo"),inputStyle:"file-select-input visuallyhidden",labelStyle:"file-select-label-border",name:"".concat(t,"-fileInputField-").concat(e),formPrefix:t,component:h.c,ariaRequired:"true",onChangeAction:this.fileSelected}))}},{key:"renderSelectedFile",value:function(e,t){var a=this.props.formPrefix;return null!==e&&Oe.a.createElement("div",{key:"".concat(a,"-photo-").concat(t),className:"uploaded-photo"},Oe.a.createElement("img",{src:e.b64data,alt:e.fileName,width:"150",height:"150",className:"photo-thumbnail"}),Oe.a.createElement("button",{className:"delete-photo-btn",onClick:this.fileRemoved},Oe.a.createElement(R.a,{iconName:"delete",iconTitle:Object(Se.c)("reviews.reviewsForm.removePhoto")})),Oe.a.createElement(p.a,{name:"".concat(a,"-fileCaptionField-").concat(t),component:h.d,formPrefix:a,placeholder:Object(Se.c)("reviews.reviewsForm.captionPlaceholder"),labelText:Object(Se.c)("reviews.reviewsForm.captionTitle"),labelClass:"visuallyhidden",onBlur:this.fileCaptionChanged}))}},{key:"render",value:function(){var a=this,e=this.props,t=e.photos,e=e.limit,e=t.filter(function(e){return null!==e}).length<e;return Oe.a.createElement("ul",{className:"b-photo-upload"},Oe.a.createElement("li",{className:"photos-upload-wrapper"},t.map(function(e,t){return a.renderSelectedFile(e,t)})),Oe.a.createElement("li",{className:"photo-uploader"},e&&this.renderFileSelectField()))}}])&&It(e.prototype,t),a&&It(e,a),n}();function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_t(a);return e=r?(e=_t(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Nt(e)&&"function"!=typeof e?Dt(t):e}}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Pt.propTypes={onRemovePhoto:n.a.func.isRequired,onAddPhoto:n.a.func.isRequired,onNewCaption:n.a.func.isRequired,formPrefix:n.a.string.isRequired,photos:n.a.array.isRequired,limit:n.a.number.isRequired,numPhotos:n.a.number.isRequired};var qt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(n,ve["Component"]);var e,t,a,r=xt(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).state={numPhotos:0,reviewErrorMessagePhotoFormats:""},e.setImageData=e.setImageData.bind(Dt(e)),e.removePhoto=e.removePhoto.bind(Dt(e)),e.setCaption=e.setCaption.bind(Dt(e)),e}return e=n,(t=[{key:"validatePhotoFormat",value:function(e){this.setState({reviewErrorMessagePhotoFormats:""}),Object(Te.v)(e)?this.setState({reviewErrorMessagePhotoFormats:Object(Se.c)("reviews.reviewsForm.validatePhotoFormat")}):this.setPhoto(e)}},{key:"setImageData",value:function(e){var t=this.props.photos,a=e.target.result,a={fileName:e.target.fileName,b64data:a};t.push(a),this.props.updatePhotos(t)}},{key:"setPhoto",value:function(e){var t=new FileReader;t.fileName=e.name,t.onloadend=this.setImageData,t.readAsDataURL(e);e=this.state.numPhotos+1;this.setState({numPhotos:e})}},{key:"removePhoto",value:function(e){this.props.photos.splice(e,1)}},{key:"setCaption",value:function(e,t){this.props.photos[t].caption=e}},{key:"render",value:function(){var e=this.props,t=e.photos,a=e.formPrefix,r=e.mediaLimit,e=e.errorMessageCaptions;return Oe.a.createElement("article",{className:"b-media-upload"},Oe.a.createElement("div",{className:"mediaUpload x-error"},e&&Oe.a.createElement(z.a,{message:e}),this.state.reviewErrorMessagePhotoFormats&&Oe.a.createElement(z.a,{message:this.state.reviewErrorMessagePhotoFormats})),Oe.a.createElement(Pt,{formPrefix:a,limit:r,photos:t,numPhotos:this.state.numPhotos,onAddPhoto:this.validatePhotoFormat,onRemovePhoto:this.removePhoto,onNewCaption:this.setCaption}))}}])&&At(e.prototype,t),a&&At(e,a),n}();function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Ut(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ut(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,n=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw n}}}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Gt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Bt(a);return e=r?(e=Bt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Mt(e)&&"function"!=typeof e?Ht(t):e}}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}qt.propTypes={formPrefix:n.a.string.isRequired,mediaLimit:n.a.number.isRequired,photos:n.a.array.isRequired,updatePhotos:n.a.func.isRequired,errorMessageCaptions:n.a.string};r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(n,ve["Component"]);var e,t,a,r=Wt(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).updateRating=e.updateRating.bind(Ht(e)),e.clickProjectOptions=e.clickProjectOptions.bind(Ht(e)),e.state={rating:0,materialRating:0,printRating:0,projectSelection:[],photos:[]},e}return e=n,(t=[{key:"setRating",value:function(e,t){switch(t){case q.n:this.setState({rating:e});break;case q.e:this.setState({materialRating:e});break;default:this.setState({printRating:e})}}},{key:"updateRating",value:function(e,t){switch(t){case q.n:this.props.change("rating",e);break;case q.e:this.props.change("material_rating",e);break;default:this.props.change("print_rating",e)}this.setRating(e,t)}},{key:"updatePhotos",value:function(e){this.props.change("photos",e)}},{key:"createStars",value:function(){var t=this,a=[];return Object(D.b)(5)(function(){var e=a.length+1,e=t.state.rating>=e&&0!==t.state.rating?"star-full":"star-empty";a.push(Oe.a.createElement("div",{key:a.length,className:"star",onClick:t.updateRating},Oe.a.createElement(p.a,{name:"rating",component:h.a,formPrefix:"review",type:"hidden",labelClass:"visuallyhidden",ariaRequired:"true"}),Oe.a.createElement(R.a,{iconName:e,iconTitle:Object(Se.c)("reviews.reviewsForm.selectRating",{context:a.length+1})})))}),a}},{key:"createRatingBar",value:function(e){var t=this.props,a=t.reviewSummary,t=t.reviewSummaryData,r=[],n=zt(Object(Te.i)(a)&&(e===q.e?t.dimensions[q.m]:t.dimensions[q.o]).values);try{for(n.s();!(c=n.n()).done;){var i=c.value,o=te()("rating-btn"),c=i.id;(e===q.e&&c<=this.state.materialRating||e===q.i&&c<=this.state.printRating)&&(o=te()("rating-btn rating-btn-active")),r.push(Oe.a.createElement(p.a,{key:i.id,onClickAction:this.updateRating,name:"".concat(c,"-rating"),component:h.a,formPrefix:"review",type:"checkbox",ariaRequired:"true",highlightClass:o}))}}catch(e){n.e(e)}finally{n.f()}return r}},{key:"renderMaterialOptions",value:function(){var e=this.props.reviewSummaryData,t=[],a=zt(e&&e.dimensions[q.c].values);try{for(a.s();!(r=a.n()).done;){var r=r.value;t.push({label:Object(Se.c)("reviews.answerTranslations.".concat(r.label)),value:r.id})}}catch(e){a.e(e)}finally{a.f()}return Oe.a.createElement(p.a,{name:"material",className:te()("Select","material-input-field"),classNamePrefix:"react-select",component:h.f,formPrefix:"review",placeholder:Object(Se.c)("reviews.reviewsForm.materialReceivedQuestionPlaceholder"),label:Object(Se.c)("reviews.reviewsForm.materialReceivedQuestion"),labelClass:"visuallyhidden",isClearable:!1,options:t})}},{key:"clickProjectOptions",value:function(e){var t=this.state.projectSelection;return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.props.change("project_selection",t)}},{key:"renderProjectOptions",value:function(){var t=this,e=this.props.reviewSummaryData;return(e&&e.dimensions[q.d].values).map(function(e){return Oe.a.createElement("div",{key:e.id,className:"project-selection"},Oe.a.createElement(p.a,{name:"".concat(e.label,"-selection"),component:h.a,formPrefix:"review",type:"checkbox",label:Object(Se.c)("reviews.answerTranslations.".concat(e.label)),onClickAction:t.clickProjectOptions}))})}},{key:"createRecommendationOptions",value:function(){var e=this.props.reviewSummaryData;return(e&&e.dimensions[q.b].values).map(function(e){return Oe.a.createElement("div",{className:"recommendation-option-wrapper",key:e.id},Oe.a.createElement(p.a,{name:"recommendation",value:"".concat(e.id),component:h.a,formPrefix:"".concat(e.label),label:Object(Se.c)("reviews.answerTranslations.".concat(e.label)),type:"radio"}))})}},{key:"renderCollapsibleContent",value:function(){var e=[Object(Se.c)("reviews.reviewsGuidelines.section1"),Object(Se.c)("reviews.reviewsGuidelines.section2"),Object(Se.c)("reviews.reviewsGuidelines.section3")],t=[Object(Se.c)("reviews.reviewsGuidelines.bulletPoint1"),Object(Se.c)("reviews.reviewsGuidelines.bulletPoint2"),Object(Se.c)("reviews.reviewsGuidelines.bulletPoint3"),Object(Se.c)("reviews.reviewsGuidelines.bulletPoint4")];return Oe.a.createElement(Oe.a.Fragment,null,e.map(function(e,t){return Oe.a.createElement("p",{key:t,className:"review-guideline-paragraph"},e)}),Oe.a.createElement("ul",{className:"circle-list"},t.map(function(e,t){return Oe.a.createElement("li",{key:t,className:"circle-list-item"},e)})),Oe.a.createElement("p",null,Object(Se.c)("reviews.reviewsGuidelines.termsOfUseStatement")))}},{key:"render",value:function(){var e=this.props,t=e.submitReview,a=e.handleSubmit,r=e.designId,n=e.designFileName,i=e.designName,o=e.errorMessageStars,c=e.errorMessageCaptions,s=e.validateReview,l=e.reviewSubmitted,u=te()("star-rating",{"x-error":o}),e=te()("btn blue-button submit-btn",{"x-disabled":l});return Oe.a.createElement(_e.a,null,Oe.a.createElement("article",{className:"b-reviews-form"},Oe.a.createElement("h3",{className:"h3"},Object(Se.c)("reviews.reviewsForm.heading")),Oe.a.createElement("img",{className:"design-image",src:Ie.e.designImageUrl(r,n).thumbnail,alt:i,height:q.a,width:q.a}),Oe.a.createElement("h2",{className:"design-name"},i),Oe.a.createElement("form",{className:"reviews",onSubmit:a(t)},Oe.a.createElement("fieldset",null,Oe.a.createElement("legend",{className:"visuallyhidden"},Object(Se.c)("reviews.reviewsForm.heading")),Oe.a.createElement(St,{question:Object(Se.c)("reviews.reviewsForm.starsRating"),content:Oe.a.createElement("div",{className:u},o&&Oe.a.createElement(z.a,{message:o}),this.createStars())}),Oe.a.createElement(St,{question:Object(Se.c)("reviews.reviewsForm.materialReceivedQuestion"),content:this.renderMaterialOptions()}),Oe.a.createElement(St,{question:Object(Se.c)("reviews.reviewsForm.materialRating"),content:this.createRatingBar(q.e)}),Oe.a.createElement(St,{question:Object(Se.c)("reviews.reviewsForm.printRating"),content:this.createRatingBar(q.i)}),Oe.a.createElement(St,{question:Object(Se.c)("reviews.reviewsForm.projectQuestion"),content:Oe.a.createElement("div",{className:"project-options-wrapper"},this.renderProjectOptions())}),Oe.a.createElement(St,{question:Object(Se.c)("reviews.reviewsForm.recommendationQuestion"),content:this.createRecommendationOptions()}),Oe.a.createElement("h3",{className:"sub-heading"},Object(Se.c)("reviews.reviewsForm.reviewTitle")),Oe.a.createElement("div",{className:"title-field-wrapper"},Oe.a.createElement(p.a,{name:"title",component:h.d,formPrefix:"review",placeholder:Object(Se.c)("reviews.reviewsForm.titlePlaceholder"),labelText:Object(Se.c)("reviews.reviewsForm.reviewTitle"),labelClass:"visuallyhidden"})),Oe.a.createElement("h3",{className:"sub-heading"},Object(Se.c)("reviews.reviewsForm.review")),Oe.a.createElement(p.a,{name:"text",component:h.g,formPrefix:"review",placeholder:Object(Se.c)("reviews.reviewsForm.textPlaceholder"),label:Object(Se.c)("reviews.reviewsForm.review"),labelClass:"visuallyhidden",ariaRequired:"true"}),Oe.a.createElement("h3",{className:"sub-heading"},Object(Se.c)("reviews.reviewsForm.attachMedia")),Oe.a.createElement("h4",{className:"sub-heading-remark"},Object(Se.c)("reviews.reviewsForm.mediaFormatsAllowed")),Oe.a.createElement(qt,{formPrefix:"review",mediaLimit:5,photos:this.state.photos,updatePhotos:this.updatePhotos,videos:this.state.videos,errorMessageCaptions:c})),Oe.a.createElement("button",{type:"submit",className:e,"aria-label":Object(Se.c)("reviews.reviewsForm.submit"),onClick:s},Object(Se.c)("reviews.reviewsForm.submit"))),l&&Oe.a.createElement("p",{className:"submit-message"},Oe.a.createElement(R.a,{iconName:"checkmark"}),Object(Se.c)("reviews.reviewsForm.reviewSubmitted")),Oe.a.createElement(Ke.a,{title:Object(Se.c)("reviews.reviewsForm.guidelines"),classname:"guidelines-button",collapsibleOpen:!1,content:this.renderCollapsibleContent(),sizeClass:"x-trigger-extra-extra-small"})))}}])&&Gt(e.prototype,t),a&&Gt(e,a),n}();r.propTypes={handleSubmit:n.a.func.isRequired,reviewSummary:n.a.array.isRequired,reviewSummaryData:n.a.object.isRequired,submitReview:n.a.func.isRequired,errorMessageStars:n.a.string.isRequired,errorMessageCaptions:n.a.string.isRequired,validateReview:n.a.func.isRequired,change:n.a.func.isRequired,designId:n.a.number.isRequired,designName:n.a.string.isRequired,designFileName:n.a.string,reviewSubmitted:n.a.bool};var Vt=Object(f.a)({form:"review",validate:o.a})(r);function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Jt(a);return e=r?(e=Jt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Qt(e)&&"function"!=typeof e?Zt(t):e}}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(n,ve["Component"]);var e,t,a,r=Yt(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).state={displayReviewForm:!1,reviewErrorMessageStars:"",reviewErrorMessageCaptions:"",slideInModal:!1,reviewsAlreadyVotedIds:[]},e.incrementVotes=e.incrementVotes.bind(Zt(e)),e.flagAsInappropriate=e.flagAsInappropriate.bind(Zt(e)),e.evaluateEligibility=e.evaluateEligibility.bind(Zt(e)),e.submitReview=e.submitReview.bind(Zt(e)),e.validateReview=e.validateReview.bind(Zt(e)),e.closeReviewsModalOnClick=e.closeReviewsModalOnClick.bind(Zt(e)),e}return e=n,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.windowPosition,e=e.reviewsIsFetched;0<t&&!e&&this.getReviews()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.designId,r=t.windowPosition,n=t.reviewSummary,i=t.reviewsIsFetching,t=t.reviewsIsFetched;a!==e.designId&&this.getReviews(),i||t||e.windowPosition===r||!Object(Te.g)(n)||this.getReviews()}},{key:"getReviews",value:function(){var e=this.props;(0,e.dispatchReviews)(e.designId)}},{key:"incrementVotes",value:function(t,e){var a=this,r=this.props;(0,r.dispatchVotes)(r.designId,t.id,e).catch(function(e){403===e.status&&a.setVotedReview(t.id)})}},{key:"flagAsInappropriate",value:function(t){var a=this,e=this.props;(0,e.dispatchflagAsInappropriate)(e.designId,t.id).catch(function(e){403===e.status&&a.setVotedReview(t.id)})}},{key:"setVotedReview",value:function(e){var t=this.state.reviewsAlreadyVotedIds.slice();0!==t.length&&t.includes(e)||(t.push(e),this.setState({reviewsAlreadyVotedIds:t}))}},{key:"evaluateEligibility",value:function(){var e=this,t=this.props;(0,t.dispatchReviewsEligibility)(t.designId).then(function(){e.props.reviewEligible&&Object($e.a)(e),e.props.reviewEligible&&e.props.openModal("reviews-form")})}},{key:"submitReview",value:function(e){var t=this.props,a=t.dispatchPostedReview,r=t.designId,n=t.closeModal;Object(Te.g)(this.state.reviewErrorMessageStars)&&Object(Te.g)(this.state.reviewErrorMessageCaptions)&&a(r,e).then(function(){setTimeout(function(){n()},5e3)})}},{key:"validateStarsAmount",value:function(e){0===e?this.setState({reviewErrorMessageStars:Object(Se.c)("reviews.reviewsForm.validateRating")}):this.setState({reviewErrorMessageStars:""})}},{key:"validateCaptions",value:function(e){var t="";e.forEach(function(e){e.caption||(t=Object(Se.c)("reviews.reviewsForm.validateCaptions"))}),this.setState({reviewErrorMessageCaptions:t})}},{key:"validateReview",value:function(e,t){this.setState({reviewErrorMessageStars:"",reviewErrorMessageCaptions:""}),this.validateStarsAmount(e),this.validateCaptions(t)}},{key:"closeReviewsModalOnClick",value:function(){this.setState({displayReviewForm:!1})}},{key:"render",value:function(){var e=this.props,t=e.locale,a=e.reviews,r=e.reviewSummary,n=e.reviewSummaryData,i=e.reviewEligible,o=e.reviewSubmitted,c=e.designId,s=e.designFileName,l=e.designName,u=e.userType,d=e.displayModal,m=e.modalName,b=e.isDesktop,e=!Object(Te.g)(r)&&1<n.dimensions.length;return Oe.a.createElement(Oe.a.Fragment,null,a&&Oe.a.createElement(ht,{isDesktop:b,reviews:a,reviewsVoted:this.state.reviewsAlreadyVotedIds,reviewSummaryData:n,reviewDataAvailable:e,locale:t,reviewEligible:i,reviewSubmitted:o,userType:u,incrementVotes:this.incrementVotes,flagAsInappropriate:this.flagAsInappropriate,evaluateEligibility:this.evaluateEligibility}),i&&d&&"reviews-form"===m&&Oe.a.createElement(De.a,{slideInModal:this.state.slideInModal,modalClose:this.closeModal,contents:Oe.a.createElement(Vt,{reviews:a,reviewSummary:r,reviewSummaryData:n,submitReview:this.submitReview,errorMessageStars:this.state.reviewErrorMessageStars,errorMessageCaptions:this.state.reviewErrorMessageCaptions,displayReviewForm:this.state.displayReviewForm,validateReview:this.validateReview,designId:c,designName:l,designFileName:s,reviewSubmitted:o,closeReviewsModalOnClick:this.closeReviewsModalOnClick})}))}}])&&$t(e.prototype,t),a&&$t(e,a),n}();r.propTypes={locale:n.a.string.isRequired,designId:n.a.number.isRequired,designName:n.a.string.isRequired,dispatchReviews:n.a.func.isRequired,dispatchVotes:n.a.func.isRequired,dispatchflagAsInappropriate:n.a.func.isRequired,dispatchReviewsEligibility:n.a.func.isRequired,dispatchPostedReview:n.a.func.isRequired,reviews:n.a.object,reviewSummary:n.a.array,reviewSummaryData:n.a.object,reviewEligible:n.a.bool,reviewSubmitted:n.a.bool,designFileName:n.a.string,userType:n.a.oneOf([k.c,k.a,k.b]),displayModal:n.a.bool,modalName:n.a.string,openModal:n.a.func,closeModal:n.a.func,windowPosition:n.a.number,reviewsIsFetched:n.a.bool,reviewsIsFetching:n.a.bool,isDesktop:n.a.bool.isRequired};var Xt=Object(je.b)(function(e){var t={userType:e.user.userType,displayModal:e.pageSetup.modal.displayModal,modalName:e.pageSetup.modal.modalName,windowPosition:e.pageSetup.windowPosition,designName:e.design.name,designerUserName:e.design.designer.screen_name,designerDescription:e.design.designer.designer_description,designerId:e.design.designer.id,designFileName:e.design.filename,fabrics:e.fabrics,reviewsIsFetched:e.reviews.isFetched,reviewsIsFetching:e.reviews.isFetching};return Object(Te.r)(e.reviews.summary)?t:Object.assign(t,{reviews:e.reviews,reviewEligible:e.reviews.eligibility,reviewSummary:e.reviews.summary,reviewSummaryData:e.reviews.summary[0],reviewSubmitted:e.reviews.review_submitted})},function(r){return{dispatch:r,dispatchReviews:function(e){return Object(Ae.G)(r,e)},dispatchVotes:function(e,t,a){return Object(Ae.P)(r,e,t,a)},dispatchflagAsInappropriate:function(e,t){return Object(Ae.w)(r,e,t)},dispatchPostedReview:function(e,t){return Object(Ae.E)(r,e,t)},dispatchReviewsEligibility:function(e){return Object(Ae.H)(r,e)},closeModal:function(){r(Object(Ce.b)({modal:{displayModal:!1,modalName:""}}))},openModal:function(e){r(Object(Ce.c)({modal:{displayModal:!0,modalName:e}}))}}})(r),ea=a(872),r=function(e){var t=e.locale,a=e.heading,e=e.isDesktop;return Oe.a.createElement("article",{id:"shipping-info-section",className:"b-shipping-info"},e&&Oe.a.createElement("h3",{className:"h3"},a),Oe.a.createElement("p",{className:"x-fat-border"},Object(Se.c)("fabric.shippingInfo.content",{guaranteeLink:Oe.a.createElement(g.a,{hrefValue:d.a.translate("xurls.happinessGuarantee.".concat(t)),contents:Object(Se.c)("fabric.happinessGuarantee.title"),target:"_blank",className:"link-text"}),helpPageLink:Oe.a.createElement(g.a,{hrefValue:Object(ea.j)(t),contents:Object(Se.c)("fabric.shippingInfo.helpPageText"),target:"_blank",className:"link-text"})})))};r.propTypes={locale:n.a.string.isRequired,heading:n.a.string.isRequired,isDesktop:n.a.bool.isRequired};var ta=r;function aa(e){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function na(e,t){return(na=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ia(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=oa(a);return e=r?(e=oa(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==aa(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function oa(e){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&na(e,t)}(n,ve["Component"]);var e,t,a,r=ia(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.locale,a=e.isDesktop,e=Object(Se.c)("fabric.shippingInfo.shippingAndReturns");return Oe.a.createElement(Ye.a,{heading:e,isDesktop:a},Oe.a.createElement(ta,{locale:t,heading:e,isDesktop:a}))}}])&&ra(e.prototype,t),a&&ra(e,a),n}();r.propTypes={locale:n.a.string.isRequired,isDesktop:n.a.bool.isRequired};var ca=Object(je.b)(function(e){return{factory:e.carts.pending.factory}},null)(r),sa=a(39),la=a(20),ua=a(50),r=function(e){var t=e.fabricPrice,a=e.handleShopClick,r=e.printableWidth,n=e.weight,i=e.fabricContent,o=e.fabricConstruction,c=e.color,s=e.shrinkage,l=e.abrasionWyzenbeekDuck,u=e.abrasionWyzenbeekWire,d=e.abrasionMartindale,m=e.certification,b=e.certificationImage,p=e.needleType,f=e.needleSize,g=e.threadSize,h=e.stitchesInch,y=e.threadType,v=e.stretchDetail,O=e.fabricPilling,j=e.dryCrocking,w=e.wetCrocking,S=e.threadCount,C=e.colorfastness,I=e.flammability,E=e.pileHeight,T=e.certificationImageExists,k=e.uvaUvb,R=e.upfRating,P=e.colorFastnessAcid,N=e.colorFastnessAlkaline,A=e.colorFastnessSeaWater,F=e.colorFastnessPoolWater,x=e.features,D=e.fabricWidth;e=function(e,o){var c=[];return Object.keys(o).forEach(function(e,t){var a,r,n=Object(Se.c)("fabric.fabricDetail.".concat(e)),i=o[e];n.includes("|")||i&&i.includes("|")?(a=n.split("|"),r=i.split("|"),i&&!i.includes(".".concat(e))&&c.push(Oe.a.createElement(Oe.a.Fragment,{key:t},a.map(function(e,t){return Oe.a.createElement("dt",{key:"term-".concat(t),className:"list-term"},e)}),r.map(function(e,t){return Oe.a.createElement("dd",{key:"description-".concat(t),className:r.length-1===t?"list-description":""},e)})))):i&&!i.includes(".".concat(e))&&c.push(Oe.a.createElement(Oe.a.Fragment,{key:t},Oe.a.createElement("dt",{className:"list-term"},n),Oe.a.createElement("dd",{className:"list-description"},i)))}),Oe.a.createElement("div",{className:"spec-wrapper"},Oe.a.createElement("h3",{className:"spec-title"},e),Oe.a.createElement("dl",{className:"spec-list"},c))};return Oe.a.createElement("article",{className:"b-product-info-fabric-details"},Oe.a.createElement("section",{className:"fabric-specs"},e(Object(Se.c)("fabric.fabricDetail.specifications"),{printableWidth:r,fabricWidth:D,weight:n,fabricContent:i,fabricConstruction:o,color:c,shrinkage:s,abrasionWyzenbeekDuck:l,abrasionWyzenbeekWire:u,abrasionMartindale:d,stretchDetail:v,fabricPilling:O,dryCrocking:j,wetCrocking:w,colorfastness:C,flammability:I,threadCount:S,pileHeight:E,uvaUvb:k,upfRating:R,colorFastnessAcid:P,colorFastnessAlkaline:N,colorFastnessSeaWater:A,colorFastnessPoolWater:F,features:x}),e(Object(Se.c)("fabric.fabricDetail.sewingRecommendations"),{needleType:p,needleSize:f,threadSize:g,stitchesInch:h,threadType:y})),!m.includes(".certification")&&Oe.a.createElement("section",{className:"fabric-certificates"},Oe.a.createElement("h3",{className:"certificates-title"},Object(Se.c)("fabric.fabricDetail.certifications")),Oe.a.createElement("p",{className:"certificate-box"},b&&T&&Oe.a.createElement("img",{className:"certificate",src:b,alt:m,width:"50",height:"50"}),Oe.a.createElement("em",{className:"certificate-text"},m))),Oe.a.createElement("section",{className:"fabric-cta"},t&&Oe.a.createElement("h3",{className:"fabric-price"},t),Oe.a.createElement("button",{className:"btn white-button x-dark btn-shop-designs x-non-full-width-mobile-button",type:"button",onClick:function(){a()}},Object(Se.c)("fabric.fabricDetail.shopDesigns")),Oe.a.createElement("button",{className:"btn white-button x-dark btn-select-different x-non-full-width-mobile-button",type:"button",onClick:function(){a("shop.fabric")}},Object(Se.c)("fabric.fabricDetail.selectDifferentFabric"))))};r.propTypes={fabricPrice:n.a.string,handleShopClick:n.a.func,printableWidth:n.a.string,fabricWidth:n.a.string,weight:n.a.string,fabricContent:n.a.string,fabricConstruction:n.a.string,color:n.a.string,shrinkage:n.a.string,abrasionWyzenbeekDuck:n.a.string,abrasionWyzenbeekWire:n.a.string,abrasionMartindale:n.a.string,certification:n.a.string,certificationImage:n.a.string,certificationImageExists:n.a.bool,needleType:n.a.string,needleSize:n.a.string,threadSize:n.a.string,stitchesInch:n.a.string,threadType:n.a.oneOfType([n.a.bool,n.a.string]),stretchDetail:n.a.string,fabricPilling:n.a.string,dryCrocking:n.a.string,wetCrocking:n.a.string,threadCount:n.a.string,colorfastness:n.a.string,flammability:n.a.string,pileHeight:n.a.string,uvaUvb:n.a.string,upfRating:n.a.string,colorFastnessAcid:n.a.string,colorFastnessAlkaline:n.a.string,colorFastnessSeaWater:n.a.string,colorFastnessPoolWater:n.a.string,features:n.a.string};var da=r,r=function(e){var n=e.selectedSubstrate,t=e.designId,a=e.measurementSystem,r=e.locale,i=e.productInfoTitle,o=e.productInfoProduct,c=e.homeGoodType,s=e.productType,l=e.fabricDetailsHtml,u=e.showMeasurement,d=e.productInfoRef,m=e.longFabricDescription,b=e.longDescriptionEmphazised,p=e.showTm,f=e.handleShopClick,g=e.fabricPrice,h=s===xe.i,y=la.h[a],e={__html:"<ul class='circle-list'>".concat(Object(Se.c)("homeGood.".concat(c,".details")),"</ul>")},s={__html:"<ul class='long-description'>".concat(Object(Se.c)("homeGood.".concat(c,".longDescription")),"</ul>")},a=te()("fabric-name",{"x-large":h});return Oe.a.createElement("article",{className:"b-product-info",id:"fabric-info-section",ref:d},Oe.a.createElement("h3",{className:"h3"},i),Oe.a.createElement("div",{className:"fabric-characteristics x-fat-border"},Oe.a.createElement("div",{className:"fabric-headline"},Oe.a.createElement("h3",{className:a},o,p&&Oe.a.createElement("sup",{className:"trade-mark"},ua.c)),t&&Oe.a.createElement("span",{className:"design-number",itemProp:"productId"},Object(Se.c)("fabric.aboutFabric.designNr",{designId:t}))),c&&Oe.a.createElement(Oe.a.Fragment,null,Oe.a.createElement("div",{dangerouslySetInnerHTML:e}),Oe.a.createElement("div",{dangerouslySetInnerHTML:s})),u&&Oe.a.createElement("span",{className:"secondary-information"},Object(Se.c)("fabricShop.SIZE.".concat(y),{width:Object(sa.d)(n,y,"printableWidth",r),weight:Object(sa.d)(n,y,"weight",r)})),c&&Oe.a.createElement("strong",{className:"fabric-type"},Oe.a.createElement("span",{className:"fabric-title"},Object(Se.c)("fabric.headlines.fabric")),Object(Se.c)("fabricShop.".concat(n,".name"))),Oe.a.createElement("section",{className:"fabric-description"},Oe.a.createElement("p",null,Object(Te.g)(m)?Object(Se.c)("fabricShop.".concat(n,".description")):m,b&&!b.includes(".longDescriptionEmphazised")&&Oe.a.createElement("em",{className:"description-highlighted"},b)),h&&Oe.a.createElement("dl",null,["useCases","careInstructions","countryOrigin","printing"].map(function(e,t){var a=Object(Se.c)("fabric.fabricDetail.".concat(e)),r=Object(Se.c)("fabricShop.".concat(n,".").concat(e));return!r.includes(".".concat(e))&&Oe.a.createElement(Oe.a.Fragment,{key:t},Oe.a.createElement("dt",{className:"description-title"},a),Oe.a.createElement("dd",{className:"description-text"},r))}))),l&&!h&&Oe.a.createElement(Ke.a,{title:Object(Se.c)("fabricShop.collapsibleText"),sizeClass:"x-trigger-extra-small",collapsibleOpen:!1,classname:"more-details",triggerType:"plus",content:Oe.a.createElement("div",{dangerouslySetInnerHTML:l})}),h&&Oe.a.createElement(da,{fabricPrice:g,handleShopClick:f,printableWidth:Object(Se.c)("fabricShop.SIZE_WIDTH_UNIVERSAL",{widthIn:Object(sa.d)(n,la.g,"printableWidth",r),widthCm:Object(sa.d)(n,la.d,"printableWidth",r)}),fabricWidth:Object(Se.c)("fabricShop.SIZE_WIDTH_UNIVERSAL",{widthIn:Object(sa.d)(n,la.g,"fabricWidth",r),widthCm:Object(sa.d)(n,la.d,"fabricWidth",r)}),weight:Object(Se.c)("fabricShop.SIZE_WEIGHT_UNIVERSAL",{weightOz:Object(sa.d)(n,la.g,"weight",r),weightGsm:Object(sa.d)(n,la.d,"weight",r)}),fabricContent:Object(Se.c)("fabricShop.".concat(n,".fabricContent")),fabricConstruction:Object(Se.c)("fabricShop.".concat(n,".fabricConstruction")),color:Object(Se.c)("fabricShop.".concat(n,".color")),shrinkage:Object(Se.c)("fabricShop.".concat(n,".shrinkage")),abrasionWyzenbeekDuck:Object(Se.c)("fabricShop.".concat(n,".abrasionWyzenbeekDuck")),abrasionWyzenbeekWire:Object(Se.c)("fabricShop.".concat(n,".abrasionWyzenbeekWire")),abrasionMartindale:Object(Se.c)("fabricShop.".concat(n,".abrasionMartindale")),certification:Object(Se.c)("fabricShop.".concat(n,".certification")),certificationImage:Object(Pe.a)("fabric_detail/".concat(n,"_certificate.svg")),certificationImageExists:Object(fe.H)(n),needleType:Object(Se.c)("fabricShop.".concat(n,".needleType")),needleSize:Object(Se.c)("fabricShop.".concat(n,".needleSize")),threadSize:Object(Se.c)("fabricShop.".concat(n,".threadSize")),stitchesInch:Object(Se.c)("fabricShop.".concat(n,".stitchesInch")),threadType:r===ae.b&&Object(Se.c)("fabricShop.".concat(n,".threadType")),stretchDetail:Object(Se.c)("fabricShop.".concat(n,".stretchDetail")),fabricPilling:Object(Se.c)("fabricShop.".concat(n,".fabricPilling")),dryCrocking:Object(Se.c)("fabricShop.".concat(n,".dryCrocking")),wetCrocking:Object(Se.c)("fabricShop.".concat(n,".wetCrocking")),threadCount:Object(Se.c)("fabricShop.".concat(n,".threadCount")),colorfastness:Object(Se.c)("fabricShop.".concat(n,".colorfastness")),flammability:Object(Se.c)("fabricShop.".concat(n,".flammability")),pileHeight:Object(Se.c)("fabricShop.".concat(n,".pileHeight")),uvaUvb:Object(Se.c)("fabricShop.".concat(n,".uvaUvb")),upfRating:Object(Se.c)("fabricShop.".concat(n,".upfRating")),colorFastnessAcid:Object(Se.c)("fabricShop.".concat(n,".colorFastnessAcid")),colorFastnessAlkaline:Object(Se.c)("fabricShop.".concat(n,".colorFastnessAlkaline")),colorFastnessSeaWater:Object(Se.c)("fabricShop.".concat(n,".colorFastnessSeaWater")),colorFastnessPoolWater:Object(Se.c)("fabricShop.".concat(n,".colorFastnessPoolWater")),features:Object(Se.c)("fabricShop.".concat(n,".features"))})))};r.propTypes={measurementSystem:n.a.string.isRequired,locale:n.a.string.isRequired,selectedSubstrate:n.a.string,designId:n.a.number,productInfoTitle:n.a.string,productInfoProduct:n.a.string,homeGoodType:n.a.string,productType:n.a.string,fabricDetailsHtml:n.a.object,showMeasurement:n.a.bool,productInfoRef:n.a.object,longFabricDescription:n.a.string,longDescriptionEmphazised:n.a.string,showTm:n.a.bool,handleShopClick:n.a.func,fabricPrice:n.a.string};var ma=r;function ba(e){return function(e){if(Array.isArray(e))return pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}r=function(e){function a(t){var a=ba(r),e=a[t];return Oe.a.createElement("button",{key:t,onClick:function(e){i(e,t,a)},type:"button","aria-label":e.caption,title:e.caption,className:"btn user-submitted-photo-btn"},Oe.a.createElement("img",{className:"user-submitted-photo",src:e.thumbnailPhoto,alt:e.caption,width:"100",height:"100"}))}var r=e.userSubmittedPhotoData,t=e.isDesktop,n=e.viewport,i=e.openUserUploadedImagesModal,o=Object(Se.c)("fabric.userSubmittedPhotos.sectionHeading"),e=ba(r),e=Oe.a.createElement("article",{className:"b-info-box b-user-submitted-photos"},t&&Oe.a.createElement("h3",{className:"h3"},o),Oe.a.createElement(F.a,{viewport:n,swiperParams:{slidesPerView:"auto",pagination:{}},navigationClasses:"x-on-top-of-slides"},e.map(function(e,t){return a(t)}))),o=Oe.a.createElement(Ke.a,{title:o,classname:"x-bottom-border",sizeClass:"x-trigger-large",subtitleTextClass:"h3 x-flush-left",collapsibleOpen:!1,triggerType:t?"plus":"chevron",content:e});return t?e:o};r.propTypes={userSubmittedPhotoData:n.a.array.isRequired,isDesktop:n.a.bool,viewport:n.a.string,openUserUploadedImagesModal:n.a.func};var fa=r,ga=a(857),r=function(e){var t,a=e.isMugshot,r=e.designerInfoImageId,n=e.designerInfoImageFile,i=e.designerUserName,o=e.designerDescription,c=e.isDesktop,s=e.locale,l=a?Ie.e.avatarDesignerImageUrl(r,n):Ie.e.designImageUrl(r,n,"thumb").thumbnail,e=(t=o)&&s===ae.b&&Oe.a.createElement("p",{className:"designer-info-text"},t);return Oe.a.createElement(ga.a,{heading:Object(Se.c)("fabric.designerInfo",{designer:i}),infoText:e,imageUrl:l,imageAlt:i,imageClass:"designer-avatar",boxClass:"b-designer-info-box",isDesktop:c,moreInfo:Oe.a.createElement(g.a,{className:"learn-more-link",hrefValue:d.a.translate("xurls.userProfile",{userName:i}),title:Object(Se.c)("designs.designerInfo.designerShopTitle",{designer:i}),contents:Object(Se.c)("designs.designerInfo.designerShopTitle",{designer:i})})})};r.propTypes={designerUserName:n.a.string.isRequired,designerDescription:n.a.string,isMugshot:n.a.bool.isRequired,designerInfoImageId:n.a.number,designerInfoImageFile:n.a.string,isDesktop:n.a.bool.isRequired,locale:n.a.string.isRequired};var ha=r,ya=a(887),r=function(e){var t=e.infoText,e=e.isDesktop;return Oe.a.createElement(ga.a,{isDesktop:e,boxClass:"b-spoonflower-info-box",heading:Object(Se.c)("navigation.about.text"),infoText:t,imageUrl:Object(Pe.a)("logo-flower.svg"),imageAlt:"spoonflower-logo",moreInfo:Oe.a.createElement(g.a,{className:"learn-more-link",hrefValue:Object(Se.c)("navigation.about.href"),title:Object(Se.c)("navigation.about.text"),contents:Object(Se.c)("fabric.aboutSpoonflower.learnMore")})})};r.propTypes={infoText:n.a.object.isRequired,isDesktop:n.a.bool.isRequired};var va=r,r=function(e){var t=e.infoText,a=e.isDesktop,e=e.locale;return Oe.a.createElement(ga.a,{isDesktop:a,boxClass:"b-happiness-guarantee-info-box",heading:Object(Se.c)("fabric.happinessGuarantee.title"),infoText:t,imageUrl:Object(Pe.a)("happiness-guarantee.svg"),imageAlt:Object(Se.c)("fabric.happinessGuarantee.title"),moreInfo:Oe.a.createElement(g.a,{className:"learn-more-link",hrefValue:d.a.translate("xurls.happinessGuarantee.".concat(e)),title:Object(Se.c)("fabric.happinessGuarantee.title"),contents:Object(Se.c)("fabric.happinessGuarantee.learnMore")})})};r.propTypes={infoText:n.a.object.isRequired,isDesktop:n.a.bool.isRequired,locale:n.a.string.isRequired};var Oa=r,r=function(e){e=e.isDesktop;return Oe.a.createElement(ga.a,{isDesktop:e,boxClass:"b-trade-info-box x-icon-box",heading:Object(Se.c)("fabric.trade.title"),infoText:Object(Se.c)("fabric.trade.info"),imageUrl:Object(Pe.a)("trade-swatches-icon.svg"),imageAlt:Object(Se.c)("fabric.trade.title"),moreInfo:Oe.a.createElement(g.a,{className:"learn-more-link",hrefValue:Object(Se.c)("navigation.aboutUsTradeProgram.href"),title:Object(Se.c)("fabric.trade.title"),contents:Object(Se.c)("fabric.trade.learnMore")})})};r.propTypes={isDesktop:n.a.bool.isRequired};var ja=r,r=function(e){e=e.isDesktop;return Oe.a.createElement(ga.a,{isDesktop:e,boxClass:"b-trade-info-box x-icon-box",heading:Object(Se.c)("fabric.discounts.title"),infoText:Object(Se.c)("fabric.discounts.info"),imageUrl:Object(Pe.a)("discounts-tags-icon.svg"),imageAlt:Object(Se.c)("fabric.discounts.title"),moreInfo:Oe.a.createElement(g.a,{className:"learn-more-link",hrefValue:Object(Se.c)("navigation.ourDiscounts.href"),title:Object(Se.c)("fabric.discounts.title"),contents:Object(Se.c)("fabric.discounts.learnMore")})})};r.propTypes={isDesktop:n.a.bool.isRequired};var wa=r,r=a(18),Sa=a.n(r),Ca=a(64),Ia=a(69),Ea=a(873);function Ta(e){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pa(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Na(a);return e=r?(e=Na(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ta(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Na(e){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Aa=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(n,ve["Component"]);var e,t,a,r=Pa(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"designThumbnail",value:function(e,t,a,r){var n=4<arguments.length&&void 0!==arguments[4]&&arguments[4];return Oe.a.createElement("img",{height:e,width:e,alt:a,className:"featured-in-collection-img",src:n?r:Ie.e.designImageUrl(t,r).thumbnail})}},{key:"textBlock",value:function(e,t){return Oe.a.createElement("section",{className:"featured-in-collection-wrapper"},Oe.a.createElement("p",{className:"featured-in-collection-heading"},e),Oe.a.createElement("p",{className:"featured-in-collection-text"},t))}},{key:"featuredInCollectionContent",value:function(){var e=this.props,t=e.designId,a=e.designName,r=e.designThumbnail,n=e.designerScreenName,i=e.designerCollectionDesignId,o=e.designerCollectionDesignName,e=e.designerCollectionDesignFilename;return Oe.a.createElement(Oe.a.Fragment,null,Oe.a.createElement(Ea.a,{stackedImagesExtensionClass:"x-stacked-images-small",thumbnailExtensionClass:"x-thumbnail-small",size:Re.s,firstDesignId:t,secondDesignId:i,firstDesignName:a,secondDesignName:o,firstDesignFileName:Ie.e.cipheredDesignThumbnail(t,r,Ie.d),secondDesignFileName:e,firstDesignEnciphered:!0,secondDesignEnciphered:!1}),this.textBlock(Object(Se.c)("designs.designerInfo.featuredInCollectionHeading"),Object(Se.c)("designs.designerInfo.designersCollectionText",{designer:n})))}},{key:"moreLikeThisContent",value:function(){var e=this.props,t=e.designId,a=e.designName,e=e.designThumbnail;return Oe.a.createElement(Oe.a.Fragment,null,Oe.a.createElement("section",{className:"featured-in-collection-image-wrapper"},Oe.a.createElement("div",{className:"featured-thumbnail"},this.designThumbnail(Re.g,t,a,Ie.e.cipheredDesignThumbnail(t,e,Ie.d),!0))),this.textBlock(Object(Se.c)("designs.designerInfo.moreLikeThisHeading"),Object(Se.c)("designs.designerInfo.moreLikeThisText")))}},{key:"productDetailsContent",value:function(){var e=this.props,t=e.designId,a=e.designName,e=e.designFilename;return Oe.a.createElement(Oe.a.Fragment,null,Oe.a.createElement("section",{className:"featured-in-collection-image-wrapper"},Oe.a.createElement("div",{className:"featured-thumbnail"},this.designThumbnail(Re.g,t,a,e))),this.textBlock(Object(Se.c)("fabric.aboutFabric.headline"),Object(Se.c)("fabric.aboutFabric.learnMore")))}},{key:"render",value:function(){var e,t,a=this.props,r=a.designTags,n=a.designerCollectionDesigns,i=a.designerCollectionId,o=a.designerScreenName,c=a.orderItemId,s=a.locale,l=this.featuredInCollectionContent(),u=this.moreLikeThisContent(),d=this.productDetailsContent(),a=function(e){return Object(Ca.d)(Object(Se.c)("tags.main.tagSlug",{tagSlug:e.slug}),(t={},a=be.w,e=c,a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t));var t,a},o=Object(Te.g)(n)?Object(Te.g)(r)?(t="#fabric-info-section",e=d,Object(Se.c)("fabric.aboutFabric.title")):(t=Object(Te.k)(r[s])?a(r[ae.b][0]):a(r[s][0]),e=u,Object(Se.c)("designs.designerInfo.moreLikeThisTitle")):(t=Object(Ia.d)(i,!0),e=l,Object(Se.c)("designs.designerInfo.shopDesignersCollectionTitle",{designer:o}));return Oe.a.createElement(g.a,{className:"b-featured-in-collection",hrefValue:t,contents:e,title:o})}}])&&ka(e.prototype,t),a&&ka(e,a),n}();function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xa(e){return function(e){if(Array.isArray(e))return Da(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Da(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Da(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _a(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qa(e,t){return(qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=za(a);return e=r?(e=za(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Fa(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Aa.propTypes={designerCollectionDesigns:n.a.array,designerCollectionId:n.a.number,designId:n.a.number,designName:n.a.string,designFilename:n.a.string,designerScreenName:n.a.string,designTags:n.a.object,designerCollectionDesignId:n.a.number,designerCollectionDesignName:n.a.string,designerCollectionDesignFilename:n.a.string,orderItemId:n.a.string,locale:n.a.string,designThumbnail:n.a.string};r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qa(e,t)}(n,ve["Component"]);var e,t,a,r=Ma(n);function n(){return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return e=n,(t=[{key:"render",value:function(){var e=this.props,t=e.designId,a=e.designName,r=e.designThumbnail,n=e.designFilename,i=e.designerScreenName,o=e.designTags,c=e.designerCollectionDesignId,s=e.designerCollectionDesignName,l=e.designerCollectionDesignFilename,u=e.designerCollectionDesigns,d=e.designerCollectionId,m=e.orderItemId,b=e.locale,e=e.measurementSystem;return Oe.a.createElement(Aa,{designId:t,designName:a,designThumbnail:r,designFilename:n,designerScreenName:i,designTags:o,designerCollectionDesignId:c,designerCollectionDesignName:s,designerCollectionDesignFilename:l,designerCollectionDesigns:u,designerCollectionId:d,orderItemId:m,locale:b,measurementSystem:e})}}])&&_a(e.prototype,t),a&&_a(e,a),n}();r.propTypes={locale:n.a.string.isRequired,designId:n.a.number,designFilename:n.a.string,designName:n.a.string,designThumbnail:n.a.string,designerScreenName:n.a.string,designTags:n.a.object,designerCollectionDesignId:n.a.number,designerCollectionDesignName:n.a.string,designerCollectionDesignFilename:n.a.string,designerCollectionDesigns:n.a.array,designerCollectionId:n.a.number,orderItemId:n.a.string,measurementSystem:n.a.string};var Ua=Object(je.b)(function(e){var t=e.design.designer_collection||{},a=t.designs||[],r=t.id,n=xa(a.slice(0,1)),i=Object(Te.i)(n[0])?n[0].id:null,t=Object(Te.i)(n[0])?n[0].name:"",n=Object(Te.i)(n[0])?n[0].filename:"";return{designName:e.design.name,designThumbnail:e.design.design_thumbnail,designerScreenName:e.design.designer.screen_name,designTags:e.design.tags,designerCollectionDesignId:i,designerCollectionDesignName:t,designerCollectionDesignFilename:n,designerCollectionDesigns:a,designerCollectionId:r,orderItemId:e.routing.locationBeforeTransitions.query[be.w],measurementSystem:e.user.preferences.measurementSystem}})(r),Ga=a(858),r=function(e){var t,a=e.designerUserName,r=e.designerPublicDesigns,n=e.isMugshot,i=e.designerInfoImageId,o=e.designerInfoImageFile;return Oe.a.createElement(g.a,{className:"b-designer-details",hrefValue:d.a.translate("xurls.userProfile",{userName:a}),contents:(t=n?Ie.e.avatarDesignerImageUrl(i,o):Ie.e.designImageUrl(i,o,"thumb").thumbnail,Oe.a.createElement(Oe.a.Fragment,null,Oe.a.createElement(Ga.a,{altText:a,imgSrc:t}),Oe.a.createElement("section",{className:"designer-details-wrapper"},Oe.a.createElement("p",{className:"designer-details-heading"},Oe.a.createElement("span",{className:"by"},Object(Se.c)("fabric.content.by")),a),Oe.a.createElement("p",{className:"designer-details-text"},Object(Se.c)("designs.designerInfo.designCount",{context:r}))))),title:Object(Se.c)("designs.designerInfo.designerShopTitle",{designer:a})})};r.propTypes={designerUserName:n.a.string,isMugshot:n.a.bool,designerInfoImageId:n.a.number,designerInfoImageFile:n.a.string,designerPublicDesigns:n.a.number};var La=r,r=function(e){var t=e.isAvailableOnWallpaper,a=e.isAvailableOnHomeGood,r=e.isAvailableOnFabric,n=e.allProductsFabricUrl,i=e.allProductsWallpaperUrl,o=e.allProductsHomeGoodsUrl,c=e.allProductsMasksUrl,s=e.isColorMap,l=e.colorMapUrl,u=e.showFabric,d=e.showWallpaper,m=e.showHomeGood,b=e.isFaceMasksPDP,p=e.isAvailableOnWallpaperAndHomeGood,f=e.isAvailableOnWallpaperOrHomeGood,e=e.conjunction;return Oe.a.createElement("div",{className:"b-available-substrates-links"},(a||t||r)&&Oe.a.createElement("div",{className:"available-substrates-header"},Object(Se.c)("designs.otherSubstrateTextPrefix")),Oe.a.createElement("div",null,u&&Oe.a.createElement(g.a,{className:"other-substrate-link-wrapper",hrefValue:n,contents:Object(Se.c)("designs.otherSubstrateFabric"),title:"".concat(Object(Se.c)("designs.otherSubstrateTextPrefix")," ").concat(Object(Se.c)("designs.otherSubstrateFabric"))}),u&&f&&", ",d&&Oe.a.createElement(g.a,{className:"other-substrate-link-wrapper",hrefValue:i,contents:Object(Se.c)("designs.otherSubstrateWallpaper"),title:"".concat(Object(Se.c)("designs.otherSubstrateTextPrefix")," ").concat(Object(Se.c)("designs.otherSubstrateWallpaper"))}),p&&", ",m&&Oe.a.createElement(g.a,{className:"other-substrate-link-wrapper",hrefValue:o,contents:Object(Se.c)("designs.otherSubstrateHomeDecor"),title:"".concat(Object(Se.c)("designs.otherSubstrateTextPrefix")," ").concat(Object(Se.c)("designs.otherSubstrateHomeDecor"))}),(u&&f||p||r)&&Oe.a.createElement("span",{className:"ampersand"},e),(m||f)&&!b&&Oe.a.createElement(g.a,{className:"other-substrate-link-wrapper",hrefValue:c,contents:Object(Se.c)("designs.otherSubstrateFaceMasks"),title:"".concat(Object(Se.c)("designs.otherSubstrateTextPrefix")," ").concat(Object(Se.c)("designs.otherSubstrateFaceMasks"))}),b&&Oe.a.createElement(g.a,{className:"other-substrate-link-wrapper",hrefValue:o,contents:Object(Se.c)("designs.otherSubstrateHomeDecor"),title:"".concat(Object(Se.c)("designs.otherSubstrateTextPrefix")," ").concat(Object(Se.c)("designs.otherSubstrateHomeDecor"))}),s&&Oe.a.createElement(g.a,{className:"other-substrate-link-wrapper",hrefValue:l,contents:Object(Se.c)("designs.otherSubstrateWallpaper"),title:"".concat(Object(Se.c)("designs.otherSubstrateTextPrefix")," ").concat(Object(Se.c)("designs.otherSubstrateWallpaper"))})))};r.propTypes={isAvailableOnWallpaper:n.a.bool,isAvailableOnHomeGood:n.a.bool,isAvailableOnFabric:n.a.bool,allProductsFabricUrl:n.a.string,allProductsWallpaperUrl:n.a.string,allProductsHomeGoodsUrl:n.a.string,allProductsMasksUrl:n.a.string,isColorMap:n.a.bool,colorMapUrl:n.a.string,showFabric:n.a.bool,showWallpaper:n.a.bool,showHomeGood:n.a.bool,isFaceMasksPDP:n.a.bool,isAvailableOnWallpaperAndHomeGood:n.a.bool,isAvailableOnWallpaperOrHomeGood:n.a.bool,conjunction:n.a.string};var Wa=r;function Ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ba(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ba(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}r=function(e){var a=e.designId,r=e.designFileName,t=e.isAvailableOnWallpaper,n=e.isAvailableOnHomeGood,i=e.isAvailableOnFabric,o=e.wallpaperAvailableSubstrateThumbnail,c=e.productTypeAbbreviated,s=e.homeGoodType,l=Ha(Object(ve.useState)(!0),2),u=l[0],d=l[1];var m="".concat(Se.a.localePathname("all_products"),"/").concat(a,"?").concat(be.C,"=").concat(be.B),b="".concat(Se.a.localePathname("all_products"),"/").concat(a,"?").concat(be.C,"=").concat(be.G),p="".concat(Se.a.localePathname("all_products"),"/").concat(a,"?").concat(be.C,"=").concat(be.D),f="".concat(Se.a.localePathname("all_products"),"/").concat(a,"?").concat(be.C,"=").concat(be.F),g=a===Number(fe.d),h=Object(Se.c)("navigation.designTools.href"),y=c!==xe.g&&i,v=c!==xe.xc&&t&&!g,O=c!==xe.H&&n&&!g,e=fe.m.includes(s),l=v&&O,c=v&&!O||!v&&O,s=Object(Se.c)("designs.otherSubstrateTextConjunction");return Oe.a.createElement("article",{className:"b-available-substrates"},Oe.a.createElement("div",{className:"available-products"},Oe.a.createElement("img",{height:"80",width:"80",alt:Object(Se.c)("designs.otherSubstrateWallpaper"),className:"available-substrates-img",src:o,onError:function(e){var t=Ie.e.designImageUrl(a,r).thumbnail;u&&(d(!1),e.target.src=t)}})),Oe.a.createElement(Wa,{isAvailableOnWallpaper:t,isAvailableOnHomeGood:n,isAvailableOnFabric:i,allProductsFabricUrl:m,allProductsWallpaperUrl:b,allProductsHomeGoodsUrl:p,allProductsMasksUrl:f,isColorMap:g,colorMapUrl:h,showFabric:y,showWallpaper:v,showHomeGood:O,isFaceMasksPDP:e,isAvailableOnWallpaperAndHomeGood:l,isAvailableOnWallpaperOrHomeGood:c,conjunction:s}))};r.propTypes={isAvailableOnWallpaper:n.a.bool,isAvailableOnHomeGood:n.a.bool,isAvailableOnFabric:n.a.bool,designId:n.a.number,designFileName:n.a.string.isRequired,productTypeAbbreviated:n.a.string.isRequired,wallpaperAvailableSubstrateThumbnail:n.a.string,homeGoodType:n.a.string};var Va=r,Qa=a(5),$a=a(165),Ka=a(88),a=function(e){var t=e.crossSellBarItems,r=e.selectedSubstrate;return t[r].map(function(t,e){function a(){var e;e=t.link,Object($a.b)(Ka.a,r),Qa.d.push(e)}return Oe.a.createElement("section",{className:"b-available-on-products",key:e},Oe.a.createElement("button",{type:"button","aria-label":Object(Se.c)("designs.productsOverview.goToSpoonflower"),title:Object(Se.c)("designs.productsOverview.goToSpoonflower"),className:"link-button x-non-full-width-mobile-button",onClick:a},Oe.a.createElement("img",{className:"product-image",src:t.imageSrc,alt:t.name,width:"220",height:"165"})),Oe.a.createElement("h2",{className:"product-wrapper"},Oe.a.createElement("button",{type:"button",className:"fabric-title-btn x-non-full-width-mobile-button",onClick:a},Oe.a.createElement("em",{className:"fabric-title"},t.name),Oe.a.createElement("span",{className:"link"},Object(Se.c)("search.substrateOptions.preposition.fabric")," ",Object(Se.c)("fabricShop.".concat(r,".name"))))))})};a.propTypes={crossSellBarItems:n.a.object.isRequired,selectedSubstrate:n.a.string.isRequired};var Ya=a,a=function(e){var t=e.designerUserName,a=e.designerPublicDesigns,r=e.isMugshot,n=e.designerInfoImageId,i=e.designerInfoImageFile,o=e.isAvailableOnWallpaper,c=e.isAvailableOnHomeGood,s=e.designId,l=e.designerId,u=e.designFileName,d=e.isAvailableOnFabric,m=e.wallpaperAvailableSubstrateThumbnail,b=e.productTypeAbbreviated,p=e.locale,f=e.crossSellBarItems,g=e.selectedSubstrate,h=e.homeGoodType,e=te()("b-designer-navbar",{"x-fabric-available":Object(Te.i)(f)});return Object(Te.i)(Sa()(f,"".concat(g)))||l||s||o||c||d?Oe.a.createElement("article",{className:e},Object(Te.i)(Sa()(f,"".concat(g)))&&Oe.a.createElement(Ya,{crossSellBarItems:f,selectedSubstrate:g}),l&&Oe.a.createElement(La,{designerUserName:t,designerPublicDesigns:a,isMugshot:r,designerInfoImageId:n,designerInfoImageFile:i,designerId:l}),s&&Oe.a.createElement(Ua,{locale:p,designId:s,designFilename:u}),(o||c||d)&&Oe.a.createElement(Va,{isAvailableOnWallpaper:o,isAvailableOnHomeGood:c,isAvailableOnFabric:d,designId:s,designFileName:u,wallpaperAvailableSubstrateThumbnail:m,productTypeAbbreviated:b,homeGoodType:h})):null};a.propTypes={productTypeAbbreviated:n.a.string.isRequired,locale:n.a.string.isRequired,designerUserName:n.a.string,designerPublicDesigns:n.a.number,isMugshot:n.a.bool,designerInfoImageId:n.a.number,designerInfoImageFile:n.a.string,isAvailableOnWallpaper:n.a.bool,isAvailableOnHomeGood:n.a.bool,isAvailableOnFabric:n.a.bool,designId:n.a.number,designerId:n.a.number,designFileName:n.a.string,wallpaperAvailableSubstrateThumbnail:n.a.string,crossSellBarItems:n.a.object,selectedSubstrate:n.a.string,homeGoodType:n.a.string};var Za=a;function Ja(e){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tr(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=rr(a);return e=r?(e=rr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ja(e)&&"function"!=typeof e?ar(t):e}}function ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(n,ve["Component"]);var e,t,a,r=tr(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).assignId=e.assignId.bind(ar(e)),e.state={replyIsClosed:!0},e}return e=n,(t=[{key:"assignId",value:function(e){this.setState({buttonId:e}),this.changeReplyState(e,this.state.buttonId)}},{key:"changeReplyState",value:function(e,t){!1===this.state.replyIsClosed&&e!==t?this.setState({replyIsClosed:!1}):this.setState({replyIsClosed:!this.state.replyIsClosed})}},{key:"getImageSource",value:function(e,t,a){return"NO_MUGSHOT"===e?Object(Pe.a)("comment_no_avatar_whiteBG.svg"):Ie.e.avatarDesignerImageUrl(t,a)}},{key:"getCommentImage",value:function(e,t,a){if(e)return Oe.a.createElement("div",{className:"image-wrapper"},Oe.a.createElement("img",{className:"comment-image",src:t,alt:Object(Se.c)("fabric.userSubmittedPhotos.commentPhotoAltText",{user:a})}))}},{key:"createComment",value:function(e){var g=this,t=this.props,h=t.onSubmit,y=t.comments,v=t.onClickReturn,O=t.userType,j=t.userId,w=t.deleteComment,S=t.designId,C=t.designFileName,I=t.locale;return e.concat().reverse().map(function(e){var t=e.deleted,a=e.id,r=t?Object(Se.c)("designs.comments.deletedComment"):e.comment,n=e.user_id,i=e.screen_name,o=e.created_at,c=e.mugshot,s=e.mugshot.id,l=e.mugshot.filename,u=e.children,d=e.parent_id,m=e.link,b=m&&Ie.e.commentImageUrl(S,C,a),p=ke(u),f=u&&!p&&t,e=u&&g.createComment(u),u=E(I,o),n=j===n,f=Object(Te.i)(r)&&!t||f,l=g.getImageSource(c,s,l);return!!f&&Oe.a.createElement("li",{className:"reply-item",key:a},Oe.a.createElement(T,{imageSource:l,userName:i,deletedComment:t,createdAt:o,timeElapsedSinceCreation:u,userId:j,userType:O,parentId:d,commentId:a,userOwnsComment:n,deleteComment:w,usersComment:r,assignId:g.assignId,replyIsClosed:!g.state.replyIsClosed}),g.getCommentImage(m,b,i),Oe.a.createElement(A,{onSubmit:h,onClickReturn:v,commentId:a,buttonId:g.state.buttonId,replyIsClosed:g.state.replyIsClosed,isReply:!0,form:"comment-".concat(a,"-replies"),comments:y}),Oe.a.createElement("div",{className:"replies-wrapper"},e&&!p&&Oe.a.createElement(R.a,{className:"list-arrow-return",iconName:"arrow-return",iconTitle:Object(Se.c)("designs.comments.reply")}),e&&!p&&Oe.a.createElement("ul",{className:"replies-list"},e)))})}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,a=e.comments,r=e.onClickReturn,n=e.userType,i=e.userId,o=e.isDesktop,c=[],s=Object(k.e)(n);if(Object(Te.i)(a))for(var l=0,u=Object.keys(a);l<u.length;l++){var d=u[l];c.push(a[d])}var m=this.createComment(c).filter(function(e){return!1!==e}),e=(!Object(Te.g)(m)||Object(Te.g)(m)&&Object(Te.i)(i)&&s)&&o,n="".concat(Object(Se.c)("designs.comments.heading")," (").concat(m.length,")");return Object(Te.k)(a)?Oe.a.createElement(Ye.a,{heading:n,isDesktop:o},Oe.a.createElement("article",{className:"b-comments",id:"comments-section"},e&&Oe.a.createElement("h3",{className:"h3"},n),Object(Te.i)(i)&&s&&Oe.a.createElement(A,{onSubmit:t,onClickReturn:r,isReply:!1,form:"comments",comments:a}))):Oe.a.createElement(Ye.a,{heading:n,isDesktop:o},Oe.a.createElement("article",{className:"b-comments",id:"comments-section"},e&&Oe.a.createElement("h3",{className:"h3"},n),Object(Te.i)(i)&&s&&Oe.a.createElement(A,{onSubmit:t,onClickReturn:r,isReply:!1,form:"comments",comments:a}),!Object(Te.g)(m)&&Oe.a.createElement("ul",{className:"comments-list"},o?m.slice(0,2):m),o&&!Object(Te.g)(m.slice(2))&&Oe.a.createElement(Ke.a,{title:Object(Se.c)("designs.comments.readMore"),sizeClass:"x-trigger-extra-small",subtitleClass:"x-extra-space",collapsibleOpen:!1,triggerType:"plus",content:Oe.a.createElement("ul",{className:"comments-list"},m.slice(2))})))}}])&&Xa(e.prototype,t),a&&Xa(e,a),n}();nr.propTypes={comments:n.a.array,onSubmit:n.a.func.isRequired,locale:n.a.string.isRequired,isDesktop:n.a.bool.isRequired,onClickReturn:n.a.func,userType:n.a.oneOf([k.c,k.a,k.b]),userId:n.a.number,deleteComment:n.a.func,designId:n.a.number,designFileName:n.a.string};a=function(e){function t(){var e,t;switch(q){case xe.xc:e=Object(Se.c)("wallpaper.content.productInfoTitle"),t=Object(Se.c)("fabricShop.".concat(r,".name"));break;case xe.g:case xe.i:e=Object(Se.c)("fabric.aboutFabric.headline"),t=Object(Se.c)("fabricShop.".concat(r,".name"));break;case xe.H:e=Object(Se.c)("homeGood.content.productInfoTitle"),t=Object(Se.c)("homeGood.".concat(_,".name"));break;default:throw"Unsupported productType[".concat(q,"] scenario")}return{title:e,product:t}}var a=e.locale,r=e.selectedSubstrate,n=e.comments,i=e.commentsFetched,o=e.designerUserName,c=e.designerDescription,s=e.measurementSystem,l=e.shortDescription,u=e.longDescription,d=e.isMugshot,m=e.designerInfoImageId,b=e.designerInfoImageFile,p=e.designId,f=e.onClickReturn,g=e.userType,h=e.userId,y=e.isAvailableOnHomeGood,v=e.isAvailableOnWallpaper,O=e.designerId,j=e.deleteComment,w=e.viewport,S=e.designName,C=e.productSize,I=e.designFileName,E=e.onSubmit,T=e.openUserUploadedImagesModal,k=e.tags,R=e.orderItemId,P=e.designerPublicDesigns,N=e.homeGoodType,A=e.userSubmittedPhotoData,F=e.isAvailableOnFabric,x=e.designThumbnailURL,D=e.fabricDetailsHtml,_=e.productType,q=e.productTypeAbbreviated,M=e.wallpaperAvailableSubstrateThumbnail,z=e.showMeasurement,U=e.rawItemPrice,G=e.quantity,L=e.disableUserFeedback,W=e.productInfoRef,H=e.crossSellBarItems,B=e.longFabricDescription,V=e.longDescriptionEmphazised,Q=e.showTm,$=e.handleShopClick,K=e.fabricPrice,Y=e.crossSellFabricDesigns,Z=function(e,t,a){return Oe.a.createElement("p",{className:"".concat(e,"-description")},Oe.a.createElement("span",{className:"".concat(e,"-info-text heading")},t),Oe.a.createElement("span",{className:"".concat(e,"-info-text")},a))};function J(e){return te()("grid-item","grid-item-".concat(e))}var X=0<A.length,ee=Z("spoonflower",Object(Se.c)("fabric.aboutSpoonflower.intro"),Object(Se.c)("fabric.aboutSpoonflower.info")),e=Z("happiness-guarantee",Object(Se.c)("fabric.happinessGuarantee.intro"),Object(Se.c)("fabric.happinessGuarantee.info")),Z=[me.c,me.a].includes(w);return Oe.a.createElement("article",{className:"b-product-info-grid"},Oe.a.createElement("div",{className:"grid-item-center"},Oe.a.createElement(Za,{locale:a,designerUserName:o,designerPublicDesigns:P,isMugshot:d,designerInfoImageId:m,designerInfoImageFile:b,isAvailableOnWallpaper:v,isAvailableOnHomeGood:y,isAvailableOnFabric:F,designId:p,designerId:O,designFileName:I,wallpaperAvailableSubstrateThumbnail:M,productTypeAbbreviated:q,crossSellBarItems:H,selectedSubstrate:r,homeGoodType:N}),!Object(Te.g)(Y)&&Oe.a.createElement(Ue,{crossSellDesigns:Y,locale:a,viewport:w,productType:_,selectedSubstrate:r,productTypeAbbreviated:q}),Object(Te.g)(Y)&&q!==xe.i&&Oe.a.createElement(Qe,{locale:a,productType:_,selectedSubstrate:r,productTypeAbbreviated:q,productSize:C,rawItemPrice:U,homeGoodType:N,quantity:G})),Oe.a.createElement("div",{className:"grid x-6633"},Oe.a.createElement("div",{className:J("left")},Oe.a.createElement(ma,{selectedSubstrate:r,designId:p,measurementSystem:s,locale:a,homeGoodType:N,productType:_,fabricDetailsHtml:D,productInfoTitle:t().title,productInfoProduct:t().product,showMeasurement:z,productInfoRef:W,longFabricDescription:B,longDescriptionEmphazised:V,showTm:Q,handleShopClick:$,fabricPrice:K}),Oe.a.createElement(ca,{locale:a,isDesktop:Z}),!L&&Oe.a.createElement(Xt,{isDesktop:Z,designId:p,locale:a}),!L&&i&&Oe.a.createElement(nr,{comments:n,onSubmit:E,locale:a,onClickReturn:f,userType:g,userId:h,deleteComment:j,isDesktop:Z,designId:p,designFileName:I})),Oe.a.createElement("div",{className:J("right")},x&&Oe.a.createElement(ya.a,{shortDescription:l,longDescription:u,collapsibleOpen:!1,designName:S,designThumbnailURL:x,isDesktop:Z,locale:a,tags:k,orderItemId:R,measurementSystem:s}),o&&Oe.a.createElement(ha,{designerUserName:o,designerDescription:c,isMugshot:d,designerInfoImageId:m,designerInfoImageFile:b,locale:a,isDesktop:Z}),Oe.a.createElement(va,{infoText:ee,isDesktop:Z}),Oe.a.createElement(Oa,{infoText:e,isDesktop:Z,locale:a}),_===xe.i&&Oe.a.createElement(Oe.a.Fragment,null,a===ae.b&&Oe.a.createElement(ja,{isDesktop:Z}),Oe.a.createElement(wa,{isDesktop:Z})),X&&Oe.a.createElement(fa,{userSubmittedPhotoData:A,isDesktop:Z,viewport:w,openUserUploadedImagesModal:T}))),_===xe.i&&Object(Te.i)($)&&Oe.a.createElement("section",{className:"call-to-action-buttons"},Oe.a.createElement("button",{className:"btn white-button x-dark btn-shop-designs x-non-full-width-mobile-button",type:"button",onClick:function(){$()}},Object(Se.c)("fabric.fabricDetail.shopDesigns")),Oe.a.createElement("button",{className:"btn white-button x-dark btn-select-different x-non-full-width-mobile-button",type:"button",onClick:function(){$("shop.fabric")}},Object(Se.c)("fabric.fabricDetail.selectDifferentFabric"))))};a.propTypes={productType:n.a.string.isRequired,productTypeAbbreviated:n.a.string.isRequired,homeGoodType:n.a.string,measurementSystem:n.a.string.isRequired,locale:n.a.string.isRequired,comments:n.a.array,commentsFetched:n.a.bool,designerUserName:n.a.string,designerPublicDesigns:n.a.number,isMugshot:n.a.bool,designerDescription:n.a.string,shortDescription:n.a.string,longDescription:n.a.string,designerInfoImageId:n.a.number,designerInfoImageFile:n.a.string,selectedSubstrate:n.a.string,designName:n.a.string,productSize:n.a.string,tags:n.a.array,orderItemId:n.a.number,designFileName:n.a.string,isAvailableOnHomeGood:n.a.bool,isAvailableOnWallpaper:n.a.bool,isAvailableOnFabric:n.a.bool,designId:n.a.number,designerId:n.a.number,viewport:n.a.string,userId:n.a.number,deleteComment:n.a.func,onSubmit:n.a.func,onClickReturn:n.a.func,userType:n.a.oneOf([k.c,k.a,k.b]),openUserUploadedImagesModal:n.a.func,userSubmittedPhotoData:n.a.array,fabricDetailsHtml:n.a.object,wallpaperAvailableSubstrateThumbnail:n.a.string,designThumbnailURL:n.a.string,showMeasurement:n.a.bool,rawItemPrice:n.a.number,quantity:n.a.number,disableUserFeedback:n.a.bool,productInfoRef:n.a.object,crossSellBarItems:n.a.object,longFabricDescription:n.a.string,longDescriptionEmphazised:n.a.string,showTm:n.a.bool,handleShopClick:n.a.func,fabricPrice:n.a.string,crossSellFabricDesigns:n.a.array};var ir=a;function or(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function cr(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?or(Object(n),!0).forEach(function(e){var t,a;t=r,e=n[a=e],a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a=function(e){var y=e.locale,r=e.hasNoUserFeedback,n=e.homeGoodType,t=e.productSize,a=e.orderItemId,i=e.selectedSubstrate,o=e.showMeasurement,c=e.fabricDetailsHtml,s=e.productType,l=e.wallpaperType,u=e.wallpaperAvailableSubstrateThumbnail,d=e.rawItemPrice,m=e.quantity,b=e.productInfoRef,p=e.crossSellBarItems,f=e.longFabricDescription,g=e.longDescriptionEmphazised,h=e.showTm,v=e.handleShopClick,O=e.fabricPrice,j=e.crossSellFabricDesigns,w=sr(Object(ve.useState)(0),2),S=w[0],C=w[1],I=sr(Object(ve.useState)(0),2),E=I[0],T=I[1],k=sr(Object(ve.useState)([]),2),R=k[0],P=k[1],N=sr(Object(ve.useState)(0),2),A=N[0],F=N[1],x=sr(Object(ve.useState)(!0),2),D=x[0],_=x[1],q=sr(Object(ve.useState)({}),2),M=q[0],z=q[1],U=sr(Object(ve.useState)(!1),2),G=U[0],L=U[1],W=Object(je.e)(function(e){var t=e.design,a=[];Object(Te.i)(t.tags)&&Array.isArray(t.tags[y])&&(a=t.tags[y]);a=cr(cr({},Object(Ee.i)(e)),{},{userId:e.user.id,userType:e.user.userType,windowPosition:e.pageSetup.windowPosition,designName:e.design.name,designId:e.design.id,shortDescription:e.design.short_description,longDescription:e.design.description,isAvailableOnHomeGood:e.design.for_sale_as_home_good,isAvailableOnWallpaper:e.design.for_sale_as_wallpaper,isAvailableOnFabric:e.design.for_sale_as_fabric,designFileName:e.design.filename,designThumbnail:e.design.design_thumbnail,tags:(a||[]).filter(function(e){return Object(Te.i)(e.slug)}).slice(0,Re.l),designerUserName:e.design.designer.screen_name,designerPublicDesigns:e.design.designer.public_designs,designerDescription:e.design.designer.designer_description,designerId:e.design.designer.id,viewport:e.pageSetup.viewport,displayModal:e.pageSetup.modal.displayModal,modalName:e.pageSetup.modal.modalName,disableUserFeedback:Object(Fe.e)(n)||r,reviews:e.reviews,commentsFetched:e.comments.isFetched,commentsFetching:e.comments.isFetching});return Object(Te.r)(e.design.designer.designer_image)?a:(Object.assign(a,{isMugshot:e.design.designer.designer_image.mugshot,designerInfoImageId:e.design.designer.designer_image.id,designerInfoImageFile:e.design.designer.designer_image.filename}),Object(Te.r)(e.comments)?a:Object.assign(a,{comments:e.comments.comments}))},je.c),H=W.measurementSystem,B=W.userId,V=W.userType,Q=W.windowPosition,$=W.designName,K=W.designId,Y=W.shortDescription,Z=W.longDescription,J=W.isAvailableOnHomeGood,X=W.isAvailableOnWallpaper,ee=W.isAvailableOnFabric,te=W.designFileName,ae=W.designThumbnail,re=W.tags,ne=W.designerUserName,ie=W.designerPublicDesigns,e=W.designerDescription,w=W.designerId,I=W.viewport,k=W.displayModal,N=W.modalName,oe=W.disableUserFeedback,ce=W.reviews,se=W.commentsFetched,le=W.commentsFetching,x=W.isMugshot,q=W.designerInfoImageId,U=W.designerInfoImageFile,ue=W.comments,de=Object(je.d)();Object(ve.useEffect)(function(){var e;!oe&&Object(Te.i)(K)&&0<Q&&!se&&!le&&(e=K,Object(Ae.n)(de,e))},[K,Q]),Object(ve.useEffect)(function(){me()},[ue,ce]);var me=function(){var e,t,a,r,n,i,o,c,s,l,u,d,m,b=[];if(ce.reviews.map(function(e){var t,a,r,n,i;0<e.media.photo.length&&(t=e.media.photo,a=e.id,n=(r=e).title,i=e.text,t.map(function(e){b.push({thumbnailPhoto:e.thumbnailUrl,photo:e.originalUrl,caption:e.caption,id:a,review:r,title:n,text:i})}))}),se&&Object(Te.i)(ue))for(var p=0,f=Object.keys(ue);p<f.length;p++){var g=f[p];ue[g].link&&(s=c=o=m=d=u=l=s=c=o=i=n=r=a=t=e=void 0,e=ue[g],t=e.id,a=Ie.e.commentImageUrl(K,te,t),r=Ie.e.commentImageUrl(K,te,t),n=e.screen_name,i=Object(Se.c)("fabric.userSubmittedPhotos.commentPhotoAltText",{user:n}),o=e.mugshot,c=o.id,s=e.mugshot.filename,l="NO_MUGSHOT"!==o?Ie.e.avatarDesignerImageUrl(c,s):Object(Pe.a)("comment_no_avatar_whiteBG.svg"),u=e.created_at,d=e.user_id,m=e.parent_id,o=e.deleted,c=o?Object(Se.c)("designs.comments.deletedComment"):e.comment,s=Object(Te.i)(e.children),b.push({thumbnailPhoto:a,photo:r,caption:i,imageSource:l,userName:n,createdAt:u,userId:d,parentId:m,id:t,comment:c,deletedComment:o,commentsReplies:s&&Ne(e,B,y,V,h)}))}function h(){return h()}return b};function be(e){if(0<Object.keys(e).length)return t=K,a=e,e=S,Object(Ae.D)(de,t,a,e).catch(function(){return Object(ye.reject)(new we.a({comment:Object(Se.c)("errors.inline.comment")}))});var t,a}function pe(e){C(e)}function fe(e,t){_((!(!1===D)||!(e!==t))&&!D)}function ge(e){e=e,Object(Ae.F)(de,e),de(Object(Ce.b)({modal:{displayModal:!1,modalName:""}}))}var he,ae=K&&Ie.e.cipheredDesignThumbnail(K,ae,Ie.d);return Oe.a.createElement(_e.a,null,Oe.a.createElement(ir,{selectedSubstrate:i,productTypeAbbreviated:(he="",[xe.g,xe.xc,xe.i].includes(s)?he=s:s.startsWith(xe.H)&&(he=xe.H),he),productType:s,homeGoodType:n,wallpaperType:l,measurementSystem:H,locale:y,viewport:I,userType:V,userId:B,productSize:t,comments:ue,commentsFetched:se,onSubmit:be,onClickReturn:pe,deleteComment:ge,openUserUploadedImagesModal:function(e,t,a){var r=(r=a[t].commentsReplies)&&r;e.preventDefault(),T(t),P(a),z(r),r="user-uploaded-images",de(Object(Ce.c)({modal:{displayModal:!0,modalName:r}})),setTimeout(function(){return L(!0)},350),L(!1)},designId:K,designerId:w,designerUserName:ne,designerPublicDesigns:ie,designerDescription:e,wallpaperAvailableSubstrateThumbnail:u,shortDescription:Y,longDescription:Z,fabricDetailsHtml:c,isMugshot:x,designerInfoImageId:q,designerInfoImageFile:U,tags:re,orderItemId:a,designFileName:te,designThumbnailURL:ae,designName:$,showMeasurement:o,isAvailableOnWallpaper:X,isAvailableOnHomeGood:J,isAvailableOnFabric:ee,userSubmittedPhotoData:me(),rawItemPrice:d,quantity:m,disableUserFeedback:oe,productInfoRef:b,crossSellBarItems:p,longFabricDescription:f,longDescriptionEmphazised:g,showTm:h,handleShopClick:v,fabricPrice:O,crossSellFabricDesigns:j}),k&&"user-uploaded-images"===N&&Oe.a.createElement(De.a,{slideInModal:G,modalExtraWide:!0,modalWithButton:!1,contents:Oe.a.createElement(qe,{userId:B,locale:y,photoDataIndex:E,photoDataList:R,handleSwiperSlideChange:function(e){1===e&&E+1<R.length?T(E+1):0===e&&-1<E-1&&T(E-1)},comments:ue,onClickReturn:pe,onSubmit:be,buttonId:A,commentReplies:M,replyIsClosed:D,updateCommentReplies:function(t){function a(e){return a(e)}Object.keys(ue).forEach(function(e){e=ue[e];e.id===t&&z(Ne(e,B,y,V,a))})},getListOfRepliesStatus:ke,deleteComment:ge,assignId:function(e){F(e),fe(e,A)}})}))};a.propTypes={productType:n.a.string,homeGoodType:n.a.string,wallpaperType:n.a.string,productSize:n.a.string,selectedSubstrate:n.a.string.isRequired,orderItemId:n.a.number,hasNoUserFeedback:n.a.bool,params:n.a.shape({pageLang:n.a.string}),locale:n.a.string,fabricDetailsHtml:n.a.object,showMeasurement:n.a.bool,wallpaperAvailableSubstrateThumbnail:n.a.string,rawItemPrice:n.a.number,quantity:n.a.number,productInfoRef:n.a.object,crossSellBarItems:n.a.object,longFabricDescription:n.a.string,longDescriptionEmphazised:n.a.string,showTm:n.a.bool,handleShopClick:n.a.func,fabricPrice:n.a.string,crossSellFabricDesigns:n.a.array};t.a=a},894:function(e,t,a){"use strict";var i=a(0),ye=a.n(i),r=a(18),E=a.n(r),n=a(14),p=a.n(n),o=a(1),c=a.n(o),r=a(9),ve=a.n(r),y=a(5),T=a(349),n=a(350),Oe=a(2),k=a(104),v=a(64),je=a(8),we=a(39),s=a(205),u=a(44),O=a(7),Se=a(60),Ce=a(259),Ie=a(27),Ee=a(20),Te=a(3),o=a(877),l=a(16),ke=a(265),Re=a(164),Pe=a(15),Ne=a(61),Ae=a(263),Fe=a(855),d=a(910),f=a(878),g=a(871),h=a(30),j=a(875),w=a(880),r=function(e){var t=e.designId,a=e.designTitle,r=e.designerUserName,n=e.userId,i=e.userType,o=e.userIsDesigner,c=e.reviewSummary,s=e.tags,l=e.locale,u=e.productFormTitle,d=e.designThumbnail,m=!Object(je.g)(c)&&c[g.c]&&c[g.c].ratings,b=!Object(je.g)(c)&&c[g.c]&&c[g.c].averageRating,e=0<m,c=Object(f.a)(b),b=l===h.b,l=ye.a.createElement("span",{itemProp:"brand"},r),i=Object(Ie.e)(i),i=Object(je.i)(n)&&i;return ye.a.createElement("div",{className:"b-design-heading"},ye.a.createElement("div",{className:"heading-container"},ye.a.createElement("div",{className:"heading-title"},ye.a.createElement("h1",{className:"h3 change-design",itemProp:"name"},u," ",b?ye.a.createElement("span",{className:"design-title"},a):function(){if(s)return ye.a.createElement("span",{className:"design-tags"},s.map(function(e){return e.name}).join(", "))}())),i&&ye.a.createElement("div",{className:"heading-user"},ye.a.createElement(j.a,{designId:t,parentName:"productForm"}),ye.a.createElement(w.a,{designerUserName:r,designTitle:a,designId:t,imageUrl:d,userId:n,tags:s}))),function(){if(o)return ye.a.createElement(Pe.a,{className:"edit-design-link",hrefValue:p.a.translate("xurls.design.edit",{id:t}),contents:Object(Oe.c)("designs.edit")})}(),ye.a.createElement("div",{className:"sub-heading-container"},ye.a.createElement("h2",{className:"designer"},ye.a.createElement("span",{className:"by"},Object(Oe.c)("fabric.content.by")),ye.a.createElement(Pe.a,{hrefValue:p.a.translate("xurls.userProfile",{userName:r}),contents:l})),e&&ye.a.createElement(Pe.a,{className:"rating-star-list flex-fixed",hrefValue:"#reviews-section",contents:ye.a.createElement(ye.a.Fragment,null,ye.a.createElement("span",{className:"rating-amount"},m),ye.a.createElement("ul",{className:"star-list"},c))})))};r.propTypes={designId:c.a.number.isRequired,designTitle:c.a.string,designerUserName:c.a.string.isRequired,designThumbnail:c.a.string.isRequired,userId:c.a.number,userType:c.a.oneOf([Ie.c,Ie.a,Ie.b]),userIsDesigner:c.a.bool,reviewSummary:c.a.array,tags:c.a.array.isRequired,locale:c.a.string,productFormTitle:c.a.string};var xe=r,m=a(274),b=a(869),a=function(e){var t=e.selectedSubstrate,a=e.fabricUnit,r=e.locale,n=e.productInfoRef,i=e.handleShopClick,o=e.swatchButtonText,c=e.handleSwatchClick;return ye.a.createElement("article",{className:"b-product-form-fabric-details"},ye.a.createElement("section",{className:"detail-section"},ye.a.createElement("h2",{className:"fabric-detail-headline"},Object(Oe.c)("fabric.fabricDetail.printableWidth")),ye.a.createElement("p",{className:"fabric-detail-description"},Object(Oe.c)("fabricShop.SIZE_WIDTH.".concat(a),{width:Object(we.d)(t,a,"printableWidth",r)}))),ye.a.createElement("section",{className:"detail-section"},ye.a.createElement("h2",{className:"fabric-detail-headline"},Object(Oe.c)("fabric.fabricDetail.weight")),ye.a.createElement("p",{className:"fabric-detail-description"},Object(Oe.c)("fabricShop.SIZE_WEIGHT.".concat(a),{weight:Object(we.d)(t,a,"weight",r)}))),ye.a.createElement("section",{className:"detail-section"},ye.a.createElement("h2",{className:"fabric-detail-headline"},Object(Oe.c)("fabric.fabricDetail.fabricContent")),ye.a.createElement("p",{className:"fabric-detail-description"},Object(Oe.c)("fabricShop.".concat(t,".fabricContent")))),ye.a.createElement("section",{className:"detail-section"},ye.a.createElement("h2",{className:"fabric-detail-headline"},Object(Oe.c)("fabric.fabricDetail.fabricConstruction")),ye.a.createElement("p",{className:"fabric-detail-description"},Object(Oe.c)("fabricShop.".concat(t,".fabricConstruction")))),ye.a.createElement("button",{className:"link-button btn-more-info x-non-full-width-mobile-button",type:"button",onClick:function(){n.current&&n.current.scrollIntoView({behavior:"smooth"})},"aria-label":Object(Oe.c)("fabric.fabricDetail.moreButtonTitle"),title:Object(Oe.c)("fabric.fabricDetail.moreButtonTitle")},ye.a.createElement(l.a,{iconName:"arrow-down"})," ",Object(Oe.c)("fabricShop.collapsibleText")),ye.a.createElement("button",{className:"btn black-button big-button btn-shop-designs",type:"button",onClick:function(){i()},title:Object(Oe.c)("checkout.confirmation.gotoShopPage")},Object(Oe.c)("fabric.fabricDetail.shopDesigns")),ye.a.createElement("button",{className:"btn grey-button btn-select-different",type:"button",onClick:function(){i("shop.fabric")}},Object(Oe.c)("fabric.fabricDetail.selectDifferentFabric")),o&&ye.a.createElement("button",{type:"button",className:"link-button btn-swatch-price",onClick:function(){c(Te.tc)},title:Object(Oe.c)("checkout.confirmation.gotoShopPage")},o))};a.propTypes={locale:c.a.string.isRequired,selectedSubstrate:c.a.string.isRequired,fabricUnit:c.a.string.isRequired,handleShopClick:c.a.func.isRequired,handleSwatchClick:c.a.func.isRequired,productInfoRef:c.a.object,swatchButtonText:c.a.string};var De=a;function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=N(a);return e=r?(e=N(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==S(e)&&"function"!=typeof e?P(t):e}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(n,i["Component"]);var e,t,a,r=R(n);function n(){var e;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this)).state={scrollPosition:0},e.handleScroll=e.handleScroll.bind(P(e)),e}return e=n,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.sizeQueryParam,a=e.setProductSize,r=e.productPricingMap,n=e.homeGoodType,e=e.productType,e=Object(je.i)(n)||e===Te.xc;window.addEventListener("scroll",this.handleScroll),e&&Object.keys(r).includes(t)&&a(t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.productSize,t=t.setProductSize;a!==e.productSize&&t(a)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"fabricSizeSizingData",value:function(e,t){var a=this.props.measurementSystem,r=Object(we.c)(e,t,a).fabricWidth,t=Object(we.c)(e,t,a).fabricHeight;return"".concat(r).concat(Object(Ee.i)(a)," x ").concat(t).concat(Object(Ee.i)(a))}},{key:"handleOnChange",value:function(e,r,t){var n,i,o,c,s,l,a=this.props,u=a.homeGoodType,d=a.quantity,m=a.setQuantity,b=a.productSize,p=a.setProductSize,f=a.setAddition,g=a.hasAdditionPossible,h=a.sizeStyleMap;d!==e&&m(e),b!==r&&Object(je.k)(u)&&p(r),Object(je.i)(u)&&(n=t===Se.s,i="",c=o=!1,s=h[b][r],l=Object.keys(h[b])[0],Object.keys(h).forEach(function(e){var t=Object.keys(h[e])[0],a=Object.values(h[e])[0];n&&t===r?a===s?(i=e,o=!0):a===s||o||(i=e):n||a!==r||(t===l?(i=e,c=!0):a===l||c||(i=e))}),b!==i&&(p(r),g&&f(""),p=Object(v.d)(window.location.href,(p={},g=O.I,f=i,g in p?Object.defineProperty(p,g,{value:f,enumerable:!0,configurable:!0,writable:!0}):p[g]=f,p)),y.d.push(p)))}},{key:"handleScroll",value:function(){this.setState({scrollPosition:window.pageYOffset})}},{key:"displayDesignerLink",value:function(e){return ye.a.createElement(Pe.a,{itemProp:"url",className:"notice-url",hrefValue:p.a.translate("xurls.userProfile",{userName:e}),contents:e})}},{key:"renderOptions",value:function(t){var a=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Se.s,e=this.props,n=e.fabricSizeSizingMap,i=e.productTypeAbbreviated,o=e.productPricingMap,c=e.quantity,s=e.measurementSystem,l=e.productType,u=e.sizeStyleMap,d=e.sizesAreAvailable,m=e.stylesAreAvailable,b=e.homeGoodType,p=e.singleFabricSizeAvailable,f=[],g=Se.N.includes(l),h=r===Se.t?Se.t:Se.s,y=r===Se.s,e=i===Te.H?Se.r[Te.H]:i===Te.g?Se.r[Te.g]:Se.r[Te.xc],v=i===Te.H,O=[],j=l===Te.X?Te.Qb:l===Te.M?Te.f:"",w="",S="",l=Object(je.g)(n)&&Object(je.g)(o)?[]:Object.keys(n||o);Object(je.i)(b)&&b===Te.O&&!Object(je.g)(l)&&(l=l.reverse()),l.forEach(function(e){var t=v&&(r===Se.t?o[e].style:o[e].size);if((!v||!O.includes(t))&&Object(je.i)(o)||Object(je.i)(n))switch(i){case Te.xc:S=Object(Oe.c)("wallpaper.productSize.".concat(e)),w=Object(Oe.c)("fabric.headlines.rollSize");break;case Te.g:S="".concat(Object(Oe.c)("common.fabricSize.".concat(e))," ").concat(a.fabricSizeSizingData(n,e)),w=Object(Oe.c)("fabric.headlines.size");break;case Te.H:S=s===Ee.e?Object(Oe.c)("homeGood.productSize.".concat(t).concat(j,"_METRIC")):Object(Oe.c)("homeGood.productSize.".concat(t).concat(j)),w=y?Object(Oe.c)("fabric.headlines.size"):Object(Oe.c)("fabric.headlines.style")}v&&O.includes(t)||f.push({label:S,value:v?y?o[e].size:o[e].style:e}),O.push(t)});var C=u&&t&&Object.keys(u[t])[0],I=u&&t&&Object.values(u[t])[0],b=y?E()(f.find(function(e){return e.value===C}),"value"):E()(f.find(function(e){return e.value===I}),"value"),l=E()(f.find(function(e){return e.value===t}),"value"),u=i===Te.g,u=t&&s===Ee.e?v?Object(Oe.c)("homeGood.productSize.".concat(t,"_METRIC")):u?Object(Oe.c)("fabric.productSize.".concat(t)):Object(Oe.c)("wallpaper.productSize.".concat(t)):v?Object(Oe.c)("homeGood.productSize.".concat(t)):u?Object(Oe.c)("fabric.productSize.".concat(t)):Object(Oe.c)("wallpaper.productSize.".concat(t));return g||v&&!d&&!m||p?ye.a.createElement(ye.a.Fragment,null,ye.a.createElement("h3",{className:"h2"},w),ye.a.createElement("h3",{className:"size-information",itemProp:"size"},u)):ye.a.createElement(T.a,{name:h,component:k.f,formPrefix:e,labelText:w,className:"Select",classNamePrefix:"react-select",isClearable:!1,options:f,initialValue:v?b:l,onChange:function(e){a.handleOnChange(c,e,h)}})}},{key:"renderAdditionOptions",value:function(e){var t=this.props,r=t.currency,n=t.homeGoodType,a=t.setAddition,i=t.productSize,o=t.additionPricing,c=t.selectedAddition,s=[],t=Object(Oe.c)("homeGood.".concat(n,".additions.PLAIN"));return Object.keys(e).forEach(function(e){var t=!!o&&o[i][e],a=Object(Oe.c)("homeGood.".concat(n,".additions.").concat(e)),a=t?"".concat(a," ").concat(Object(we.a)(t,r)):a;s.push({label:a,value:e})}),s.push({label:Object(Oe.c)("homeGood.".concat(n,".additions.PLAIN")),value:""}),ye.a.createElement(T.a,{name:"homegood-addition",component:k.f,formPrefix:"homegood-addition",placeholder:t,labelText:Object(Oe.c)("homeGood.content.productInsert"),className:"Select",classNamePrefix:"react-select",isClearable:!1,options:s,initialValue:E()(s.find(function(e){return e.value===c}),"value"),onChange:a})}},{key:"renderChunkingOptions",value:function(t){var e=this.props,a=e.setChunkSize,e=e.chunkSize,r=[],e=e||8;return Se.c.forEach(function(e){r.push({label:"".concat(e," ").concat(t),value:e})}),ye.a.createElement(T.a,{name:"chunking-size",component:k.f,formPrefix:"chunking-size",placeholder:"".concat(e," ").concat(t),isClearable:!1,options:r,className:ve()("Select","chunking-size-form"),classNamePrefix:"react-select",onChange:a})}},{key:"renderImages",value:function(){var e=this.props,t=e.productTypeAbbreviated,a=e.homeGoodType,r=e.wallpaperType,n=e.designImages,i=e.designName,o=e.selectedSubstrate,c=e.productSize,s=e.measurementSystem,l=e.carouselImages,e=e.hasSquareImages;return Object(je.r)(n)&&a&&Object(je.k)(n[a])&&Object(je.r)(l)?ye.a.createElement(d.a,{imageAlternateText:Object(Oe.c)("errors.NO_IMAGE_AVAILABLE",{designName:i}),imgSrc:u.f,extensionClasses:"x-no-image"}):ye.a.createElement(b.a,{measurementSystem:s,parentComponent:"productForm",homeGoodProductSize:c,productTypeAbbreviated:t,homeGoodType:a,wallpaperType:r,selectedSubstrate:o,hasSquareImages:e,carouselImages:l})}},{key:"renderEditFabrics",value:function(e,t,a){return Object(je.i)(e)&&1<e.length?ye.a.createElement("button",{className:"substrate-link",onClick:t},ye.a.createElement("span",{className:"substrate-name",itemProp:"material"},Object(Oe.c)("fabricShop.".concat(a,".name"))),ye.a.createElement(l.a,{iconName:"pencil",iconTitle:Object(Oe.c)("fabricShop.changeSubstrate")})):ye.a.createElement("h3",{className:"substrate-name",itemProp:"material"},Object(Oe.c)("fabricShop.".concat(a,".name")))}},{key:"displayChunkingInfo",value:function(e){var t=this.props,a=t.quantity,r=t.chunkSize,n=t.isChunkable,i=r||8,t=Object(s.c)(a,i),r=Object(s.b)(a,t,i),a=0<r;return n&&ye.a.createElement("section",{className:"detail-section"},ye.a.createElement("h3",{className:"h2"},Object(Oe.c)("fabric.headlines.chunking")),ye.a.createElement("div",{className:"info-box chunking-info"},this.renderChunkingOptions(e),ye.a.createElement(m.a,{piecesAtChosenChunkSize:t,chunkSize:i,unit:e,remainingChunkSizeIsPositive:a,chunkSizeOfRemainingPieces:r})))}},{key:"render",value:function(){var t=this,e=this.props,a=e.locale,r=e.measurementSystem,n=e.currency,i=e.designId,o=e.designName,c=e.designerUserName,s=e.designFileName,l=e.tags,u=e.selectedSubstrate,d=e.fabricList,m=e.recommendedFabricCode,b=e.fabricSizeSizingMap,p=e.productPricingMap,f=e.productFormTitle,g=e.isAvailableOnProduct,h=e.homeGoodType,y=e.wallpaperType,v=e.selectedAddition,O=e.orderItemId,j=e.quantity,w=e.productSize,S=e.chunkSize,C=e.taxRate,I=e.rawItemPrice,E=e.rawItemPriceUndiscounted,T=e.rawItemPriceAddition,k=e.rawItemPriceAdditionUndiscounted,R=e.discountsApplied,P=e.testSwatchPrice,N=e.pricePerMeter,A=e.pricePerYard,F=e.userId,x=e.userEmail,D=e.userType,_=e.productType,q=e.userIsDesigner,M=e.userIsPrivateBuyer,z=e.reviewSummary,U=e.buttonContent,G=e.buttonContentIsAdded,L=e.addToCartButtonTitle,W=e.addToCartClick,H=e.addSwatchToCartClick,B=e.addToCartIsFetching,V=e.orderItemIsFetching,Q=e.isFetchingFabrics,$=e.openFabricPreferencesModal,K=e.hasAdditionPossible,Y=e.recommendedFabricWidth,Z=e.sizesAreAvailable,J=e.stylesAreAvailable,X=e.productTypeAbbreviated,ee=e.productAvailable,te=e.designThumbnail,ae=e.productInfoRef,re=e.handleShopClick,ne=e.handleSwatchClick,ie=e.fabricPriceSwatch,oe=e.hasSquareImages,ce=e.singleFabricSizeAvailable,se=e.productSku,le=Object(je.i)(O),ue=B||Q||V,de=Object(je.i)(d)&&d.includes(m),me=m===Te.A,be=0<C,pe="1".concat(Object(Oe.c)("common.fabricSize.TEST_SWATCH_YARD")," ").concat(Object(Oe.c)("fabricShop.".concat(u,".name"))," ").concat(o),fe=r===Ee.b,ge=fe?A:N,he=fe?Te.vc:Te.uc,e=fe?Se.F:Se.q,O=fe?Ee.g:Ee.d,Q=P||ie?Object(Oe.c)("fabric.content.buyATestSwatch",{context:Object(we.a)(P||ie,n)}):void 0,V=!q&&!M&&!g&&_!==Te.i,C=ue||V||G||!ee,A=this.state.scrollPosition>Ce.q,N=ve()("b-button-group",{"x-fixed":A}),fe=ve()("b-add-to-cart",{"x-add-new-item":!le}),ie=ve()("detail-section x-quantity-and-price-container",{"x-no-vat":!be}),M=!!K&&p[w].home_goods_additions,g=X===Te.g||X===Te.xc,G=X===Te.H&&Z,A=X===Te.H&&J,Z=Se.N.includes(_),X=Se.O.includes(_),J=ve()("image-wrapper",{"x-product-page-image-wrapper":!oe,"x-square-image-page-image-wrapper":oe}),oe=ve()("details-wrapper",{"x-product-page-details-wrapper":!oe,"x-square-image-page-details-wrapper":oe});return ye.a.createElement(Ne.a,null,ye.a.createElement("form",{className:"b-product-form",disabled:ue},D===Ie.b&&Object(je.i)(se)&&ye.a.createElement("div",{className:"bronto-info"},ye.a.createElement("span",{className:"bronto-sku"},se),ye.a.createElement("span",{className:"bronto-email"},x)),ye.a.createElement("div",{className:J},this.renderImages()),ye.a.createElement("div",{className:oe},_===Te.i&&ye.a.createElement(De,{locale:a,selectedSubstrate:u,fabricUnit:O,handleShopClick:re,handleSwatchClick:ne,productInfoRef:ae,swatchButtonText:Q}),_!==Te.i&&ye.a.createElement(ye.a.Fragment,null,ye.a.createElement("section",{className:"detail-section"},ye.a.createElement(xe,{userIsDesigner:q,userId:F,userType:D,designerUserName:c,designId:i,designTitle:o,designFileName:s,designThumbnail:te,productSize:w,reviewSummary:z,tags:l,locale:a,productFormTitle:f})),ye.a.createElement("section",{className:"detail-section"},m&&de&&!me&&ye.a.createElement("div",{className:"info-box recommendation-info"},Object(Oe.c)("fabric.content.fabricRecommendation.".concat(r),{fabric:Object(Oe.c)("fabricShop.".concat(m,".name")),width:Y})),ye.a.createElement("h3",{className:"h2",itemProp:"category"},y?Object(Oe.c)("wallpaper.head.title"):Object(Oe.c)("fabric.headlines.fabric")),this.renderEditFabrics(d,$,u))),(b||p)&&(G||g||Z)&&ye.a.createElement("section",{className:"detail-section"},this.renderOptions(w,Se.s)),(b||p)&&A&&!X&&ye.a.createElement("section",{className:"detail-section"},this.renderOptions(w,Se.t)),K&&ye.a.createElement("section",{className:"detail-section"},this.renderAdditionOptions(M)),_!==Te.i&&ye.a.createElement("section",{className:ie},ye.a.createElement("h3",{className:"h2"},Object(Oe.c)("fabric.headlines.type")),ye.a.createElement(Ae.a,{isFetching:B,quantity:j,handleFabricQuantity:function(e){t.handleOnChange(e,w)},parentComponent:"productForm",singleFabricSizeAvailable:ce}),ye.a.createElement(ke.a,{extensionClass:"x-price-product",rawPrice:I,rawPriceUndiscounted:E,rawItemPriceAddition:T,rawItemPriceAdditionUndiscounted:k,discountsApplied:R,currency:n,locale:a,addition:v,quantity:j}),ye.a.createElement("em",{className:"secondary-information"},b&&Object(je.i)(ge)&&ye.a.createElement("span",{className:"unit-price"},Object(Oe.c)("measurements.priceInfo",{price:Object(we.a)(ge,n),unit:Object(Oe.c)("measurements.".concat(Ee.h[r]))})),h===Te.db&&ye.a.createElement("span",{className:"vat-info"},Object(Oe.c)("fabric.content.setAmount",{context:j})),be&&ye.a.createElement("span",{className:"vat-info"},Object(Oe.c)("fabric.content.infoVAT")),v&&Object.keys(M).map(function(e,t){return ye.a.createElement("span",{className:"addition",key:t},Object(Oe.c)("homeGood.".concat(h,".additions.").concat(e)))}))),V&&ye.a.createElement(Re.a,{extensionClass:"x-notice-text x-info",parentComponent:"productForm",mainText:Object(Oe.c)("fabric.availability.notForSale",{designer:this.displayDesignerLink(c)})}),!ee&&ye.a.createElement(Re.a,{extensionClass:"x-notice-text x-alert",parentComponent:"productForm",mainText:Object(Oe.c)("fabric.availability.unavailable")}),this.displayChunkingInfo(e),_!==Te.i&&ye.a.createElement("div",{className:N},le&&ye.a.createElement(Pe.a,{hrefValue:Oe.a.localePathname("cart"),className:"btn white-button big-button",contents:Object(Oe.c)("fabric.content.cancelCart")}),ye.a.createElement(Fe.a,{addToCartButtonClasses:fe,addToCartButtonTitle:L,onClickFunction:function(){W({productSize:w,quantity:j,chunkSize:S})},buttonIsDisabled:C,buttonContent:U})),Object(je.i)(P)&&!le&&!C&&ye.a.createElement("button",{type:"submit",className:"btn-swatch","aria-label":pe,title:pe,onClick:function(){H({productSize:he,quantity:1})}},Q))))}}])&&C(e.prototype,t),a&&C(e,a),n}();a.defaultProps={productAvailable:!0},a.propTypes={selectedSubstrate:c.a.string.isRequired,taxRate:c.a.number,productSize:c.a.string,productSku:c.a.string,fabricSizeSizingMap:c.a.object,productPricingMap:c.a.object,orderItemId:c.a.number,measurementSystem:c.a.string.isRequired,quantity:c.a.number,rawItemPrice:c.a.number,rawItemPriceUndiscounted:c.a.number,discountsApplied:c.a.bool,designId:c.a.number,productTypeAbbreviated:o.a,designName:c.a.string,designerUserName:c.a.string,designFileName:c.a.string,designThumbnail:c.a.string,addToCartClick:c.a.func,addSwatchToCartClick:c.a.func,addToCartIsFetching:c.a.bool,isFetchingFabrics:c.a.bool,orderItemIsFetching:c.a.bool,currency:c.a.string.isRequired,setQuantity:c.a.func,setProductSize:c.a.func,userId:c.a.number,userEmail:c.a.string,userType:c.a.oneOf([Ie.c,Ie.a,Ie.b]),userIsDesigner:c.a.bool,reviewSummary:c.a.array,locale:c.a.string,buttonContentIsAdded:c.a.bool,buttonContent:c.a.oneOfType([c.a.string,c.a.object]),openFabricPreferencesModal:c.a.func,recommendedFabricCode:c.a.string,recommendedFabricWidth:c.a.string,fabricList:c.a.array,testSwatchPrice:c.a.number,pricePerMeter:c.a.number,pricePerYard:c.a.number,tags:c.a.array,designImages:c.a.object,isChunkable:c.a.bool,chunkSize:c.a.number,setChunkSize:c.a.func,userIsPrivateBuyer:c.a.bool,isAvailableOnProduct:c.a.bool,homeGoodType:c.a.string,wallpaperType:c.a.string,productType:c.a.string.isRequired,productFormTitle:c.a.string,addToCartButtonTitle:c.a.string,sizeQueryParam:c.a.string,setAddition:c.a.func,selectedAddition:c.a.string,hasAdditionPossible:c.a.bool,additionPricing:c.a.object,productAvailable:c.a.bool,rawItemPriceAddition:c.a.oneOfType([c.a.number,c.a.bool]),rawItemPriceAdditionUndiscounted:c.a.oneOfType([c.a.number,c.a.bool]),sizesAreAvailable:c.a.bool,stylesAreAvailable:c.a.bool,sizeStyleMap:c.a.object,carouselImages:c.a.object,productInfoRef:c.a.object,handleShopClick:c.a.func,handleSwatchClick:c.a.func,fabricPriceSwatch:c.a.number,hasSquareImages:c.a.bool,singleFabricSizeAvailable:c.a.bool};t.a=Object(n.a)({form:"ProductForm",validate:function(e,t){var a=t.sizeStyleMap,r=t.productSize,n=t.reset,t=a&&r&&Object.keys(a[r])[0],a=a&&r&&Object.values(a[r])[0],r={};return(t!==e.size||a!==e.style)&&n(),r}})(a)},907:function(e,t,a){"use strict";a.r(t);var n=a(0),_=a.n(n),r=a(1),i=a.n(r),o=a(26),u=a(5),y=a(163),q=a(2),c=a(38),s=a(106),M=a(8),z=a(43);function d(e,t,a,r){var n=[];return t&&(n=function(a,r,e){var n,t=Object.keys(a.fabrics),i=e.replace(/\s+/g,"-");Object.keys(a.categories[q.b.langCode]).forEach(function(e){var t=a.categories[q.b.langCode][e].slug.includes(i);r&&t&&(n=parseInt(e,10))}),r&&(t=t.filter(function(e){return a.fabrics[e].categories&&a.fabrics[e].categories[q.b.langCode]&&a.fabrics[e].categories[q.b.langCode].includes(n)}));return t}(e,t,a)),!Object(M.g)(r)&&Object(M.i)(r)&&(n=function(c,s,e){Object(M.g)(e)&&(e=Object.keys(s.fabrics));var t=Object.values(s.categories[q.b.langCode]),a=[],l=[];return t.forEach(function(e){a.push(e.name.toLowerCase())}),e.map(function(t){var e,a,r,n,i,o=s.fabrics[t].categories;Object(M.k)(o)||(e=o[q.b.langCode],Object(M.k)(e)||(a=s.categories[q.b.langCode],r=[],n=Object(q.c)("fabricShop.".concat(t,".details")).toLowerCase(),i=Object(q.c)("fabricShop.".concat(t,".description")).toLowerCase(),o=Object(q.c)("fabricShop.".concat(t,".name")).toLowerCase(),n=n.replace(z.e,!1).includes(c),i=i.includes(c),o=o.includes(c),e.forEach(function(e){r.push(a[e])}),r.forEach(function(e){e.name.toLowerCase().includes(c)&&-1===l.indexOf(t)&&l.push(t)}),(i||n||o)&&-1===l.indexOf(t)&&l.push(t)))}),l}(r,e,n)),n}function v(e,t){Object(M.k)(t.linkTags)||t.linkTags.forEach(function(e){var r,e=window.document.querySelectorAll("link".concat((r=e,["rel","hreflang"].reduce(function(e,t){var a=r[t];return Object(M.k)(a)||Object(M.g)(a)?e:"".concat(e,"[").concat(t,'="').concat(a,'"]')},"")),':not([data-react-helmet="true"])'));Array.prototype.forEach.call(e,function(e){e.parentNode.removeChild(e)})})}var f=a(867),m=a(105),b=a(64),p=a(165),l=a(37),g=a(849),h=a(117),O=a(850),U=a(20),G=a(3),j=a(7),w="ALPHABETICAL_SORTING",S="PRICE_ASC_SORTING",L=[w,S],C=a(88),W=a(21),I=a(61),E=a(261),H=a(39),B=a(258),r=a(377),V=a.n(r),r=a(376),Q=a.n(r),r=a(378),$=a.n(r),r=a(379),K=a.n(r),Y=a(60),Z=a(853),J=a(272),X=a(206),ee=a(890),a=function(e){function o(e){return Object.keys((t=I,{en:V.a,de:Q.a,es:$.a,fr:K.a}[t])).includes(e);var t}var t,a,r,n,i=e.sortingCriteria,c=e.fabrics,s=e.toggleSlideInComponent,l=e.viewport,u=e.setSubstrate,d=e.clearSearch,m=e.sortedFabrics,b=e.handleSorting,p=e.sortedCategories,f=e.measurementSystem,g=e.designId,h=e.searchBoxRunSearchWithNewInput,y=e.selectedSubstrate,v=e.searchQuery,O=e.inputRefCallback,j=e.clearFilters,w=e.category,S=e.isCategoryPage,C=e.displayFabricsModal,I=e.locale,E=e.currency,T=e.isStandardFabricModal,k=e.isWallpaper,R=e.wallpaperDimensions,P=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:G.Fb;if(![G.Eb,G.Fb].includes(t))throw new Error("Invalid returnType: ".concat(t));var a=e.toLowerCase().replace(z.e,"");if(a.includes(v)&&""!==v){var a=a.split(/[\s,<>()-:]+/),r=v;a.map(function(e){e.includes(v)&&(r=e)});for(var a=new RegExp("(\\b".concat(r,"\\b)"),"gi"),n=e.split(a),i=1;i<e.length;i+=2)n[i]&&(n[i]=t===G.Fb?_.a.createElement("mark",{key:i},n[i]):"<mark>".concat(n[i],"</mark>"));e=n}return e},N=Object(W.m)(l),A=Object(B.f)(g),e=!!T&&Object(M.i)(c.categories[I]),g=S?"search.fabricSearchPlaceholderQuick":"search.fabricSearchPlaceholder",F=!!T&&(t=w,F=c,Object.values(F.categories[q.b.langCode]).forEach(function(e){e.slug===t&&(a=e.name)}),a),x=w,D=U.h[f],F=T?Object(q.c)(g,{searchCategory:F}):Object(q.c)("search.queryPlaceholder");return _.a.createElement("div",{className:"b-substrate-shop"},N&&e&&!C&&_.a.createElement(J.a,{viewport:l,searchQuery:v,clearFilters:j,currentCategory:w,sortedCategories:p}),_.a.createElement("div",{className:"shop-content"},C&&_.a.createElement("h3",{className:"fabric-shop-modal-title"},k?Object(q.c)("fabricShop.subTitleWallpaper"):Object(q.c)("fabricShop.subTitle")),_.a.createElement("article",{className:"top-filters"},_.a.createElement(X.a,{searchBoxId:Y.k,inputPlaceholder:F,inputRefCallback:O,onInputKeyUp:h,onButtonClick:h,searchWrapperFullWidth:C,inputName:"fabricShopSearch",inputText:v,clearSearch:d,extensionClass:"x-substrate-shop"}),!C&&_.a.createElement(ee.a,{radios:(n=[],L.map(function(e){n.push({id:"".concat(e,"_button"),value:e,inputLabel:"".concat(e,"_button"),labelText:Object(q.c)("fabricShop.sorting.".concat(e)),isDefaultValue:i===e})}),n),name:"fabric-sorting",buttonSize:"small-button",handleOnChangeRadio:function(e){return b(e)},inputClassNames:["type-radio"],labelClassNames:["type-label"]})),!N&&e&&!C&&T&&_.a.createElement("div",{className:"button-wrapper-fixed"},_.a.createElement("button",{type:"button",className:"btn blue-button big-button filter-button",onClick:function(){return s(!0,x,p,j,v)}},Object(q.c)("fabricShop.filterFabrics"))),Object(M.g)(m)?(r=S?"search.noResultsCategory":"search.noResults",_.a.createElement("p",{className:"no-results"},Object(q.c)(r,{searchQuery:v,category:w}),_.a.createElement("button",{className:"clear-filters",onClick:j},_.a.createElement("span",{className:"clear-filters-no-results"},Object(q.c)("search.clearYourSearch"))),Object(q.c)("search.andTryAgain"))):_.a.createElement("ul",{className:"order-item-list"},m.map(function(e,t){if(o(e)){a=(a=e,n=Object(q.c)("fabricShop.".concat(a,".details")),i=!1,k&&!Object(M.r)(R)&&(r=f===U.b?R.normalizedVerticalRepeatSize:R.normalizedVerticalRepeatSizeCm,n=Object(q.c)("fabricShop.".concat(a,".details.").concat(f),{repeatSize:r})),v&&(n=P(n,G.Eb)),Array.isArray(n)&&(n=n.join(""),i=!0),{fabricDetails:n,hasSearchResult:i}),r=a.fabricDetails,n=a.hasSearchResult,i=!!T&&Object(M.i)(c.fabrics["".concat(e)].pricing["".concat(D)])&&c.fabrics["".concat(e)].pricing["".concat(D)].price_undiscounted;return!(((a=e)===G.y||a===G.r)&&A)&&_.a.createElement(Z.a,{key:t,viewport:l,fabricCode:e,name:(t=e,P(Object(q.c)("fabricShop.".concat(t,".name")))),altTextFabricName:Object(q.c)("fabricShop.".concat(e,".name")),isSelected:e===y,pricePerUnit:Object(q.c)("measurements.priceInfo",{price:Object(H.a)(i,E),unit:Object(q.c)("measurements.".concat(U.h[f]))}),description:function(e){e=Object(q.c)("fabricShop.".concat(e,".description"));return e=P(e)}(e),details:r,collapsibleOpen:n,setSubstrateClick:u,buttonText:Object(q.c)("fabricShop.buttonText"),selectButtonText:Object(q.c)("fabricShop.selectButtonText"),collapsibleText:Object(q.c)("fabricShop.collapsibleText"),displayFabricsModal:C,isStandardFabricModal:T,showPrice:T,buttonClass:"white-button",measurementSystem:f,locale:I})}var a,r,n,i}))))};a.propTypes={fabrics:i.a.object.isRequired,selectedSubstrate:i.a.string,isCategoryPage:i.a.bool.isRequired,category:i.a.string,toggleSlideInComponent:i.a.func.isRequired,viewport:O.a,setSubstrate:i.a.func.isRequired,locale:i.a.string,currency:i.a.string,measurementSystem:i.a.string,designId:i.a.number,searchBoxRunSearchWithNewInput:i.a.func,searchQuery:i.a.string,inputRefCallback:i.a.func,clearSearch:i.a.func,clearFilters:i.a.func,sortingCriteria:i.a.string,sortedFabrics:i.a.array,handleSorting:i.a.func,sortedCategories:i.a.object,displayFabricsModal:i.a.bool,isStandardFabricModal:i.a.bool,isWallpaper:i.a.bool,wallpaperDimensions:i.a.object};var T=a;function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function N(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function A(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?N(Object(a),!0).forEach(function(e){re(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function F(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ae(a);return e=r?(e=ae(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==k(e)&&"function"!=typeof e?te(t):e}}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,n["Component"]);var e,t,a,r=D(i);function i(){var n;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),re(te(n=r.call(this)),"searchBoxRunSearchWithNewInput",Object(h.a)(function(){var e=n.props,t=e.shopBasePath,a=e.locationQuery,r=e.category,e=e.displayFabricsModal,r=r?"".concat(t,"/").concat(r):t,t=n.searchQueryTextInput.value;n.searchQueryTextInput.value.endsWith(" ")&&(t=t.substring(0,t.length-1)),n.setState({searchQuery:t.toLowerCase()}),n.showFabrics(),e||u.d.push(Object(b.d)(r,(re(r={},j.M,n.state.searchQuery),re(r,j.w,a[j.w]),r)))},300)),n.clearSearch=n.clearSearch.bind(te(n)),n.clearFilters=n.clearFilters.bind(te(n)),n.setSubstrate=n.setSubstrate.bind(te(n)),n.searchBoxRunSearchWithNewInput=n.searchBoxRunSearchWithNewInput.bind(te(n)),n.handleInputRefCallback=n.handleInputRefCallback.bind(te(n)),n.handleSorting=n.handleSorting.bind(te(n)),n.searchQueryTextInput="",n.state={searchQuery:"",matchingFabrics:[],sortedFabrics:[],sortingCriteria:w,fabricNames:[],sortedCategories:{useCase:{},typeMaterial:{},property:{},others:{}},slideInToggled:!1},n}return e=i,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fabrics,a=e.country,r=e.measurementSystem,n=e.currency,i=e.locationQuery,o=e.slideInSubstrateFilter,c=e.closeModal,s=e.displayFabricsModal,l=e.dispatchPageSetup,u=e.dispatchFetchFabrics,d=e.dispatchSetDesign,e=!Object(M.i)(this.props.isStandardFabricModal)||this.props.isStandardFabricModal;i.design_id&&d(parseInt(i.design_id,10)),Object(M.r)(t.fabrics)&&e&&u(a,r,n),e||this.showFabrics(),Object(M.k)(s)&&(c(),l()),Object(M.i)(i.q)&&this.setState({searchQuery:i.q.toLowerCase()}),o(),!Object(M.r)(t.categories)&&e&&(this.showFabrics(),this.getCategories())}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.fabrics,r=t.showSlideInComponent,n=t.toggleSlideInComponent,i=t.isCategoryPage,o=t.category,c=t.viewport,s=t.country,l=t.measurementSystem,u=t.currency,d=t.dispatchFetchFabrics,m=t.displayFabricsModal,b=e.showSlideInComponent,p=e.category,t=e.showFilters,b=i&&r&&b&&!this.state.slideInToggled;a.categories!==e.fabrics.categories&&Object(M.k)(e.fabrics.categories)&&(this.showFabrics(),this.getCategories()),Object(f.a)(["country","measurementSystem","currency"],this.props,e)&&d(s,l,u),b&&(this.setState({slideInToggled:!0}),n(!1)),t&&!Object(W.m)(c)&&n(!0,o,this.state.sortedCategories,this.clearFilters,this.state.searchQuery),o!==p&&(this.clearSearch(),this.showFabrics(),this.setState({slideInToggled:!0}),n(!1)),m&&this.searchQueryTextInput&&this.searchQueryTextInput.focus()}},{key:"getCategoryGroup",value:function(e){var t=this.props.fabrics.categories_groups;return Object(M.i)(t[e.id])?Object(m.d)(t[e.id]):"others"}},{key:"getCategories",value:function(){var o=this,e=this.props,t=e.fabrics,c=e.shopBasePath,s=e.locationQuery,e=e.locale,l=window.location.origin,e=Object.values(t.categories[e]);e.sort(function(e,t){return e.name.localeCompare(t.name)}),e&&e.forEach(function(e){var t=new URL("".concat(l).concat(c,"/").concat(e.slug)),a=Object(m.a)(e.name),r=o.getCategoryGroup(e),n=o.state.sortedCategories,i=Object.keys(n[r]).length;Object(M.i)(s.order_item_id)&&t.searchParams.append("order_item_id",s.order_item_id),n[r][i]={text:a,href:t.pathname+t.search,slug:e.slug},o.setState({sortedCategories:n})})}},{key:"setSubstrate",value:function(e){var t=this.props,a=t.addToCartDesignId,r=t.locationQuery,n=t.dispatchSetSubstrate,i=t.closeModal,o=t.locale,c=t.designSlugDesignId,s=t.routingPath,l=e&&e.includes(G.xc),t=l?Object(m.e)(e,0,e.length):Object(m.e)(e,7,e.length),s=Object(M.i)(s)?s:"fabric.page";n(e),l?Object(p.b)(C.d,e):Object(p.b)(C.a,e),Object(M.i)(a)||Object(M.i)(c)?u.d.push(Object(b.d)("".concat(q.a.localePathname(s),"/").concat(a||c),(re(c={},j.o,t),re(c,j.w,r[j.w]),c))):u.d.push(Object(b.c)(o)),i()}},{key:"clearFilters",value:function(){var e=this,t=this.props,a=t.shopBasePath,r=t.locationQuery;this.setState({searchQuery:"",matchingFabrics:[]},function(){e.searchQueryTextInput.value="",u.d.push(Object(b.d)(a,re({},j.w,r[j.w]))),e.showFabrics(!0)})}},{key:"clearSearch",value:function(){var e=this,t=this.props,a=t.shopBasePath,r=t.locationQuery,n=t.category,i=t.displayFabricsModal,o=n?"".concat(a,"/").concat(n):a;this.setState({searchQuery:""},function(){e.searchQueryTextInput.value="",e.showFabrics(!0),i||u.d.push(Object(b.d)(o,re({},j.w,r[j.w])))})}},{key:"showFabrics",value:function(e){var t=this.props,a=t.fabrics,r=t.isCategoryPage,n=t.category,i=t.fabricOptionsArray,o=t.locale,c=!Object(M.i)(this.props.isStandardFabricModal)||this.props.isStandardFabricModal,s=[],t=!Object(M.g)(this.state.searchQuery)&&Object(M.i)(this.state.searchQuery),o=!!c&&Object(M.i)(a.categories[o]),l=!!c&&U.h[a.measurement_system],i=e||Object(M.g)(this.state.matchingFabrics)?c?Object.keys(a.fabrics):i:this.state.matchingFabrics;(o&&Object(M.i)(n)||t&&c)&&(i=d(a,r,n,this.state.searchQuery)),this.setState({matchingFabrics:i}),i.map(function(e){s.push(A({fabricKey:e,fabricName:Object(q.c)("fabricShop.".concat(e,".name"))},c&&{fabricPrice:a.fabrics[e].pricing[l].price_undiscounted}))}),t?this.sortFabrics(s,this.state.searchQuery):this.sortFabrics(s,w)}},{key:"sortFabrics",value:function(e,t){var a,r,n,i=[],o=Object(m.a)(t);t===this.state.searchQuery?(a=e.filter(function(e){return e.fabricName.includes(o)}).sort(function(e,t){return e.fabricName.indexOf(o)<t.fabricName.indexOf(o)?-1:1}),r=this.sortProductInformation(e,t,"description"),n=this.sortProductInformation(e,t,"details"),e=[].concat(R(a),R(r),R(n))):t===w?e.sort(function(e,t){return e.fabricName.localeCompare(t.fabricName)}):t===S&&e.sort(function(e,t){return e.fabricPrice-t.fabricPrice}),e.forEach(function(e){i.push(e.fabricKey)}),this.setState({sortedFabrics:i,fabricNames:e})}},{key:"handleSorting",value:function(e){this.setState({sortingCriteria:e}),this.sortFabrics(this.state.fabricNames,e)}},{key:"sortProductInformation",value:function(e,a,r){return e.filter(function(e){return!e.fabricName.includes(Object(m.a)(a))&&Object(q.c)("fabricShop.".concat(e.fabricKey,".").concat(r)).toLowerCase().includes(a)}).sort(function(e,t){return Object(q.c)("fabricShop.".concat(e.fabricKey,".").concat(r)).indexOf(a)<Object(q.c)("fabricShop.".concat(t.fabricKey,".").concat(r)).indexOf(a)?-1:1})}},{key:"handleInputRefCallback",value:function(e){this.searchQueryTextInput=e}},{key:"render",value:function(){var e=this.props,t=e.fabrics,a=e.locale,r=e.currency,n=e.isCategoryPage,i=e.category,o=e.viewport,c=e.measurementSystem,s=e.addToCartDesignId,l=e.selectedSubstrate,u=e.toggleSlideInComponent,d=e.locationQuery,m=e.alternateLanguageUrls,b=e.displayFabricsModal,p=e.fabricOptionsArray,f=e.isWallpaper,g=e.wallpaperDimensions,h=!Object(M.i)(this.props.isStandardFabricModal)||this.props.isStandardFabricModal,e=n?Object(q.c)("titles.fabricShopPage.titleCategory",{category:i}):Object(q.c)("titles.fabricShopPage.title");return p||!Object(M.r)(t.fabrics)&&!Object(M.r)(t.categories)?_.a.createElement(I.a,null,_.a.createElement(y.a,{title:e}),!Object(M.r)(m)&&_.a.createElement(y.a,{onChangeClientState:v,link:Object.keys(m).map(function(e){return{rel:"alternate",hrefLang:e,href:m[e]}})}),_.a.createElement(T,{fabrics:t,selectedSubstrate:l,isWallpaper:f,wallpaperDimensions:g,locale:a,currency:r,measurementSystem:c,isCategoryPage:n,category:i,designId:s,viewport:o,toggleSlideInComponent:u,setSubstrate:this.setSubstrate,inputRefCallback:this.handleInputRefCallback,searchBoxRunSearchWithNewInput:this.searchBoxRunSearchWithNewInput,searchQuery:this.state.searchQuery,clearSearch:this.clearSearch,clearFilters:this.clearFilters,sortedFabrics:this.state.sortedFabrics,fabricNames:this.state.fabricNames,sortingCriteria:this.state.sortingCriteria,handleSorting:this.handleSorting,sortedCategories:this.state.sortedCategories,displayFabricsModal:b,isStandardFabricModal:h,orderItemId:d[j.w]})):_.a.createElement(E.a,{message:Object(q.c)("fabricShop.loading")})}}])&&F(e.prototype,t),a&&F(e,a),i}();a.propTypes={selectedSubstrate:i.a.string,dispatchPageSetup:i.a.func.isRequired,dispatchFetchFabrics:i.a.func.isRequired,slideInSubstrateFilter:i.a.func.isRequired,toggleSlideInComponent:i.a.func.isRequired,dispatchSetSubstrate:i.a.func.isRequired,dispatchSetDesign:i.a.func.isRequired,fabrics:i.a.shape({fabrics:i.a.object,categories:i.a.object,categories_groups:i.a.object,measurement_system:i.a.string}),isCategoryPage:i.a.bool.isRequired,category:i.a.string,addToCartDesignId:i.a.number,shopBasePath:i.a.string.isRequired,viewport:O.a,showSlideInComponent:i.a.bool.isRequired,locale:i.a.string,country:i.a.string,measurementSystem:i.a.string,currency:i.a.string,locationQuery:i.a.object,alternateLanguageUrls:i.a.object,closeModal:i.a.func.isRequired,displayFabricsModal:i.a.bool,showFilters:i.a.bool,designSlugDesignId:i.a.string,routingPath:i.a.string,fabricOptionsArray:i.a.array,isStandardFabricModal:i.a.bool,isWallpaper:i.a.bool,wallpaperDimensions:i.a.object};t.default=Object(o.b)(function(e,t){var a=e.routing.locationBeforeTransitions.pathname.split("/"),r=t.params.category,n=Object(M.i)(r),i=t.params.pageLang,o=e.routing.locationBeforeTransitions.query,c=e.pageSetup.showFilters,t={},c=A(A({},Object(g.i)(e)),{},{locale:i,locationQuery:o,viewport:e.pageSetup.viewport,shopBasePath:"/".concat(a[1],"/").concat(a[2]),category:r,isCategoryPage:n,fabrics:e.fabrics,addToCartDesignId:e.addToCart.designId,designSlugDesignId:e.design.slug,selectedSubstrate:e.addToCart.selectedSubstrate||Object(g.f)(e,G.g),showSlideInComponent:!!e.pageSetup.slideInComponent&&!!e.pageSetup.showSlideInComponent,showFilters:c});if(Object(M.r)(e.fabrics.categories))return c;var s,l,u=e.fabrics.categories;return n&&(s=Object.values(u[i]).find(function(e){return e.slug===r})||{},l=Object.values(u).reduce(function(e,t){return Object.assign(e,t)},{})[s.best_source_id]||{},t=Object.keys(u).reduce(function(e,t){if(t===i)return e;var a=Object.values(u[t]).find(function(e){return e.id===s.id||e.best_source_id===s.id||Object(M.i)(l.id)&&(e.best_source_id===l.id||e.id===l.id)});return Object(M.i)(a)&&Object(M.i)(a.slug)&&(e[t]=Object(b.d)("".concat(q.a.localePathname("shop.fabric",t),"/").concat(a.slug),o)),e},{})),Object.assign(c,{alternateLanguageUrls:t})},function(i){return{dispatch:i,dispatchPageSetup:function(){i(Object(c.d)({pageTitle:Object(q.c)("fabric.head.title"),contentInnerExtensions:"x-1294"}))},dispatchFetchFabrics:function(e,t,a){Object(l.t)(i,e,t,a)},slideInSubstrateFilter:function(){i(Object(c.e)({slideInComponent:{name:"SubstrateFilter"}}))},toggleSlideInComponent:function(e,t,a,r,n){i(Object(c.e)({showSlideInComponent:e,slideInComponent:{name:"SubstrateFilter",props:{currentCategory:t,sortedCategories:a,clearFilters:r,searchQuery:n}}}))},dispatchSetSubstrate:function(e){i(Object(s.l)(e))},dispatchSetDesign:function(e){i(Object(s.i)(e))},closeModal:function(){i(Object(c.b)({modal:{displayModal:!1,modalName:""}}))}}})(a)}}]);